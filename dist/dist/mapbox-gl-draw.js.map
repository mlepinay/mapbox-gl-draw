{"version":3,"sources":["../mapbox-gl-draw.js"],"names":["f","exports","module","define","amd","g","window","global","self","MapboxDraw","e","t","n","r","s","o","u","a","require","i","Error","code","l","call","length","runSetup","setupOptions","setupAPI","Constants","setupDraw","options","api","ctx","setup","onAdd","onRemove","types","modes","wgs84","geometry","ring","ringArea","_","area","type","polygonArea","coordinates","geometries","coords","Math","abs","p1","p2","p3","lowerIndex","middleIndex","upperIndex","coordsLength","rad","sin","RADIUS","PI","normalize","Point","MultiPoint","LineString","MultiLineString","Polygon","MultiPolygon","GeometryCollection","Feature","FeatureCollection","gj","features","properties","jsonlint","geojsonHintObject","hint","str","errors","parse","match","message","lineNumber","parseInt","line","error","concat","rightHandRule","precisionWarningCount","maxPrecisionWarnings","maxPrecision","root","noDuplicateMembers","__duplicateProperties__","push","join","__line__","requiredProperty","expectedType","typesLower","toLowerCase","undefined","everyIs","every","x","name","Array","isArray","constructor","featureCollection","crs","bbox","forEach","position","level","precisionWarning","num","precision","decimalStr","String","split","positionArray","depth","pos","index","results","map","c","some","defaultCRSName","geometrySemantics","geom","point","polygon","multiPolygon","lineString","multiLineString","multiPoint","geometryCollection","feature","id","Object","keys","reduce","prev","curr","err","hasOwnProperty","isRingClockwise","isPolyRHR","interiorCoords","slice","validateRightHandRule","Extent","_bbox","Infinity","_valid","prototype","include","ll","min","max","union","other","contains","flatten","list","_flatten","acc","item","geojsonNormalize","geojsonFlatten","normalized","geojsonCoords","traverse","extent","getExtent","bboxify","value","update","ext","up","mem","JSON","stringify","arguments","apply","hat","bits","base","digits","log","pow","rem","floor","res","random","toString","b","parsed","rack","expandBy","fn","data","iters","hats","get","set","process","k","v","$V0","$V1","$V2","$V3","$V4","$V5","$V6","$V7","$V8","$V9","parser","trace","yy","symbols_","terminals_","productions_","performAction","anonymous","yytext","yyleng","yylineno","yystate","$$","_$","$0","$","replace","Number","defineProperty","first_line","enumerable","table","defaultActions","parseError","hash","recoverable","_parseError","msg","input","stack","tstack","vstack","lstack","recovering","TERROR","EOF","args","lexer","create","sharedState","setInput","yylloc","yyloc","ranges","getPrototypeOf","popStack","_token_stack","lex","token","symbol","preErrorSymbol","state","action","yyval","p","len","newState","expected","errStr","showPosition","text","loc","last_line","first_column","last_column","range","_input","_more","_backtrack","done","matched","conditionStack","offset","ch","lines","unput","substr","oldLines","more","reject","backtrack_lexer","less","pastInput","past","upcomingInput","next","pre","test_match","indexed_rule","backup","matches","tempMatch","rules","_currentRules","flex","begin","condition","popState","pop","conditions","topState","pushState","stateStackSize","yy_","$avoiding_name_collisions","YY_START","YYSTATE","Parser","main","commonjsMain","console","exit","source","readFileSync","argv","LARGE_ARRAY_SIZE","HASH_UNDEFINED","COMPARE_PARTIAL_FLAG","COMPARE_UNORDERED_FLAG","MAX_SAFE_INTEGER","argsTag","arrayTag","asyncTag","boolTag","dateTag","errorTag","funcTag","genTag","mapTag","numberTag","nullTag","objectTag","promiseTag","proxyTag","regexpTag","setTag","stringTag","symbolTag","undefinedTag","weakMapTag","arrayBufferTag","dataViewTag","float32Tag","float64Tag","int8Tag","int16Tag","int32Tag","uint8Tag","uint8ClampedTag","uint16Tag","uint32Tag","reRegExpChar","reIsHostCtor","reIsUint","typedArrayTags","freeGlobal","freeSelf","Function","freeExports","nodeType","freeModule","moduleExports","freeProcess","nodeUtil","binding","nodeIsTypedArray","isTypedArray","arrayFilter","array","predicate","resIndex","result","arrayPush","values","arraySome","baseTimes","iteratee","baseUnary","func","cacheHas","cache","key","has","getValue","object","mapToArray","size","overArg","transform","arg","setToArray","arrayProto","funcProto","objectProto","coreJsData","funcToString","maskSrcKey","uid","exec","IE_PROTO","nativeObjectToString","reIsNative","RegExp","Buffer","Symbol","Uint8Array","propertyIsEnumerable","splice","symToStringTag","toStringTag","nativeGetSymbols","getOwnPropertySymbols","nativeIsBuffer","isBuffer","nativeKeys","DataView","getNative","Map","Promise","Set","WeakMap","nativeCreate","dataViewCtorString","toSource","mapCtorString","promiseCtorString","setCtorString","weakMapCtorString","symbolProto","symbolValueOf","valueOf","Hash","entries","clear","entry","hashClear","__data__","hashDelete","hashGet","hashHas","hashSet","ListCache","listCacheClear","listCacheDelete","assocIndexOf","lastIndex","listCacheGet","listCacheHas","listCacheSet","MapCache","mapCacheClear","mapCacheDelete","getMapData","mapCacheGet","mapCacheHas","mapCacheSet","SetCache","add","setCacheAdd","setCacheHas","Stack","stackClear","stackDelete","stackGet","stackHas","stackSet","pairs","arrayLikeKeys","inherited","isArr","isArg","isArguments","isBuff","isType","skipIndexes","isIndex","eq","baseGetAllKeys","keysFunc","symbolsFunc","baseGetTag","getRawTag","objectToString","baseIsArguments","isObjectLike","baseIsEqual","bitmask","customizer","baseIsEqualDeep","equalFunc","objIsArr","othIsArr","objTag","getTag","othTag","objIsObj","othIsObj","isSameTag","equalArrays","equalByTag","objIsWrapped","othIsWrapped","objUnwrapped","othUnwrapped","equalObjects","baseIsNative","isObject","isMasked","pattern","isFunction","test","baseIsTypedArray","isLength","baseKeys","isPrototype","isPartial","arrLength","othLength","stacked","seen","arrValue","othValue","compared","othIndex","tag","byteLength","byteOffset","buffer","convert","objProps","getAllKeys","objLength","othProps","skipCtor","objValue","objCtor","othCtor","getSymbols","isKeyable","isOwn","unmasked","stubArray","ArrayBuffer","resolve","Ctor","ctorString","proto","isArrayLike","stubFalse","isEqual","y","clone","_add","sub","_sub","multByPoint","_multByPoint","divByPoint","_divByPoint","mult","_mult","div","_div","rotate","_rotate","rotateAround","_rotateAround","matMult","m","_matMult","unit","_unit","perp","_perp","round","_round","mag","sqrt","equals","dist","distSqr","dx","dy","angle","atan2","angleTo","angleWith","angleWithSep","cos","obj","Traverse","ps","node","cb","walk","init","skip","isRoot","paths","path","nodes","parents","src","dst","copy","objectKeys","immutable","alive","walker","node_","modifiers","keepGoing","parent","circular","stopHere","remove","before","after","post","stop","block","updateState","isLeaf","notLeaf","notRoot","ret","child","isLast","isFirst","isDate","Date","getTime","isRegExp","isError","isBoolean","Boolean","isNumber","isString","__proto__","T","toS","xs","FLATTENING","POLAR_RADIUS","extend","target","featuresAt","stringSetsAreEqual","geojsonhint","StringSet","featureTypes","getFeatureIdsAt","click","getSelectedIds","store","getSelected","geojsonTypes","FEATURE_COLLECTION","toGeoJSON","getSelectedPoints","getSelectedCoordinates","coordinate","FEATURE","POINT","renderBatch","createRenderBatch","toDelete","getAllIds","newIds","newIdsLookup","filter","delete","geojson","ids","Model","internalFeature","_internalFeature","getCoordinates","incomingCoords","render","getAll","featureIds","silent","getMode","DIRECT_SELECT","events","changeMode","SIMPLE_SELECT","deleteAll","mode","modeOptions","setSelected","featureId","trash","combineFeatures","uncombineFeatures","setFeatureProperty","property","classes","CONTROL_BASE","CONTROL_PREFIX","CONTROL_BUTTON","CONTROL_BUTTON_LINE","CONTROL_BUTTON_POLYGON","CONTROL_BUTTON_POINT","CONTROL_BUTTON_TRASH","CONTROL_BUTTON_COMBINE_FEATURES","CONTROL_BUTTON_UNCOMBINE_FEATURES","CONTROL_GROUP","ATTRIBUTION","ACTIVE_BUTTON","BOX_SELECT","sources","HOT","COLD","cursors","ADD","MOVE","DRAG","POINTER","NONE","POLYGON","LINE","LINE_STRING","MULTI_PREFIX","MULTI_POINT","MULTI_LINE_STRING","MULTI_POLYGON","DRAW_LINE_STRING","DRAW_POLYGON","DRAW_POINT","STATIC","CREATE","DELETE","UPDATE","SELECTION_CHANGE","MODE_CHANGE","ACTIONABLE","RENDER","COMBINE_FEATURES","UNCOMBINE_FEATURES","updateActions","CHANGE_COORDINATES","meta","MIDPOINT","VERTEX","activeStates","ACTIVE","INACTIVE","LAT_MIN","LAT_RENDERED_MIN","LAT_MAX","LAT_RENDERED_MAX","LNG_MIN","LNG_MAX","setupModeHandler","getFeaturesAndSetCursor","isClick","isTap","objectToMode","mouseDownInfo","touchStartInfo","_currentModeName","currentMode","drag","event","isDrag","time","ui","queueMapClasses","mouse","originalEvent","stopPropagation","mousedrag","endInfo","touchdrag","mousemove","button","buttons","which","featureTarget","mousedown","mouseup","mouseout","touchstart","preventDefault","touchEnabled","touch","touchmove","touchend","tap","isKeyModeValid","keydown","srcElement","classList","keyCode","controls","line_string","keyup","zoomend","changeZoom","dataType","hasLayers","styles","style","getLayer","addLayers","setDirty","modename","nextModeOptions","eventOptions","modebuilder","fire","actionState","actionable","actions","changed","start","defaultMode","currentModeName","currentModeRender","addEventListeners","on","container","addEventListener","keybindings","removeEventListeners","off","removeEventListener","featureChanged","setCoordinates","setProperty","internal","active","userProperties","isValid","addCoordinate","lng","lat","getCoordinate","removeCoordinate","updateCoordinate","models","takeAction","parts","idx","tail","MultiFeature","model","TypeError","_coordinatesToFeatures","_this","bind","getFeatures","pathOrLng","lngOrLat","ringId","coordId","isOfMetaType","isShiftMousedown","shiftKey","isActiveFeature","isInactiveFeature","noTarget","isFeature","isVertex","isShiftDown","isEscapeKey","isEnterKey","true","_true","geojsonFeatures","delta","northInnerEdge","southInnerEdge","northOuterEdge","southOuterEdge","westEdge","eastEdge","bounds","featureSouthEdge","featureNorthEdge","featureWestEdge","featureEastEdge","constrainedDelta","ceil","startVertex","endVertex","startCoord","endCoord","ptA","project","ptB","mid","unproject","coord_path","createVertex","createMidpoint","createSupplementaryPoints","basePath","_geojson$geometry","supplementaryPoints","isSelectedPath","lineIndex","processLine","indexOf","processMultiGeometry","lineBasePath","firstPointString","lastVertex","pointIndex","pointPath","vertex","midpoints","midpoint","stringifiedPoint","selectedPaths","subType","subCoordinates","subFeature","parentId","selected","enable","setTimeout","doubleClickZoom","disable","sortFeatures","mapEventToBoundingBox","META_TYPES","featuresAtClick","featuresAtTouch","clickBuffer","touchBuffer","box","queryParams","layers","queryRenderedFeatures","uniqueFeatures","getFeatureAtAndSetCursors","updateMapClasses","euclideanDistance","FINE_TOLERANCE","GROSS_TOLERANCE","INTERVAL","end","fineTolerance","grossTolerance","interval","moveDistance","isEventAtCoordinates","lngLat","TOLERANCE","tolerance","mapEvent","ModeHandler","DrawContext","handlers","selector","delegate","eventName","handles","iHandle","handle","mouseEventPoint","mouseEvent","rect","getBoundingClientRect","clientX","left","clientLeft","clientY","top","clientTop","constrainFeatureMovement","currentCoordinates","moveCoordinate","coord","moveRing","moveMultiPolygon","multi","nextCoordinates","FEATURE_SORT_RANKS","comparator","score","sort","items","_items","_length","orderedKeys","throttle","context","lock","later","wrapperFn","toDenseArray","_require","CommonSelectors","moveFeatures","isMidpoint","DirectSelect","fireUpdate","fireActionable","setActionableState","selectedCoordPaths","startDragging","dragPan","canDragMove","dragMoveLocation","stopDragging","dragMoving","onVertex","about","selectedIndex","selectedCoordinates","pathsToCoordinates","setSelectedCoordinates","onMidpoint","feature_id","onFeature","dragFeature","dragVertex","selectedCoords","selectedCoordPoints","clickNoTarget","clickInactive","clickActiveFeature","clearSelectedCoordinates","onSetup","opts","getFeature","startPos","coordPath","onStop","toDisplayFeatures","onTrash","reverse","deleteFeature","onMouseMove","noCoords","updateUIClasses","onMouseOut","onTouchStart","onMouseDown","onDrag","onClick","onTap","onTouchEnd","onMouseUp","_toConsumableArray","arr","arr2","from","DrawLineString","currentVertexPosition","direction","lastCoord","_line","_line2","newFeature","addFeature","clearSelectedFeatures","activateUIButton","clickAnywhere","clickOnVertex","onKeyUp","display","isActiveLine","DrawPoint","stopDrawingAndRemove","isActivePoint","DrawPolygon","isActivePolygon","coordinateCount","endPos","lineCoordinates","simple_select","direct_select","draw_point","draw_polygon","draw_line_string","ModeInterface","onKeyDown","onTouchMove","onCombineFeature","onUncombineFeature","drawConfig","_ctx","isSelected","select","deselect","clearSelected","newSet","eventOpts","setActiveButton","bufferType","isInstanceOf","doRender","modeObject","modeObjectKeys","startOpts","wrapper","eh","onCombineFeatures","onUncombineFeatures","SimpleSelect","boxSelectStartLocation","boxSelectElement","boxSelecting","canBoxSelect","dragMoveing","initiallySelectedFeatureIds","_this2","selectedFeatures","multiFeatures","featureType","getUniqueIds","allFeatures","memo","stopExtendedInteractions","parentNode","removeChild","clickOnFeature","_this3","wasSelected","startOnActiveFeature","_this4","isShiftClick","selectedFeatureIds","isFeatureSelected","boxSelect","startBoxSelect","getContainer","dragMove","whileBoxSelect","document","createElement","appendChild","current","minX","maxX","minY","maxY","translateValue","WebkitTransform","width","height","_this5","featuresInBox","idsToSelect","featuresCombined","includes","subcoords","multiFeature","createdFeatures","deletedFeatures","_this6","featuresUncombined","_loop","xtend","defaultOptions","displayControlsDefault","showControls","combine_features","uncombine_features","hideControls","addSources","sourceBucket","withDefaults","mapExists","getSource","cleanup","newHotIds","newColdIds","isDirty","getChangedIds","hot","lastColdCount","cold","coldChanged","renderFeature","featureInternal","setData","_emitSelectionChange","points","_deletedFeaturesToEmit","geojsonToEmit","clearChangedIds","Store","controlContainer","mapLoadedInterval","connect","clearInterval","removeLayers","removeButtons","addButtons","boxZoom","loaded","setInterval","addSource","addLayer","removeLayer","removeSource","_features","_featureIds","_selectedFeatureIds","_selectedCoordinates","_changedFeatureIds","holdRender","numRenders","refreshSelectedCoordinates","_this7","_this8","_this9","newSelectedCoordinates","classTypes","buttonElements","activeButton","currentMapClasses","nextMapClasses","classesToRemove","classesToAdd","createControlButton","className","setAttribute","title","clickedButton","deactivateButtons","onActivate","controlGroup","buttonId","normalizeArray","allowAboveRoot","last","unshift","splitPathRe","splitPath","filename","resolvedPath","resolvedAbsolute","cwd","charAt","isAbsolute","trailingSlash","relative","to","trim","fromParts","toParts","samePartsLength","outputParts","sep","delimiter","dirname","dir","basename","extname","cachedSetTimeout","cachedClearTimeout","defaultSetTimout","defaultClearTimeout","clearTimeout","runTimeout","fun","runClearTimeout","marker","queue","draining","currentQueue","queueIndex","cleanUpNextTick","drainQueue","timeout","run","nextTick","Item","browser","env","version","versions","noop","addListener","once","removeListener","removeAllListeners","emit","prependListener","prependOnceListener","listeners","chdir","umask"],"mappings":"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","file":"mapbox-gl-draw.js","sourcesContent":["(function(f){if(typeof exports===\"object\"&&typeof module!==\"undefined\"){module.exports=f()}else if(typeof define===\"function\"&&define.amd){define([],f)}else{var g;if(typeof window!==\"undefined\"){g=window}else if(typeof global!==\"undefined\"){g=global}else if(typeof self!==\"undefined\"){g=self}else{g=this}g.MapboxDraw = f()}})(function(){var define,module,exports;return (function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){\n'use strict';\n\nvar runSetup = require('./src/setup');\nvar setupOptions = require('./src/options');\nvar setupAPI = require('./src/api');\nvar Constants = require('./src/constants');\n\nvar setupDraw = function setupDraw(options, api) {\n  options = setupOptions(options);\n\n  var ctx = {\n    options: options\n  };\n\n  api = setupAPI(ctx, api);\n  ctx.api = api;\n\n  var setup = runSetup(ctx);\n\n  api.onAdd = setup.onAdd;\n  api.onRemove = setup.onRemove;\n  api.types = Constants.types;\n  api.options = options;\n\n  return api;\n};\n\nmodule.exports = function (options) {\n  setupDraw(options, this);\n};\n\nmodule.exports.modes = require('./src/modes');\n\n},{\"./src/api\":20,\"./src/constants\":21,\"./src/modes\":54,\"./src/options\":59,\"./src/setup\":61}],2:[function(require,module,exports){\nvar wgs84 = require('wgs84');\n\nmodule.exports.geometry = geometry;\nmodule.exports.ring = ringArea;\n\nfunction geometry(_) {\n    var area = 0, i;\n    switch (_.type) {\n        case 'Polygon':\n            return polygonArea(_.coordinates);\n        case 'MultiPolygon':\n            for (i = 0; i < _.coordinates.length; i++) {\n                area += polygonArea(_.coordinates[i]);\n            }\n            return area;\n        case 'Point':\n        case 'MultiPoint':\n        case 'LineString':\n        case 'MultiLineString':\n            return 0;\n        case 'GeometryCollection':\n            for (i = 0; i < _.geometries.length; i++) {\n                area += geometry(_.geometries[i]);\n            }\n            return area;\n    }\n}\n\nfunction polygonArea(coords) {\n    var area = 0;\n    if (coords && coords.length > 0) {\n        area += Math.abs(ringArea(coords[0]));\n        for (var i = 1; i < coords.length; i++) {\n            area -= Math.abs(ringArea(coords[i]));\n        }\n    }\n    return area;\n}\n\n/**\n * Calculate the approximate area of the polygon were it projected onto\n *     the earth.  Note that this area will be positive if ring is oriented\n *     clockwise, otherwise it will be negative.\n *\n * Reference:\n * Robert. G. Chamberlain and William H. Duquette, \"Some Algorithms for\n *     Polygons on a Sphere\", JPL Publication 07-03, Jet Propulsion\n *     Laboratory, Pasadena, CA, June 2007 http://trs-new.jpl.nasa.gov/dspace/handle/2014/40409\n *\n * Returns:\n * {float} The approximate signed geodesic area of the polygon in square\n *     meters.\n */\n\nfunction ringArea(coords) {\n    var p1, p2, p3, lowerIndex, middleIndex, upperIndex, i,\n    area = 0,\n    coordsLength = coords.length;\n\n    if (coordsLength > 2) {\n        for (i = 0; i < coordsLength; i++) {\n            if (i === coordsLength - 2) {// i = N-2\n                lowerIndex = coordsLength - 2;\n                middleIndex = coordsLength -1;\n                upperIndex = 0;\n            } else if (i === coordsLength - 1) {// i = N-1\n                lowerIndex = coordsLength - 1;\n                middleIndex = 0;\n                upperIndex = 1;\n            } else { // i = 0 to N-3\n                lowerIndex = i;\n                middleIndex = i+1;\n                upperIndex = i+2;\n            }\n            p1 = coords[lowerIndex];\n            p2 = coords[middleIndex];\n            p3 = coords[upperIndex];\n            area += ( rad(p3[0]) - rad(p1[0]) ) * Math.sin( rad(p2[1]));\n        }\n\n        area = area * wgs84.RADIUS * wgs84.RADIUS / 2;\n    }\n\n    return area;\n}\n\nfunction rad(_) {\n    return _ * Math.PI / 180;\n}\n},{\"wgs84\":18}],3:[function(require,module,exports){\nmodule.exports = normalize;\n\nvar types = {\n    Point: 'geometry',\n    MultiPoint: 'geometry',\n    LineString: 'geometry',\n    MultiLineString: 'geometry',\n    Polygon: 'geometry',\n    MultiPolygon: 'geometry',\n    GeometryCollection: 'geometry',\n    Feature: 'feature',\n    FeatureCollection: 'featurecollection'\n};\n\n/**\n * Normalize a GeoJSON feature into a FeatureCollection.\n *\n * @param {object} gj geojson data\n * @returns {object} normalized geojson data\n */\nfunction normalize(gj) {\n    if (!gj || !gj.type) return null;\n    var type = types[gj.type];\n    if (!type) return null;\n\n    if (type === 'geometry') {\n        return {\n            type: 'FeatureCollection',\n            features: [{\n                type: 'Feature',\n                properties: {},\n                geometry: gj\n            }]\n        };\n    } else if (type === 'feature') {\n        return {\n            type: 'FeatureCollection',\n            features: [gj]\n        };\n    } else if (type === 'featurecollection') {\n        return gj;\n    }\n}\n\n},{}],4:[function(require,module,exports){\nvar jsonlint = require('jsonlint-lines'),\n  geojsonHintObject = require('./object');\n\n/**\n * @alias geojsonhint\n * @param {(string|object)} GeoJSON given as a string or as an object\n * @param {Object} options\n * @param {boolean} [options.noDuplicateMembers=true] forbid repeated\n * properties. This is only available for string input, becaused parsed\n * Objects cannot have duplicate properties.\n * @param {boolean} [options.precisionWarning=true] warn if GeoJSON contains\n * unnecessary coordinate precision.\n * @returns {Array<Object>} an array of errors\n */\nfunction hint(str, options) {\n\n    var gj, errors = [];\n\n    if (typeof str === 'object') {\n        gj = str;\n    } else if (typeof str === 'string') {\n        try {\n            gj = jsonlint.parse(str);\n        } catch(e) {\n            var match = e.message.match(/line (\\d+)/);\n            var lineNumber = parseInt(match[1], 10);\n            return [{\n                line: lineNumber - 1,\n                message: e.message,\n                error: e\n            }];\n        }\n    } else {\n        return [{\n            message: 'Expected string or object as input',\n            line: 0\n        }];\n    }\n\n    errors = errors.concat(geojsonHintObject.hint(gj, options));\n\n    return errors;\n}\n\nmodule.exports.hint = hint;\n\n},{\"./object\":5,\"jsonlint-lines\":14}],5:[function(require,module,exports){\nvar rightHandRule = require('./rhr');\n\n/**\n * @alias geojsonhint\n * @param {(string|object)} GeoJSON given as a string or as an object\n * @param {Object} options\n * @param {boolean} [options.noDuplicateMembers=true] forbid repeated\n * properties. This is only available for string input, becaused parsed\n * Objects cannot have duplicate properties.\n * @param {boolean} [options.precisionWarning=true] warn if GeoJSON contains\n * unnecessary coordinate precision.\n * @returns {Array<Object>} an array of errors\n */\nfunction hint(gj, options) {\n\n    var errors = [];\n    var precisionWarningCount = 0;\n    var maxPrecisionWarnings = 10;\n    var maxPrecision = 6;\n\n    function root(_) {\n\n        if ((!options || options.noDuplicateMembers !== false) &&\n           _.__duplicateProperties__) {\n            errors.push({\n                message: 'An object contained duplicate members, making parsing ambigous: ' + _.__duplicateProperties__.join(', '),\n                line: _.__line__\n            });\n        }\n\n        if (requiredProperty(_, 'type', 'string')) {\n            return;\n        }\n\n        if (!types[_.type]) {\n            var expectedType = typesLower[_.type.toLowerCase()];\n            if (expectedType !== undefined) {\n                errors.push({\n                    message: 'Expected ' + expectedType + ' but got ' + _.type + ' (case sensitive)',\n                    line: _.__line__\n                });\n            } else {\n                errors.push({\n                    message: 'The type ' + _.type + ' is unknown',\n                    line: _.__line__\n                });\n            }\n        } else if (_) {\n            types[_.type](_);\n        }\n    }\n\n    function everyIs(_, type) {\n        // make a single exception because typeof null === 'object'\n        return _.every(function(x) {\n            return x !== null && typeof x === type;\n        });\n    }\n\n    function requiredProperty(_, name, type) {\n        if (typeof _[name] === 'undefined') {\n            return errors.push({\n                message: '\"' + name + '\" member required',\n                line: _.__line__\n            });\n        } else if (type === 'array') {\n            if (!Array.isArray(_[name])) {\n                return errors.push({\n                    message: '\"' + name +\n                        '\" member should be an array, but is an ' +\n                        (typeof _[name]) + ' instead',\n                    line: _.__line__\n                });\n            }\n        } else if (type === 'object' && _[name] && _[name].constructor.name !== 'Object') {\n            return errors.push({\n                message: '\"' + name +\n                    '\" member should be ' + (type) +\n                    ', but is an ' + (_[name].constructor.name) + ' instead',\n                line: _.__line__\n            });\n        } else if (type && typeof _[name] !== type) {\n            return errors.push({\n                message: '\"' + name +\n                    '\" member should be ' + (type) +\n                    ', but is an ' + (typeof _[name]) + ' instead',\n                line: _.__line__\n            });\n        }\n    }\n\n    // https://tools.ietf.org/html/rfc7946#section-3.3\n    function FeatureCollection(featureCollection) {\n        crs(featureCollection);\n        bbox(featureCollection);\n        if (featureCollection.properties !== undefined) {\n            errors.push({\n                message: 'FeatureCollection object cannot contain a \"properties\" member',\n                line: featureCollection.__line__\n            });\n        }\n        if (featureCollection.coordinates !== undefined) {\n            errors.push({\n                message: 'FeatureCollection object cannot contain a \"coordinates\" member',\n                line: featureCollection.__line__\n            });\n        }\n        if (!requiredProperty(featureCollection, 'features', 'array')) {\n            if (!everyIs(featureCollection.features, 'object')) {\n                return errors.push({\n                    message: 'Every feature must be an object',\n                    line: featureCollection.__line__\n                });\n            }\n            featureCollection.features.forEach(Feature);\n        }\n    }\n\n    // https://tools.ietf.org/html/rfc7946#section-3.1.1\n    function position(_, line) {\n        if (!Array.isArray(_)) {\n            return errors.push({\n                message: 'position should be an array, is a ' + (typeof _) +\n                    ' instead',\n                line: _.__line__ || line\n            });\n        }\n        if (_.length < 2) {\n            return errors.push({\n                message: 'position must have 2 or more elements',\n                line: _.__line__ || line\n            });\n        }\n        if (_.length > 3) {\n            return errors.push({\n                message: 'position should not have more than 3 elements',\n                level: 'message',\n                line: _.__line__ || line\n            });\n        }\n        if (!everyIs(_, 'number')) {\n            return errors.push({\n                message: 'each element in a position must be a number',\n                line: _.__line__ || line\n            });\n        }\n\n        if (options && options.precisionWarning) {\n            if (precisionWarningCount === maxPrecisionWarnings) {\n                precisionWarningCount += 1;\n                return errors.push({\n                    message: 'truncated warnings: we\\'ve encountered coordinate precision warning ' + maxPrecisionWarnings + ' times, no more warnings will be reported',\n                    level: 'message',\n                    line: _.__line__ || line\n                });\n            } else if (precisionWarningCount < maxPrecisionWarnings) {\n                _.forEach(function(num) {\n                    var precision = 0;\n                    var decimalStr = String(num).split('.')[1];\n                    if (decimalStr !== undefined)\n                        precision = decimalStr.length;\n                    if (precision > maxPrecision) {\n                        precisionWarningCount += 1;\n                        return errors.push({\n                            message: 'precision of coordinates should be reduced',\n                            level: 'message',\n                            line: _.__line__ || line\n                        });\n                    }\n                });\n            }\n        }\n    }\n\n    function positionArray(coords, type, depth, line) {\n        if (line === undefined && coords.__line__ !== undefined) {\n            line = coords.__line__;\n        }\n        if (depth === 0) {\n            return position(coords, line);\n        }\n        if (depth === 1 && type) {\n            if (type === 'LinearRing') {\n                if (!Array.isArray(coords[coords.length - 1])) {\n                    errors.push({\n                        message: 'a number was found where a coordinate array should have been found: this needs to be nested more deeply',\n                        line: line\n                    });\n                    return true;\n                }\n                if (coords.length < 4) {\n                    errors.push({\n                        message: 'a LinearRing of coordinates needs to have four or more positions',\n                        line: line\n                    });\n                }\n                if (coords.length &&\n                    (coords[coords.length - 1].length !== coords[0].length ||\n                    !coords[coords.length - 1].every(function(pos, index) {\n                        return coords[0][index] === pos;\n                }))) {\n                    errors.push({\n                        message: 'the first and last positions in a LinearRing of coordinates must be the same',\n                        line: line\n                    });\n                    return true;\n                }\n            } else if (type === 'Line' && coords.length < 2) {\n                return errors.push({\n                    message: 'a line needs to have two or more coordinates to be valid',\n                    line: line\n                });\n            }\n        }\n        if (!Array.isArray(coords)) {\n            errors.push({\n                message: 'a number was found where a coordinate array should have been found: this needs to be nested more deeply',\n                line: line\n            });\n        } else {\n            var results = coords.map(function(c) {\n                return positionArray(c, type, depth - 1, c.__line__ || line);\n            });\n            return results.some(function(r) {\n                return r;\n            });\n        }\n    }\n\n    function crs(_) {\n        if (!_.crs) return;\n        var defaultCRSName = 'urn:ogc:def:crs:OGC:1.3:CRS84';\n        if (typeof _.crs === 'object' && _.crs.properties && _.crs.properties.name === defaultCRSName) {\n            errors.push({\n                message: 'old-style crs member is not recommended, this object is equivalent to the default and should be removed',\n                line: _.__line__\n            });\n        } else {\n            errors.push({\n                message: 'old-style crs member is not recommended',\n                line: _.__line__\n            });\n        }\n    }\n\n    function bbox(_) {\n        if (!_.bbox) {\n            return;\n        }\n        if (Array.isArray(_.bbox)) {\n            if (!everyIs(_.bbox, 'number')) {\n                errors.push({\n                    message: 'each element in a bbox member must be a number',\n                    line: _.bbox.__line__\n                });\n            }\n            if (!(_.bbox.length === 4 || _.bbox.length === 6)) {\n                errors.push({\n                    message: 'bbox must contain 4 elements (for 2D) or 6 elements (for 3D)',\n                    line: _.bbox.__line__\n                });\n            }\n            return errors.length;\n        }\n        errors.push({\n            message: 'bbox member must be an array of numbers, but is a ' + (typeof _.bbox),\n            line: _.__line__\n        });\n    }\n\n    function geometrySemantics(geom) {\n        if (geom.properties !== undefined) {\n            errors.push({\n                message: 'geometry object cannot contain a \"properties\" member',\n                line: geom.__line__\n            });\n        }\n        if (geom.geometry !== undefined) {\n            errors.push({\n                message: 'geometry object cannot contain a \"geometry\" member',\n                line: geom.__line__\n            });\n        }\n        if (geom.features !== undefined) {\n            errors.push({\n                message: 'geometry object cannot contain a \"features\" member',\n                line: geom.__line__\n            });\n        }\n    }\n\n    // https://tools.ietf.org/html/rfc7946#section-3.1.2\n    function Point(point) {\n        crs(point);\n        bbox(point);\n        geometrySemantics(point);\n        if (!requiredProperty(point, 'coordinates', 'array')) {\n            position(point.coordinates);\n        }\n    }\n\n    // https://tools.ietf.org/html/rfc7946#section-3.1.6\n    function Polygon(polygon) {\n        crs(polygon);\n        bbox(polygon);\n        if (!requiredProperty(polygon, 'coordinates', 'array')) {\n            if (!positionArray(polygon.coordinates, 'LinearRing', 2)) {\n                rightHandRule(polygon, errors);\n            }\n        }\n    }\n\n    // https://tools.ietf.org/html/rfc7946#section-3.1.7\n    function MultiPolygon(multiPolygon) {\n        crs(multiPolygon);\n        bbox(multiPolygon);\n        if (!requiredProperty(multiPolygon, 'coordinates', 'array')) {\n            if (!positionArray(multiPolygon.coordinates, 'LinearRing', 3)) {\n                rightHandRule(multiPolygon, errors);\n            }\n        }\n    }\n\n    // https://tools.ietf.org/html/rfc7946#section-3.1.4\n    function LineString(lineString) {\n        crs(lineString);\n        bbox(lineString);\n        if (!requiredProperty(lineString, 'coordinates', 'array')) {\n            positionArray(lineString.coordinates, 'Line', 1);\n        }\n    }\n\n    // https://tools.ietf.org/html/rfc7946#section-3.1.5\n    function MultiLineString(multiLineString) {\n        crs(multiLineString);\n        bbox(multiLineString);\n        if (!requiredProperty(multiLineString, 'coordinates', 'array')) {\n            positionArray(multiLineString.coordinates, 'Line', 2);\n        }\n    }\n\n    // https://tools.ietf.org/html/rfc7946#section-3.1.3\n    function MultiPoint(multiPoint) {\n        crs(multiPoint);\n        bbox(multiPoint);\n        if (!requiredProperty(multiPoint, 'coordinates', 'array')) {\n            positionArray(multiPoint.coordinates, '', 1);\n        }\n    }\n\n    // https://tools.ietf.org/html/rfc7946#section-3.1.8\n    function GeometryCollection(geometryCollection) {\n        crs(geometryCollection);\n        bbox(geometryCollection);\n        if (!requiredProperty(geometryCollection, 'geometries', 'array')) {\n            if (!everyIs(geometryCollection.geometries, 'object')) {\n                errors.push({\n                    message: 'The geometries array in a GeometryCollection must contain only geometry objects',\n                    line: geometryCollection.__line__\n                });\n            }\n            if (geometryCollection.geometries.length === 1) {\n                errors.push({\n                    message: 'GeometryCollection with a single geometry should be avoided in favor of single part or a single object of multi-part type',\n                    line: geometryCollection.geometries.__line__\n                });\n            }\n            geometryCollection.geometries.forEach(function(geometry) {\n                if (geometry) {\n                    if (geometry.type === 'GeometryCollection') {\n                        errors.push({\n                            message: 'GeometryCollection should avoid nested geometry collections',\n                            line: geometryCollection.geometries.__line__\n                        });\n                    }\n                    root(geometry);\n                }\n            });\n        }\n    }\n\n    // https://tools.ietf.org/html/rfc7946#section-3.2\n    function Feature(feature) {\n        crs(feature);\n        bbox(feature);\n        // https://github.com/geojson/draft-geojson/blob/master/middle.mkd#feature-object\n        if (feature.id !== undefined &&\n            typeof feature.id !== 'string' &&\n            typeof feature.id !== 'number') {\n            errors.push({\n                message: 'Feature \"id\" member must have a string or number value',\n                line: feature.__line__\n            });\n        }\n        if (feature.features !== undefined) {\n            errors.push({\n                message: 'Feature object cannot contain a \"features\" member',\n                line: feature.__line__\n            });\n        }\n        if (feature.coordinates !== undefined) {\n            errors.push({\n                message: 'Feature object cannot contain a \"coordinates\" member',\n                line: feature.__line__\n            });\n        }\n        if (feature.type !== 'Feature') {\n            errors.push({\n                message: 'GeoJSON features must have a type=feature member',\n                line: feature.__line__\n            });\n        }\n        requiredProperty(feature, 'properties', 'object');\n        if (!requiredProperty(feature, 'geometry', 'object')) {\n            // https://tools.ietf.org/html/rfc7946#section-3.2\n            // tolerate null geometry\n            if (feature.geometry) root(feature.geometry);\n        }\n    }\n\n    var types = {\n        Point: Point,\n        Feature: Feature,\n        MultiPoint: MultiPoint,\n        LineString: LineString,\n        MultiLineString: MultiLineString,\n        FeatureCollection: FeatureCollection,\n        GeometryCollection: GeometryCollection,\n        Polygon: Polygon,\n        MultiPolygon: MultiPolygon\n    };\n\n    var typesLower = Object.keys(types).reduce(function(prev, curr) {\n        prev[curr.toLowerCase()] = curr;\n        return prev;\n    }, {});\n\n    if (typeof gj !== 'object' ||\n        gj === null ||\n        gj === undefined) {\n        errors.push({\n            message: 'The root of a GeoJSON object must be an object.',\n            line: 0\n        });\n        return errors;\n    }\n\n    root(gj);\n\n    errors.forEach(function(err) {\n        if ({}.hasOwnProperty.call(err, 'line') && err.line === undefined) {\n            delete err.line;\n        }\n    });\n\n    return errors;\n}\n\nmodule.exports.hint = hint;\n\n},{\"./rhr\":6}],6:[function(require,module,exports){\nfunction rad(x) {\n    return x * Math.PI / 180;\n}\n\nfunction isRingClockwise (coords) {\n    var area = 0;\n    if (coords.length > 2) {\n        var p1, p2;\n        for (var i = 0; i < coords.length - 1; i++) {\n            p1 = coords[i];\n            p2 = coords[i + 1];\n            area += rad(p2[0] - p1[0]) * (2 + Math.sin(rad(p1[1])) + Math.sin(rad(p2[1])));\n        }\n    }\n\n    return area >= 0;\n}\n\nfunction isPolyRHR (coords) {\n    if (coords && coords.length > 0) {\n        if (isRingClockwise(coords[0]))\n            return false;\n        var interiorCoords = coords.slice(1, coords.length);\n        if (!interiorCoords.every(isRingClockwise))\n            return false;\n    }\n    return true;\n}\n\nfunction rightHandRule (geometry) {\n    if (geometry.type === 'Polygon') {\n        return isPolyRHR(geometry.coordinates);\n    } else if (geometry.type === 'MultiPolygon') {\n        return geometry.coordinates.every(isPolyRHR);\n    }\n}\n\nmodule.exports = function validateRightHandRule(geometry, errors) {\n    if (!rightHandRule(geometry)) {\n        errors.push({\n            message: 'Polygons and MultiPolygons should follow the right-hand rule',\n            level: 'message',\n            line: geometry.__line__\n        });\n    }\n};\n\n},{}],7:[function(require,module,exports){\nmodule.exports = Extent;\n\nfunction Extent() {\n    if (!(this instanceof Extent)) {\n        return new Extent();\n    }\n    this._bbox = [Infinity, Infinity, -Infinity, -Infinity];\n    this._valid = false;\n}\n\nExtent.prototype.include = function(ll) {\n    this._valid = true;\n    this._bbox[0] = Math.min(this._bbox[0], ll[0]);\n    this._bbox[1] = Math.min(this._bbox[1], ll[1]);\n    this._bbox[2] = Math.max(this._bbox[2], ll[0]);\n    this._bbox[3] = Math.max(this._bbox[3], ll[1]);\n    return this;\n};\n\nExtent.prototype.union = function(other) {\n    this._valid = true;\n    this._bbox[0] = Math.min(this._bbox[0], other[0]);\n    this._bbox[1] = Math.min(this._bbox[1], other[1]);\n    this._bbox[2] = Math.max(this._bbox[2], other[2]);\n    this._bbox[3] = Math.max(this._bbox[3], other[3]);\n    return this;\n};\n\nExtent.prototype.bbox = function() {\n    if (!this._valid) return null;\n    return this._bbox;\n};\n\nExtent.prototype.contains = function(ll) {\n    if (!this._valid) return null;\n    return this._bbox[0] <= ll[0] &&\n        this._bbox[1] <= ll[1] &&\n        this._bbox[2] >= ll[0] &&\n        this._bbox[3] >= ll[1];\n};\n\nExtent.prototype.polygon = function() {\n    if (!this._valid) return null;\n    return {\n        type: 'Polygon',\n        coordinates: [\n            [\n                // W, S\n                [this._bbox[0], this._bbox[1]],\n                // E, S\n                [this._bbox[2], this._bbox[1]],\n                // E, N\n                [this._bbox[2], this._bbox[3]],\n                // W, N\n                [this._bbox[0], this._bbox[3]],\n                // W, S\n                [this._bbox[0], this._bbox[1]]\n            ]\n        ]\n    };\n};\n\n},{}],8:[function(require,module,exports){\nmodule.exports = function flatten(list, depth) {\n    return _flatten(list);\n\n    function _flatten(list) {\n        if (Array.isArray(list) && list.length &&\n            typeof list[0] === 'number') {\n            return [list];\n        }\n        return list.reduce(function (acc, item) {\n            if (Array.isArray(item) && Array.isArray(item[0])) {\n                return acc.concat(_flatten(item));\n            } else {\n                acc.push(item);\n                return acc;\n            }\n        }, []);\n    }\n};\n\n},{}],9:[function(require,module,exports){\nvar geojsonNormalize = require('geojson-normalize'),\n    geojsonFlatten = require('geojson-flatten'),\n    flatten = require('./flatten');\n\nmodule.exports = function(_) {\n    if (!_) return [];\n    var normalized = geojsonFlatten(geojsonNormalize(_)),\n        coordinates = [];\n    normalized.features.forEach(function(feature) {\n        if (!feature.geometry) return;\n        coordinates = coordinates.concat(flatten(feature.geometry.coordinates));\n    });\n    return coordinates;\n};\n\n},{\"./flatten\":8,\"geojson-flatten\":11,\"geojson-normalize\":12}],10:[function(require,module,exports){\nvar geojsonCoords = require('geojson-coords'),\n    traverse = require('traverse'),\n    extent = require('extent');\n\nmodule.exports = function(_) {\n    return getExtent(_).bbox();\n};\n\nmodule.exports.polygon = function(_) {\n    return getExtent(_).polygon();\n};\n\nmodule.exports.bboxify = function(_) {\n    return traverse(_).map(function(value) {\n        if (value && typeof value.type === 'string') {\n            value.bbox = getExtent(value).bbox();\n            this.update(value);\n        }\n    });\n};\n\nfunction getExtent(_) {\n    var bbox = [Infinity, Infinity, -Infinity, -Infinity],\n        ext = extent(),\n        coords = geojsonCoords(_);\n    for (var i = 0; i < coords.length; i++) ext.include(coords[i]);\n    return ext;\n}\n\n},{\"extent\":7,\"geojson-coords\":9,\"traverse\":17}],11:[function(require,module,exports){\nmodule.exports = flatten;\n\nfunction flatten(gj, up) {\n    switch ((gj && gj.type) || null) {\n        case 'FeatureCollection':\n            gj.features = gj.features.reduce(function(mem, feature) {\n                return mem.concat(flatten(feature));\n            }, []);\n            return gj;\n        case 'Feature':\n            return flatten(gj.geometry).map(function(geom) {\n                return {\n                    type: 'Feature',\n                    properties: JSON.parse(JSON.stringify(gj.properties)),\n                    geometry: geom\n                };\n            });\n        case 'MultiPoint':\n            return gj.coordinates.map(function(_) {\n                return { type: 'Point', coordinates: _ };\n            });\n        case 'MultiPolygon':\n            return gj.coordinates.map(function(_) {\n                return { type: 'Polygon', coordinates: _ };\n            });\n        case 'MultiLineString':\n            return gj.coordinates.map(function(_) {\n                return { type: 'LineString', coordinates: _ };\n            });\n        case 'GeometryCollection':\n            return gj.geometries;\n        case 'Point':\n        case 'Polygon':\n        case 'LineString':\n            return [gj];\n        default:\n            return gj;\n    }\n}\n\n},{}],12:[function(require,module,exports){\narguments[4][3][0].apply(exports,arguments)\n},{\"dup\":3}],13:[function(require,module,exports){\nvar hat = module.exports = function (bits, base) {\n    if (!base) base = 16;\n    if (bits === undefined) bits = 128;\n    if (bits <= 0) return '0';\n    \n    var digits = Math.log(Math.pow(2, bits)) / Math.log(base);\n    for (var i = 2; digits === Infinity; i *= 2) {\n        digits = Math.log(Math.pow(2, bits / i)) / Math.log(base) * i;\n    }\n    \n    var rem = digits - Math.floor(digits);\n    \n    var res = '';\n    \n    for (var i = 0; i < Math.floor(digits); i++) {\n        var x = Math.floor(Math.random() * base).toString(base);\n        res = x + res;\n    }\n    \n    if (rem) {\n        var b = Math.pow(base, rem);\n        var x = Math.floor(Math.random() * b).toString(base);\n        res = x + res;\n    }\n    \n    var parsed = parseInt(res, base);\n    if (parsed !== Infinity && parsed >= Math.pow(2, bits)) {\n        return hat(bits, base)\n    }\n    else return res;\n};\n\nhat.rack = function (bits, base, expandBy) {\n    var fn = function (data) {\n        var iters = 0;\n        do {\n            if (iters ++ > 10) {\n                if (expandBy) bits += expandBy;\n                else throw new Error('too many ID collisions, use more bits')\n            }\n            \n            var id = hat(bits, base);\n        } while (Object.hasOwnProperty.call(hats, id));\n        \n        hats[id] = data;\n        return id;\n    };\n    var hats = fn.hats = {};\n    \n    fn.get = function (id) {\n        return fn.hats[id];\n    };\n    \n    fn.set = function (id, value) {\n        fn.hats[id] = value;\n        return fn;\n    };\n    \n    fn.bits = bits || 128;\n    fn.base = base || 16;\n    return fn;\n};\n\n},{}],14:[function(require,module,exports){\n(function (process){\n/* parser generated by jison 0.4.17 */\n/*\n  Returns a Parser object of the following structure:\n\n  Parser: {\n    yy: {}\n  }\n\n  Parser.prototype: {\n    yy: {},\n    trace: function(),\n    symbols_: {associative list: name ==> number},\n    terminals_: {associative list: number ==> name},\n    productions_: [...],\n    performAction: function anonymous(yytext, yyleng, yylineno, yy, yystate, $$, _$),\n    table: [...],\n    defaultActions: {...},\n    parseError: function(str, hash),\n    parse: function(input),\n\n    lexer: {\n        EOF: 1,\n        parseError: function(str, hash),\n        setInput: function(input),\n        input: function(),\n        unput: function(str),\n        more: function(),\n        less: function(n),\n        pastInput: function(),\n        upcomingInput: function(),\n        showPosition: function(),\n        test_match: function(regex_match_array, rule_index),\n        next: function(),\n        lex: function(),\n        begin: function(condition),\n        popState: function(),\n        _currentRules: function(),\n        topState: function(),\n        pushState: function(condition),\n\n        options: {\n            ranges: boolean           (optional: true ==> token location info will include a .range[] member)\n            flex: boolean             (optional: true ==> flex-like lexing behaviour where the rules are tested exhaustively to find the longest match)\n            backtrack_lexer: boolean  (optional: true ==> lexer regexes are tested in order and for each matching regex the action code is invoked; the lexer terminates the scan when a token is returned by the action code)\n        },\n\n        performAction: function(yy, yy_, $avoiding_name_collisions, YY_START),\n        rules: [...],\n        conditions: {associative list: name ==> set},\n    }\n  }\n\n\n  token location info (@$, _$, etc.): {\n    first_line: n,\n    last_line: n,\n    first_column: n,\n    last_column: n,\n    range: [start_number, end_number]       (where the numbers are indexes into the input string, regular zero-based)\n  }\n\n\n  the parseError function receives a 'hash' object with these members for lexer and parser errors: {\n    text:        (matched text)\n    token:       (the produced terminal token, if any)\n    line:        (yylineno)\n  }\n  while parser (grammar) errors will also provide these members, i.e. parser errors deliver a superset of attributes: {\n    loc:         (yylloc)\n    expected:    (string describing the set of expected tokens)\n    recoverable: (boolean: TRUE when the parser has a error recovery rule available for this particular error)\n  }\n*/\nvar jsonlint = (function(){\nvar o=function(k,v,o,l){for(o=o||{},l=k.length;l--;o[k[l]]=v);return o},$V0=[1,12],$V1=[1,13],$V2=[1,9],$V3=[1,10],$V4=[1,11],$V5=[1,14],$V6=[1,15],$V7=[14,18,22,24],$V8=[18,22],$V9=[22,24];\nvar parser = {trace: function trace() { },\nyy: {},\nsymbols_: {\"error\":2,\"JSONString\":3,\"STRING\":4,\"JSONNumber\":5,\"NUMBER\":6,\"JSONNullLiteral\":7,\"NULL\":8,\"JSONBooleanLiteral\":9,\"TRUE\":10,\"FALSE\":11,\"JSONText\":12,\"JSONValue\":13,\"EOF\":14,\"JSONObject\":15,\"JSONArray\":16,\"{\":17,\"}\":18,\"JSONMemberList\":19,\"JSONMember\":20,\":\":21,\",\":22,\"[\":23,\"]\":24,\"JSONElementList\":25,\"$accept\":0,\"$end\":1},\nterminals_: {2:\"error\",4:\"STRING\",6:\"NUMBER\",8:\"NULL\",10:\"TRUE\",11:\"FALSE\",14:\"EOF\",17:\"{\",18:\"}\",21:\":\",22:\",\",23:\"[\",24:\"]\"},\nproductions_: [0,[3,1],[5,1],[7,1],[9,1],[9,1],[12,2],[13,1],[13,1],[13,1],[13,1],[13,1],[13,1],[15,2],[15,3],[20,3],[19,1],[19,3],[16,2],[16,3],[25,1],[25,3]],\nperformAction: function anonymous(yytext, yyleng, yylineno, yy, yystate /* action[1] */, $$ /* vstack */, _$ /* lstack */) {\n/* this == yyval */\n\nvar $0 = $$.length - 1;\nswitch (yystate) {\ncase 1:\n // replace escaped characters with actual character\n          this.$ = yytext.replace(/\\\\(\\\\|\")/g, \"$\"+\"1\")\n                     .replace(/\\\\n/g,'\\n')\n                     .replace(/\\\\r/g,'\\r')\n                     .replace(/\\\\t/g,'\\t')\n                     .replace(/\\\\v/g,'\\v')\n                     .replace(/\\\\f/g,'\\f')\n                     .replace(/\\\\b/g,'\\b');\n        \nbreak;\ncase 2:\nthis.$ = Number(yytext);\nbreak;\ncase 3:\nthis.$ = null;\nbreak;\ncase 4:\nthis.$ = true;\nbreak;\ncase 5:\nthis.$ = false;\nbreak;\ncase 6:\nreturn this.$ = $$[$0-1];\nbreak;\ncase 13:\nthis.$ = {}; Object.defineProperty(this.$, '__line__', {\n            value: this._$.first_line,\n            enumerable: false\n        })\nbreak;\ncase 14: case 19:\nthis.$ = $$[$0-1]; Object.defineProperty(this.$, '__line__', {\n            value: this._$.first_line,\n            enumerable: false\n        })\nbreak;\ncase 15:\nthis.$ = [$$[$0-2], $$[$0]];\nbreak;\ncase 16:\nthis.$ = {}; this.$[$$[$0][0]] = $$[$0][1];\nbreak;\ncase 17:\n\n            this.$ = $$[$0-2];\n            if ($$[$0-2][$$[$0][0]] !== undefined) {\n                if (!this.$.__duplicateProperties__) {\n                    Object.defineProperty(this.$, '__duplicateProperties__', {\n                        value: [],\n                        enumerable: false\n                    });\n                }\n                this.$.__duplicateProperties__.push($$[$0][0]);\n            }\n            $$[$0-2][$$[$0][0]] = $$[$0][1];\n        \nbreak;\ncase 18:\nthis.$ = []; Object.defineProperty(this.$, '__line__', {\n            value: this._$.first_line,\n            enumerable: false\n        })\nbreak;\ncase 20:\nthis.$ = [$$[$0]];\nbreak;\ncase 21:\nthis.$ = $$[$0-2]; $$[$0-2].push($$[$0]);\nbreak;\n}\n},\ntable: [{3:5,4:$V0,5:6,6:$V1,7:3,8:$V2,9:4,10:$V3,11:$V4,12:1,13:2,15:7,16:8,17:$V5,23:$V6},{1:[3]},{14:[1,16]},o($V7,[2,7]),o($V7,[2,8]),o($V7,[2,9]),o($V7,[2,10]),o($V7,[2,11]),o($V7,[2,12]),o($V7,[2,3]),o($V7,[2,4]),o($V7,[2,5]),o([14,18,21,22,24],[2,1]),o($V7,[2,2]),{3:20,4:$V0,18:[1,17],19:18,20:19},{3:5,4:$V0,5:6,6:$V1,7:3,8:$V2,9:4,10:$V3,11:$V4,13:23,15:7,16:8,17:$V5,23:$V6,24:[1,21],25:22},{1:[2,6]},o($V7,[2,13]),{18:[1,24],22:[1,25]},o($V8,[2,16]),{21:[1,26]},o($V7,[2,18]),{22:[1,28],24:[1,27]},o($V9,[2,20]),o($V7,[2,14]),{3:20,4:$V0,20:29},{3:5,4:$V0,5:6,6:$V1,7:3,8:$V2,9:4,10:$V3,11:$V4,13:30,15:7,16:8,17:$V5,23:$V6},o($V7,[2,19]),{3:5,4:$V0,5:6,6:$V1,7:3,8:$V2,9:4,10:$V3,11:$V4,13:31,15:7,16:8,17:$V5,23:$V6},o($V8,[2,17]),o($V8,[2,15]),o($V9,[2,21])],\ndefaultActions: {16:[2,6]},\nparseError: function parseError(str, hash) {\n    if (hash.recoverable) {\n        this.trace(str);\n    } else {\n        function _parseError (msg, hash) {\n            this.message = msg;\n            this.hash = hash;\n        }\n        _parseError.prototype = Error;\n\n        throw new _parseError(str, hash);\n    }\n},\nparse: function parse(input) {\n    var self = this, stack = [0], tstack = [], vstack = [null], lstack = [], table = this.table, yytext = '', yylineno = 0, yyleng = 0, recovering = 0, TERROR = 2, EOF = 1;\n    var args = lstack.slice.call(arguments, 1);\n    var lexer = Object.create(this.lexer);\n    var sharedState = { yy: {} };\n    for (var k in this.yy) {\n        if (Object.prototype.hasOwnProperty.call(this.yy, k)) {\n            sharedState.yy[k] = this.yy[k];\n        }\n    }\n    lexer.setInput(input, sharedState.yy);\n    sharedState.yy.lexer = lexer;\n    sharedState.yy.parser = this;\n    if (typeof lexer.yylloc == 'undefined') {\n        lexer.yylloc = {};\n    }\n    var yyloc = lexer.yylloc;\n    lstack.push(yyloc);\n    var ranges = lexer.options && lexer.options.ranges;\n    if (typeof sharedState.yy.parseError === 'function') {\n        this.parseError = sharedState.yy.parseError;\n    } else {\n        this.parseError = Object.getPrototypeOf(this).parseError;\n    }\n    function popStack(n) {\n        stack.length = stack.length - 2 * n;\n        vstack.length = vstack.length - n;\n        lstack.length = lstack.length - n;\n    }\n    _token_stack:\n        var lex = function () {\n            var token;\n            token = lexer.lex() || EOF;\n            if (typeof token !== 'number') {\n                token = self.symbols_[token] || token;\n            }\n            return token;\n        };\n    var symbol, preErrorSymbol, state, action, a, r, yyval = {}, p, len, newState, expected;\n    while (true) {\n        state = stack[stack.length - 1];\n        if (this.defaultActions[state]) {\n            action = this.defaultActions[state];\n        } else {\n            if (symbol === null || typeof symbol == 'undefined') {\n                symbol = lex();\n            }\n            action = table[state] && table[state][symbol];\n        }\n                    if (typeof action === 'undefined' || !action.length || !action[0]) {\n                var errStr = '';\n                expected = [];\n                for (p in table[state]) {\n                    if (this.terminals_[p] && p > TERROR) {\n                        expected.push('\\'' + this.terminals_[p] + '\\'');\n                    }\n                }\n                if (lexer.showPosition) {\n                    errStr = 'Parse error on line ' + (yylineno + 1) + ':\\n' + lexer.showPosition() + '\\nExpecting ' + expected.join(', ') + ', got \\'' + (this.terminals_[symbol] || symbol) + '\\'';\n                } else {\n                    errStr = 'Parse error on line ' + (yylineno + 1) + ': Unexpected ' + (symbol == EOF ? 'end of input' : '\\'' + (this.terminals_[symbol] || symbol) + '\\'');\n                }\n                this.parseError(errStr, {\n                    text: lexer.match,\n                    token: this.terminals_[symbol] || symbol,\n                    line: lexer.yylineno,\n                    loc: yyloc,\n                    expected: expected\n                });\n            }\n        if (action[0] instanceof Array && action.length > 1) {\n            throw new Error('Parse Error: multiple actions possible at state: ' + state + ', token: ' + symbol);\n        }\n        switch (action[0]) {\n        case 1:\n            stack.push(symbol);\n            vstack.push(lexer.yytext);\n            lstack.push(lexer.yylloc);\n            stack.push(action[1]);\n            symbol = null;\n            if (!preErrorSymbol) {\n                yyleng = lexer.yyleng;\n                yytext = lexer.yytext;\n                yylineno = lexer.yylineno;\n                yyloc = lexer.yylloc;\n                if (recovering > 0) {\n                    recovering--;\n                }\n            } else {\n                symbol = preErrorSymbol;\n                preErrorSymbol = null;\n            }\n            break;\n        case 2:\n            len = this.productions_[action[1]][1];\n            yyval.$ = vstack[vstack.length - len];\n            yyval._$ = {\n                first_line: lstack[lstack.length - (len || 1)].first_line,\n                last_line: lstack[lstack.length - 1].last_line,\n                first_column: lstack[lstack.length - (len || 1)].first_column,\n                last_column: lstack[lstack.length - 1].last_column\n            };\n            if (ranges) {\n                yyval._$.range = [\n                    lstack[lstack.length - (len || 1)].range[0],\n                    lstack[lstack.length - 1].range[1]\n                ];\n            }\n            r = this.performAction.apply(yyval, [\n                yytext,\n                yyleng,\n                yylineno,\n                sharedState.yy,\n                action[1],\n                vstack,\n                lstack\n            ].concat(args));\n            if (typeof r !== 'undefined') {\n                return r;\n            }\n            if (len) {\n                stack = stack.slice(0, -1 * len * 2);\n                vstack = vstack.slice(0, -1 * len);\n                lstack = lstack.slice(0, -1 * len);\n            }\n            stack.push(this.productions_[action[1]][0]);\n            vstack.push(yyval.$);\n            lstack.push(yyval._$);\n            newState = table[stack[stack.length - 2]][stack[stack.length - 1]];\n            stack.push(newState);\n            break;\n        case 3:\n            return true;\n        }\n    }\n    return true;\n}};\n/* generated by jison-lex 0.3.4 */\nvar lexer = (function(){\nvar lexer = ({\n\nEOF:1,\n\nparseError:function parseError(str, hash) {\n        if (this.yy.parser) {\n            this.yy.parser.parseError(str, hash);\n        } else {\n            throw new Error(str);\n        }\n    },\n\n// resets the lexer, sets new input\nsetInput:function (input, yy) {\n        this.yy = yy || this.yy || {};\n        this._input = input;\n        this._more = this._backtrack = this.done = false;\n        this.yylineno = this.yyleng = 0;\n        this.yytext = this.matched = this.match = '';\n        this.conditionStack = ['INITIAL'];\n        this.yylloc = {\n            first_line: 1,\n            first_column: 0,\n            last_line: 1,\n            last_column: 0\n        };\n        if (this.options.ranges) {\n            this.yylloc.range = [0,0];\n        }\n        this.offset = 0;\n        return this;\n    },\n\n// consumes and returns one char from the input\ninput:function () {\n        var ch = this._input[0];\n        this.yytext += ch;\n        this.yyleng++;\n        this.offset++;\n        this.match += ch;\n        this.matched += ch;\n        var lines = ch.match(/(?:\\r\\n?|\\n).*/g);\n        if (lines) {\n            this.yylineno++;\n            this.yylloc.last_line++;\n        } else {\n            this.yylloc.last_column++;\n        }\n        if (this.options.ranges) {\n            this.yylloc.range[1]++;\n        }\n\n        this._input = this._input.slice(1);\n        return ch;\n    },\n\n// unshifts one char (or a string) into the input\nunput:function (ch) {\n        var len = ch.length;\n        var lines = ch.split(/(?:\\r\\n?|\\n)/g);\n\n        this._input = ch + this._input;\n        this.yytext = this.yytext.substr(0, this.yytext.length - len);\n        //this.yyleng -= len;\n        this.offset -= len;\n        var oldLines = this.match.split(/(?:\\r\\n?|\\n)/g);\n        this.match = this.match.substr(0, this.match.length - 1);\n        this.matched = this.matched.substr(0, this.matched.length - 1);\n\n        if (lines.length - 1) {\n            this.yylineno -= lines.length - 1;\n        }\n        var r = this.yylloc.range;\n\n        this.yylloc = {\n            first_line: this.yylloc.first_line,\n            last_line: this.yylineno + 1,\n            first_column: this.yylloc.first_column,\n            last_column: lines ?\n                (lines.length === oldLines.length ? this.yylloc.first_column : 0)\n                 + oldLines[oldLines.length - lines.length].length - lines[0].length :\n              this.yylloc.first_column - len\n        };\n\n        if (this.options.ranges) {\n            this.yylloc.range = [r[0], r[0] + this.yyleng - len];\n        }\n        this.yyleng = this.yytext.length;\n        return this;\n    },\n\n// When called from action, caches matched text and appends it on next action\nmore:function () {\n        this._more = true;\n        return this;\n    },\n\n// When called from action, signals the lexer that this rule fails to match the input, so the next matching rule (regex) should be tested instead.\nreject:function () {\n        if (this.options.backtrack_lexer) {\n            this._backtrack = true;\n        } else {\n            return this.parseError('Lexical error on line ' + (this.yylineno + 1) + '. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).\\n' + this.showPosition(), {\n                text: \"\",\n                token: null,\n                line: this.yylineno\n            });\n\n        }\n        return this;\n    },\n\n// retain first n characters of the match\nless:function (n) {\n        this.unput(this.match.slice(n));\n    },\n\n// displays already matched input, i.e. for error messages\npastInput:function () {\n        var past = this.matched.substr(0, this.matched.length - this.match.length);\n        return (past.length > 20 ? '...':'') + past.substr(-20).replace(/\\n/g, \"\");\n    },\n\n// displays upcoming input, i.e. for error messages\nupcomingInput:function () {\n        var next = this.match;\n        if (next.length < 20) {\n            next += this._input.substr(0, 20-next.length);\n        }\n        return (next.substr(0,20) + (next.length > 20 ? '...' : '')).replace(/\\n/g, \"\");\n    },\n\n// displays the character position where the lexing error occurred, i.e. for error messages\nshowPosition:function () {\n        var pre = this.pastInput();\n        var c = new Array(pre.length + 1).join(\"-\");\n        return pre + this.upcomingInput() + \"\\n\" + c + \"^\";\n    },\n\n// test the lexed token: return FALSE when not a match, otherwise return token\ntest_match:function (match, indexed_rule) {\n        var token,\n            lines,\n            backup;\n\n        if (this.options.backtrack_lexer) {\n            // save context\n            backup = {\n                yylineno: this.yylineno,\n                yylloc: {\n                    first_line: this.yylloc.first_line,\n                    last_line: this.last_line,\n                    first_column: this.yylloc.first_column,\n                    last_column: this.yylloc.last_column\n                },\n                yytext: this.yytext,\n                match: this.match,\n                matches: this.matches,\n                matched: this.matched,\n                yyleng: this.yyleng,\n                offset: this.offset,\n                _more: this._more,\n                _input: this._input,\n                yy: this.yy,\n                conditionStack: this.conditionStack.slice(0),\n                done: this.done\n            };\n            if (this.options.ranges) {\n                backup.yylloc.range = this.yylloc.range.slice(0);\n            }\n        }\n\n        lines = match[0].match(/(?:\\r\\n?|\\n).*/g);\n        if (lines) {\n            this.yylineno += lines.length;\n        }\n        this.yylloc = {\n            first_line: this.yylloc.last_line,\n            last_line: this.yylineno + 1,\n            first_column: this.yylloc.last_column,\n            last_column: lines ?\n                         lines[lines.length - 1].length - lines[lines.length - 1].match(/\\r?\\n?/)[0].length :\n                         this.yylloc.last_column + match[0].length\n        };\n        this.yytext += match[0];\n        this.match += match[0];\n        this.matches = match;\n        this.yyleng = this.yytext.length;\n        if (this.options.ranges) {\n            this.yylloc.range = [this.offset, this.offset += this.yyleng];\n        }\n        this._more = false;\n        this._backtrack = false;\n        this._input = this._input.slice(match[0].length);\n        this.matched += match[0];\n        token = this.performAction.call(this, this.yy, this, indexed_rule, this.conditionStack[this.conditionStack.length - 1]);\n        if (this.done && this._input) {\n            this.done = false;\n        }\n        if (token) {\n            return token;\n        } else if (this._backtrack) {\n            // recover context\n            for (var k in backup) {\n                this[k] = backup[k];\n            }\n            return false; // rule action called reject() implying the next rule should be tested instead.\n        }\n        return false;\n    },\n\n// return next match in input\nnext:function () {\n        if (this.done) {\n            return this.EOF;\n        }\n        if (!this._input) {\n            this.done = true;\n        }\n\n        var token,\n            match,\n            tempMatch,\n            index;\n        if (!this._more) {\n            this.yytext = '';\n            this.match = '';\n        }\n        var rules = this._currentRules();\n        for (var i = 0; i < rules.length; i++) {\n            tempMatch = this._input.match(this.rules[rules[i]]);\n            if (tempMatch && (!match || tempMatch[0].length > match[0].length)) {\n                match = tempMatch;\n                index = i;\n                if (this.options.backtrack_lexer) {\n                    token = this.test_match(tempMatch, rules[i]);\n                    if (token !== false) {\n                        return token;\n                    } else if (this._backtrack) {\n                        match = false;\n                        continue; // rule action called reject() implying a rule MISmatch.\n                    } else {\n                        // else: this is a lexer rule which consumes input without producing a token (e.g. whitespace)\n                        return false;\n                    }\n                } else if (!this.options.flex) {\n                    break;\n                }\n            }\n        }\n        if (match) {\n            token = this.test_match(match, rules[index]);\n            if (token !== false) {\n                return token;\n            }\n            // else: this is a lexer rule which consumes input without producing a token (e.g. whitespace)\n            return false;\n        }\n        if (this._input === \"\") {\n            return this.EOF;\n        } else {\n            return this.parseError('Lexical error on line ' + (this.yylineno + 1) + '. Unrecognized text.\\n' + this.showPosition(), {\n                text: \"\",\n                token: null,\n                line: this.yylineno\n            });\n        }\n    },\n\n// return next match that has a token\nlex:function lex() {\n        var r = this.next();\n        if (r) {\n            return r;\n        } else {\n            return this.lex();\n        }\n    },\n\n// activates a new lexer condition state (pushes the new lexer condition state onto the condition stack)\nbegin:function begin(condition) {\n        this.conditionStack.push(condition);\n    },\n\n// pop the previously active lexer condition state off the condition stack\npopState:function popState() {\n        var n = this.conditionStack.length - 1;\n        if (n > 0) {\n            return this.conditionStack.pop();\n        } else {\n            return this.conditionStack[0];\n        }\n    },\n\n// produce the lexer rule set which is active for the currently active lexer condition state\n_currentRules:function _currentRules() {\n        if (this.conditionStack.length && this.conditionStack[this.conditionStack.length - 1]) {\n            return this.conditions[this.conditionStack[this.conditionStack.length - 1]].rules;\n        } else {\n            return this.conditions[\"INITIAL\"].rules;\n        }\n    },\n\n// return the currently active lexer condition state; when an index argument is provided it produces the N-th previous condition state, if available\ntopState:function topState(n) {\n        n = this.conditionStack.length - 1 - Math.abs(n || 0);\n        if (n >= 0) {\n            return this.conditionStack[n];\n        } else {\n            return \"INITIAL\";\n        }\n    },\n\n// alias for begin(condition)\npushState:function pushState(condition) {\n        this.begin(condition);\n    },\n\n// return the number of states currently on the stack\nstateStackSize:function stateStackSize() {\n        return this.conditionStack.length;\n    },\noptions: {},\nperformAction: function anonymous(yy,yy_,$avoiding_name_collisions,YY_START) {\nvar YYSTATE=YY_START;\nswitch($avoiding_name_collisions) {\ncase 0:/* skip whitespace */\nbreak;\ncase 1:return 6\nbreak;\ncase 2:yy_.yytext = yy_.yytext.substr(1,yy_.yyleng-2); return 4\nbreak;\ncase 3:return 17\nbreak;\ncase 4:return 18\nbreak;\ncase 5:return 23\nbreak;\ncase 6:return 24\nbreak;\ncase 7:return 22\nbreak;\ncase 8:return 21\nbreak;\ncase 9:return 10\nbreak;\ncase 10:return 11\nbreak;\ncase 11:return 8\nbreak;\ncase 12:return 14\nbreak;\ncase 13:return 'INVALID'\nbreak;\n}\n},\nrules: [/^(?:\\s+)/,/^(?:(-?([0-9]|[1-9][0-9]+))(\\.[0-9]+)?([eE][-+]?[0-9]+)?\\b)/,/^(?:\"(?:\\\\[\\\\\"bfnrt\\/]|\\\\u[a-fA-F0-9]{4}|[^\\\\\\0-\\x09\\x0a-\\x1f\"])*\")/,/^(?:\\{)/,/^(?:\\})/,/^(?:\\[)/,/^(?:\\])/,/^(?:,)/,/^(?::)/,/^(?:true\\b)/,/^(?:false\\b)/,/^(?:null\\b)/,/^(?:$)/,/^(?:.)/],\nconditions: {\"INITIAL\":{\"rules\":[0,1,2,3,4,5,6,7,8,9,10,11,12,13],\"inclusive\":true}}\n});\nreturn lexer;\n})();\nparser.lexer = lexer;\nfunction Parser () {\n  this.yy = {};\n}\nParser.prototype = parser;parser.Parser = Parser;\nreturn new Parser;\n})();\n\n\nif (typeof require !== 'undefined' && typeof exports !== 'undefined') {\nexports.parser = jsonlint;\nexports.Parser = jsonlint.Parser;\nexports.parse = function () { return jsonlint.parse.apply(jsonlint, arguments); };\nexports.main = function commonjsMain(args) {\n    if (!args[1]) {\n        console.log('Usage: '+args[0]+' FILE');\n        process.exit(1);\n    }\n    var source = require('fs').readFileSync(require('path').normalize(args[1]), \"utf8\");\n    return exports.parser.parse(source);\n};\nif (typeof module !== 'undefined' && require.main === module) {\n  exports.main(process.argv.slice(1));\n}\n}\n}).call(this,require('_process'))\n},{\"_process\":66,\"fs\":64,\"path\":65}],15:[function(require,module,exports){\n(function (global){\n/**\n * Lodash (Custom Build) <https://lodash.com/>\n * Build: `lodash modularize exports=\"npm\" -o ./`\n * Copyright JS Foundation and other contributors <https://js.foundation/>\n * Released under MIT license <https://lodash.com/license>\n * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>\n * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors\n */\n\n/** Used as the size to enable large array optimizations. */\nvar LARGE_ARRAY_SIZE = 200;\n\n/** Used to stand-in for `undefined` hash values. */\nvar HASH_UNDEFINED = '__lodash_hash_undefined__';\n\n/** Used to compose bitmasks for value comparisons. */\nvar COMPARE_PARTIAL_FLAG = 1,\n    COMPARE_UNORDERED_FLAG = 2;\n\n/** Used as references for various `Number` constants. */\nvar MAX_SAFE_INTEGER = 9007199254740991;\n\n/** `Object#toString` result references. */\nvar argsTag = '[object Arguments]',\n    arrayTag = '[object Array]',\n    asyncTag = '[object AsyncFunction]',\n    boolTag = '[object Boolean]',\n    dateTag = '[object Date]',\n    errorTag = '[object Error]',\n    funcTag = '[object Function]',\n    genTag = '[object GeneratorFunction]',\n    mapTag = '[object Map]',\n    numberTag = '[object Number]',\n    nullTag = '[object Null]',\n    objectTag = '[object Object]',\n    promiseTag = '[object Promise]',\n    proxyTag = '[object Proxy]',\n    regexpTag = '[object RegExp]',\n    setTag = '[object Set]',\n    stringTag = '[object String]',\n    symbolTag = '[object Symbol]',\n    undefinedTag = '[object Undefined]',\n    weakMapTag = '[object WeakMap]';\n\nvar arrayBufferTag = '[object ArrayBuffer]',\n    dataViewTag = '[object DataView]',\n    float32Tag = '[object Float32Array]',\n    float64Tag = '[object Float64Array]',\n    int8Tag = '[object Int8Array]',\n    int16Tag = '[object Int16Array]',\n    int32Tag = '[object Int32Array]',\n    uint8Tag = '[object Uint8Array]',\n    uint8ClampedTag = '[object Uint8ClampedArray]',\n    uint16Tag = '[object Uint16Array]',\n    uint32Tag = '[object Uint32Array]';\n\n/**\n * Used to match `RegExp`\n * [syntax characters](http://ecma-international.org/ecma-262/7.0/#sec-patterns).\n */\nvar reRegExpChar = /[\\\\^$.*+?()[\\]{}|]/g;\n\n/** Used to detect host constructors (Safari). */\nvar reIsHostCtor = /^\\[object .+?Constructor\\]$/;\n\n/** Used to detect unsigned integer values. */\nvar reIsUint = /^(?:0|[1-9]\\d*)$/;\n\n/** Used to identify `toStringTag` values of typed arrays. */\nvar typedArrayTags = {};\ntypedArrayTags[float32Tag] = typedArrayTags[float64Tag] =\ntypedArrayTags[int8Tag] = typedArrayTags[int16Tag] =\ntypedArrayTags[int32Tag] = typedArrayTags[uint8Tag] =\ntypedArrayTags[uint8ClampedTag] = typedArrayTags[uint16Tag] =\ntypedArrayTags[uint32Tag] = true;\ntypedArrayTags[argsTag] = typedArrayTags[arrayTag] =\ntypedArrayTags[arrayBufferTag] = typedArrayTags[boolTag] =\ntypedArrayTags[dataViewTag] = typedArrayTags[dateTag] =\ntypedArrayTags[errorTag] = typedArrayTags[funcTag] =\ntypedArrayTags[mapTag] = typedArrayTags[numberTag] =\ntypedArrayTags[objectTag] = typedArrayTags[regexpTag] =\ntypedArrayTags[setTag] = typedArrayTags[stringTag] =\ntypedArrayTags[weakMapTag] = false;\n\n/** Detect free variable `global` from Node.js. */\nvar freeGlobal = typeof global == 'object' && global && global.Object === Object && global;\n\n/** Detect free variable `self`. */\nvar freeSelf = typeof self == 'object' && self && self.Object === Object && self;\n\n/** Used as a reference to the global object. */\nvar root = freeGlobal || freeSelf || Function('return this')();\n\n/** Detect free variable `exports`. */\nvar freeExports = typeof exports == 'object' && exports && !exports.nodeType && exports;\n\n/** Detect free variable `module`. */\nvar freeModule = freeExports && typeof module == 'object' && module && !module.nodeType && module;\n\n/** Detect the popular CommonJS extension `module.exports`. */\nvar moduleExports = freeModule && freeModule.exports === freeExports;\n\n/** Detect free variable `process` from Node.js. */\nvar freeProcess = moduleExports && freeGlobal.process;\n\n/** Used to access faster Node.js helpers. */\nvar nodeUtil = (function() {\n  try {\n    return freeProcess && freeProcess.binding && freeProcess.binding('util');\n  } catch (e) {}\n}());\n\n/* Node.js helper references. */\nvar nodeIsTypedArray = nodeUtil && nodeUtil.isTypedArray;\n\n/**\n * A specialized version of `_.filter` for arrays without support for\n * iteratee shorthands.\n *\n * @private\n * @param {Array} [array] The array to iterate over.\n * @param {Function} predicate The function invoked per iteration.\n * @returns {Array} Returns the new filtered array.\n */\nfunction arrayFilter(array, predicate) {\n  var index = -1,\n      length = array == null ? 0 : array.length,\n      resIndex = 0,\n      result = [];\n\n  while (++index < length) {\n    var value = array[index];\n    if (predicate(value, index, array)) {\n      result[resIndex++] = value;\n    }\n  }\n  return result;\n}\n\n/**\n * Appends the elements of `values` to `array`.\n *\n * @private\n * @param {Array} array The array to modify.\n * @param {Array} values The values to append.\n * @returns {Array} Returns `array`.\n */\nfunction arrayPush(array, values) {\n  var index = -1,\n      length = values.length,\n      offset = array.length;\n\n  while (++index < length) {\n    array[offset + index] = values[index];\n  }\n  return array;\n}\n\n/**\n * A specialized version of `_.some` for arrays without support for iteratee\n * shorthands.\n *\n * @private\n * @param {Array} [array] The array to iterate over.\n * @param {Function} predicate The function invoked per iteration.\n * @returns {boolean} Returns `true` if any element passes the predicate check,\n *  else `false`.\n */\nfunction arraySome(array, predicate) {\n  var index = -1,\n      length = array == null ? 0 : array.length;\n\n  while (++index < length) {\n    if (predicate(array[index], index, array)) {\n      return true;\n    }\n  }\n  return false;\n}\n\n/**\n * The base implementation of `_.times` without support for iteratee shorthands\n * or max array length checks.\n *\n * @private\n * @param {number} n The number of times to invoke `iteratee`.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Array} Returns the array of results.\n */\nfunction baseTimes(n, iteratee) {\n  var index = -1,\n      result = Array(n);\n\n  while (++index < n) {\n    result[index] = iteratee(index);\n  }\n  return result;\n}\n\n/**\n * The base implementation of `_.unary` without support for storing metadata.\n *\n * @private\n * @param {Function} func The function to cap arguments for.\n * @returns {Function} Returns the new capped function.\n */\nfunction baseUnary(func) {\n  return function(value) {\n    return func(value);\n  };\n}\n\n/**\n * Checks if a `cache` value for `key` exists.\n *\n * @private\n * @param {Object} cache The cache to query.\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction cacheHas(cache, key) {\n  return cache.has(key);\n}\n\n/**\n * Gets the value at `key` of `object`.\n *\n * @private\n * @param {Object} [object] The object to query.\n * @param {string} key The key of the property to get.\n * @returns {*} Returns the property value.\n */\nfunction getValue(object, key) {\n  return object == null ? undefined : object[key];\n}\n\n/**\n * Converts `map` to its key-value pairs.\n *\n * @private\n * @param {Object} map The map to convert.\n * @returns {Array} Returns the key-value pairs.\n */\nfunction mapToArray(map) {\n  var index = -1,\n      result = Array(map.size);\n\n  map.forEach(function(value, key) {\n    result[++index] = [key, value];\n  });\n  return result;\n}\n\n/**\n * Creates a unary function that invokes `func` with its argument transformed.\n *\n * @private\n * @param {Function} func The function to wrap.\n * @param {Function} transform The argument transform.\n * @returns {Function} Returns the new function.\n */\nfunction overArg(func, transform) {\n  return function(arg) {\n    return func(transform(arg));\n  };\n}\n\n/**\n * Converts `set` to an array of its values.\n *\n * @private\n * @param {Object} set The set to convert.\n * @returns {Array} Returns the values.\n */\nfunction setToArray(set) {\n  var index = -1,\n      result = Array(set.size);\n\n  set.forEach(function(value) {\n    result[++index] = value;\n  });\n  return result;\n}\n\n/** Used for built-in method references. */\nvar arrayProto = Array.prototype,\n    funcProto = Function.prototype,\n    objectProto = Object.prototype;\n\n/** Used to detect overreaching core-js shims. */\nvar coreJsData = root['__core-js_shared__'];\n\n/** Used to resolve the decompiled source of functions. */\nvar funcToString = funcProto.toString;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/** Used to detect methods masquerading as native. */\nvar maskSrcKey = (function() {\n  var uid = /[^.]+$/.exec(coreJsData && coreJsData.keys && coreJsData.keys.IE_PROTO || '');\n  return uid ? ('Symbol(src)_1.' + uid) : '';\n}());\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar nativeObjectToString = objectProto.toString;\n\n/** Used to detect if a method is native. */\nvar reIsNative = RegExp('^' +\n  funcToString.call(hasOwnProperty).replace(reRegExpChar, '\\\\$&')\n  .replace(/hasOwnProperty|(function).*?(?=\\\\\\()| for .+?(?=\\\\\\])/g, '$1.*?') + '$'\n);\n\n/** Built-in value references. */\nvar Buffer = moduleExports ? root.Buffer : undefined,\n    Symbol = root.Symbol,\n    Uint8Array = root.Uint8Array,\n    propertyIsEnumerable = objectProto.propertyIsEnumerable,\n    splice = arrayProto.splice,\n    symToStringTag = Symbol ? Symbol.toStringTag : undefined;\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeGetSymbols = Object.getOwnPropertySymbols,\n    nativeIsBuffer = Buffer ? Buffer.isBuffer : undefined,\n    nativeKeys = overArg(Object.keys, Object);\n\n/* Built-in method references that are verified to be native. */\nvar DataView = getNative(root, 'DataView'),\n    Map = getNative(root, 'Map'),\n    Promise = getNative(root, 'Promise'),\n    Set = getNative(root, 'Set'),\n    WeakMap = getNative(root, 'WeakMap'),\n    nativeCreate = getNative(Object, 'create');\n\n/** Used to detect maps, sets, and weakmaps. */\nvar dataViewCtorString = toSource(DataView),\n    mapCtorString = toSource(Map),\n    promiseCtorString = toSource(Promise),\n    setCtorString = toSource(Set),\n    weakMapCtorString = toSource(WeakMap);\n\n/** Used to convert symbols to primitives and strings. */\nvar symbolProto = Symbol ? Symbol.prototype : undefined,\n    symbolValueOf = symbolProto ? symbolProto.valueOf : undefined;\n\n/**\n * Creates a hash object.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction Hash(entries) {\n  var index = -1,\n      length = entries == null ? 0 : entries.length;\n\n  this.clear();\n  while (++index < length) {\n    var entry = entries[index];\n    this.set(entry[0], entry[1]);\n  }\n}\n\n/**\n * Removes all key-value entries from the hash.\n *\n * @private\n * @name clear\n * @memberOf Hash\n */\nfunction hashClear() {\n  this.__data__ = nativeCreate ? nativeCreate(null) : {};\n  this.size = 0;\n}\n\n/**\n * Removes `key` and its value from the hash.\n *\n * @private\n * @name delete\n * @memberOf Hash\n * @param {Object} hash The hash to modify.\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction hashDelete(key) {\n  var result = this.has(key) && delete this.__data__[key];\n  this.size -= result ? 1 : 0;\n  return result;\n}\n\n/**\n * Gets the hash value for `key`.\n *\n * @private\n * @name get\n * @memberOf Hash\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction hashGet(key) {\n  var data = this.__data__;\n  if (nativeCreate) {\n    var result = data[key];\n    return result === HASH_UNDEFINED ? undefined : result;\n  }\n  return hasOwnProperty.call(data, key) ? data[key] : undefined;\n}\n\n/**\n * Checks if a hash value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf Hash\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction hashHas(key) {\n  var data = this.__data__;\n  return nativeCreate ? (data[key] !== undefined) : hasOwnProperty.call(data, key);\n}\n\n/**\n * Sets the hash `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf Hash\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the hash instance.\n */\nfunction hashSet(key, value) {\n  var data = this.__data__;\n  this.size += this.has(key) ? 0 : 1;\n  data[key] = (nativeCreate && value === undefined) ? HASH_UNDEFINED : value;\n  return this;\n}\n\n// Add methods to `Hash`.\nHash.prototype.clear = hashClear;\nHash.prototype['delete'] = hashDelete;\nHash.prototype.get = hashGet;\nHash.prototype.has = hashHas;\nHash.prototype.set = hashSet;\n\n/**\n * Creates an list cache object.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction ListCache(entries) {\n  var index = -1,\n      length = entries == null ? 0 : entries.length;\n\n  this.clear();\n  while (++index < length) {\n    var entry = entries[index];\n    this.set(entry[0], entry[1]);\n  }\n}\n\n/**\n * Removes all key-value entries from the list cache.\n *\n * @private\n * @name clear\n * @memberOf ListCache\n */\nfunction listCacheClear() {\n  this.__data__ = [];\n  this.size = 0;\n}\n\n/**\n * Removes `key` and its value from the list cache.\n *\n * @private\n * @name delete\n * @memberOf ListCache\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction listCacheDelete(key) {\n  var data = this.__data__,\n      index = assocIndexOf(data, key);\n\n  if (index < 0) {\n    return false;\n  }\n  var lastIndex = data.length - 1;\n  if (index == lastIndex) {\n    data.pop();\n  } else {\n    splice.call(data, index, 1);\n  }\n  --this.size;\n  return true;\n}\n\n/**\n * Gets the list cache value for `key`.\n *\n * @private\n * @name get\n * @memberOf ListCache\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction listCacheGet(key) {\n  var data = this.__data__,\n      index = assocIndexOf(data, key);\n\n  return index < 0 ? undefined : data[index][1];\n}\n\n/**\n * Checks if a list cache value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf ListCache\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction listCacheHas(key) {\n  return assocIndexOf(this.__data__, key) > -1;\n}\n\n/**\n * Sets the list cache `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf ListCache\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the list cache instance.\n */\nfunction listCacheSet(key, value) {\n  var data = this.__data__,\n      index = assocIndexOf(data, key);\n\n  if (index < 0) {\n    ++this.size;\n    data.push([key, value]);\n  } else {\n    data[index][1] = value;\n  }\n  return this;\n}\n\n// Add methods to `ListCache`.\nListCache.prototype.clear = listCacheClear;\nListCache.prototype['delete'] = listCacheDelete;\nListCache.prototype.get = listCacheGet;\nListCache.prototype.has = listCacheHas;\nListCache.prototype.set = listCacheSet;\n\n/**\n * Creates a map cache object to store key-value pairs.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction MapCache(entries) {\n  var index = -1,\n      length = entries == null ? 0 : entries.length;\n\n  this.clear();\n  while (++index < length) {\n    var entry = entries[index];\n    this.set(entry[0], entry[1]);\n  }\n}\n\n/**\n * Removes all key-value entries from the map.\n *\n * @private\n * @name clear\n * @memberOf MapCache\n */\nfunction mapCacheClear() {\n  this.size = 0;\n  this.__data__ = {\n    'hash': new Hash,\n    'map': new (Map || ListCache),\n    'string': new Hash\n  };\n}\n\n/**\n * Removes `key` and its value from the map.\n *\n * @private\n * @name delete\n * @memberOf MapCache\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction mapCacheDelete(key) {\n  var result = getMapData(this, key)['delete'](key);\n  this.size -= result ? 1 : 0;\n  return result;\n}\n\n/**\n * Gets the map value for `key`.\n *\n * @private\n * @name get\n * @memberOf MapCache\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction mapCacheGet(key) {\n  return getMapData(this, key).get(key);\n}\n\n/**\n * Checks if a map value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf MapCache\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction mapCacheHas(key) {\n  return getMapData(this, key).has(key);\n}\n\n/**\n * Sets the map `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf MapCache\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the map cache instance.\n */\nfunction mapCacheSet(key, value) {\n  var data = getMapData(this, key),\n      size = data.size;\n\n  data.set(key, value);\n  this.size += data.size == size ? 0 : 1;\n  return this;\n}\n\n// Add methods to `MapCache`.\nMapCache.prototype.clear = mapCacheClear;\nMapCache.prototype['delete'] = mapCacheDelete;\nMapCache.prototype.get = mapCacheGet;\nMapCache.prototype.has = mapCacheHas;\nMapCache.prototype.set = mapCacheSet;\n\n/**\n *\n * Creates an array cache object to store unique values.\n *\n * @private\n * @constructor\n * @param {Array} [values] The values to cache.\n */\nfunction SetCache(values) {\n  var index = -1,\n      length = values == null ? 0 : values.length;\n\n  this.__data__ = new MapCache;\n  while (++index < length) {\n    this.add(values[index]);\n  }\n}\n\n/**\n * Adds `value` to the array cache.\n *\n * @private\n * @name add\n * @memberOf SetCache\n * @alias push\n * @param {*} value The value to cache.\n * @returns {Object} Returns the cache instance.\n */\nfunction setCacheAdd(value) {\n  this.__data__.set(value, HASH_UNDEFINED);\n  return this;\n}\n\n/**\n * Checks if `value` is in the array cache.\n *\n * @private\n * @name has\n * @memberOf SetCache\n * @param {*} value The value to search for.\n * @returns {number} Returns `true` if `value` is found, else `false`.\n */\nfunction setCacheHas(value) {\n  return this.__data__.has(value);\n}\n\n// Add methods to `SetCache`.\nSetCache.prototype.add = SetCache.prototype.push = setCacheAdd;\nSetCache.prototype.has = setCacheHas;\n\n/**\n * Creates a stack cache object to store key-value pairs.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction Stack(entries) {\n  var data = this.__data__ = new ListCache(entries);\n  this.size = data.size;\n}\n\n/**\n * Removes all key-value entries from the stack.\n *\n * @private\n * @name clear\n * @memberOf Stack\n */\nfunction stackClear() {\n  this.__data__ = new ListCache;\n  this.size = 0;\n}\n\n/**\n * Removes `key` and its value from the stack.\n *\n * @private\n * @name delete\n * @memberOf Stack\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction stackDelete(key) {\n  var data = this.__data__,\n      result = data['delete'](key);\n\n  this.size = data.size;\n  return result;\n}\n\n/**\n * Gets the stack value for `key`.\n *\n * @private\n * @name get\n * @memberOf Stack\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction stackGet(key) {\n  return this.__data__.get(key);\n}\n\n/**\n * Checks if a stack value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf Stack\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction stackHas(key) {\n  return this.__data__.has(key);\n}\n\n/**\n * Sets the stack `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf Stack\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the stack cache instance.\n */\nfunction stackSet(key, value) {\n  var data = this.__data__;\n  if (data instanceof ListCache) {\n    var pairs = data.__data__;\n    if (!Map || (pairs.length < LARGE_ARRAY_SIZE - 1)) {\n      pairs.push([key, value]);\n      this.size = ++data.size;\n      return this;\n    }\n    data = this.__data__ = new MapCache(pairs);\n  }\n  data.set(key, value);\n  this.size = data.size;\n  return this;\n}\n\n// Add methods to `Stack`.\nStack.prototype.clear = stackClear;\nStack.prototype['delete'] = stackDelete;\nStack.prototype.get = stackGet;\nStack.prototype.has = stackHas;\nStack.prototype.set = stackSet;\n\n/**\n * Creates an array of the enumerable property names of the array-like `value`.\n *\n * @private\n * @param {*} value The value to query.\n * @param {boolean} inherited Specify returning inherited property names.\n * @returns {Array} Returns the array of property names.\n */\nfunction arrayLikeKeys(value, inherited) {\n  var isArr = isArray(value),\n      isArg = !isArr && isArguments(value),\n      isBuff = !isArr && !isArg && isBuffer(value),\n      isType = !isArr && !isArg && !isBuff && isTypedArray(value),\n      skipIndexes = isArr || isArg || isBuff || isType,\n      result = skipIndexes ? baseTimes(value.length, String) : [],\n      length = result.length;\n\n  for (var key in value) {\n    if ((inherited || hasOwnProperty.call(value, key)) &&\n        !(skipIndexes && (\n           // Safari 9 has enumerable `arguments.length` in strict mode.\n           key == 'length' ||\n           // Node.js 0.10 has enumerable non-index properties on buffers.\n           (isBuff && (key == 'offset' || key == 'parent')) ||\n           // PhantomJS 2 has enumerable non-index properties on typed arrays.\n           (isType && (key == 'buffer' || key == 'byteLength' || key == 'byteOffset')) ||\n           // Skip index properties.\n           isIndex(key, length)\n        ))) {\n      result.push(key);\n    }\n  }\n  return result;\n}\n\n/**\n * Gets the index at which the `key` is found in `array` of key-value pairs.\n *\n * @private\n * @param {Array} array The array to inspect.\n * @param {*} key The key to search for.\n * @returns {number} Returns the index of the matched value, else `-1`.\n */\nfunction assocIndexOf(array, key) {\n  var length = array.length;\n  while (length--) {\n    if (eq(array[length][0], key)) {\n      return length;\n    }\n  }\n  return -1;\n}\n\n/**\n * The base implementation of `getAllKeys` and `getAllKeysIn` which uses\n * `keysFunc` and `symbolsFunc` to get the enumerable property names and\n * symbols of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @param {Function} keysFunc The function to get the keys of `object`.\n * @param {Function} symbolsFunc The function to get the symbols of `object`.\n * @returns {Array} Returns the array of property names and symbols.\n */\nfunction baseGetAllKeys(object, keysFunc, symbolsFunc) {\n  var result = keysFunc(object);\n  return isArray(object) ? result : arrayPush(result, symbolsFunc(object));\n}\n\n/**\n * The base implementation of `getTag` without fallbacks for buggy environments.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the `toStringTag`.\n */\nfunction baseGetTag(value) {\n  if (value == null) {\n    return value === undefined ? undefinedTag : nullTag;\n  }\n  return (symToStringTag && symToStringTag in Object(value))\n    ? getRawTag(value)\n    : objectToString(value);\n}\n\n/**\n * The base implementation of `_.isArguments`.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an `arguments` object,\n */\nfunction baseIsArguments(value) {\n  return isObjectLike(value) && baseGetTag(value) == argsTag;\n}\n\n/**\n * The base implementation of `_.isEqual` which supports partial comparisons\n * and tracks traversed objects.\n *\n * @private\n * @param {*} value The value to compare.\n * @param {*} other The other value to compare.\n * @param {boolean} bitmask The bitmask flags.\n *  1 - Unordered comparison\n *  2 - Partial comparison\n * @param {Function} [customizer] The function to customize comparisons.\n * @param {Object} [stack] Tracks traversed `value` and `other` objects.\n * @returns {boolean} Returns `true` if the values are equivalent, else `false`.\n */\nfunction baseIsEqual(value, other, bitmask, customizer, stack) {\n  if (value === other) {\n    return true;\n  }\n  if (value == null || other == null || (!isObjectLike(value) && !isObjectLike(other))) {\n    return value !== value && other !== other;\n  }\n  return baseIsEqualDeep(value, other, bitmask, customizer, baseIsEqual, stack);\n}\n\n/**\n * A specialized version of `baseIsEqual` for arrays and objects which performs\n * deep comparisons and tracks traversed objects enabling objects with circular\n * references to be compared.\n *\n * @private\n * @param {Object} object The object to compare.\n * @param {Object} other The other object to compare.\n * @param {number} bitmask The bitmask flags. See `baseIsEqual` for more details.\n * @param {Function} customizer The function to customize comparisons.\n * @param {Function} equalFunc The function to determine equivalents of values.\n * @param {Object} [stack] Tracks traversed `object` and `other` objects.\n * @returns {boolean} Returns `true` if the objects are equivalent, else `false`.\n */\nfunction baseIsEqualDeep(object, other, bitmask, customizer, equalFunc, stack) {\n  var objIsArr = isArray(object),\n      othIsArr = isArray(other),\n      objTag = objIsArr ? arrayTag : getTag(object),\n      othTag = othIsArr ? arrayTag : getTag(other);\n\n  objTag = objTag == argsTag ? objectTag : objTag;\n  othTag = othTag == argsTag ? objectTag : othTag;\n\n  var objIsObj = objTag == objectTag,\n      othIsObj = othTag == objectTag,\n      isSameTag = objTag == othTag;\n\n  if (isSameTag && isBuffer(object)) {\n    if (!isBuffer(other)) {\n      return false;\n    }\n    objIsArr = true;\n    objIsObj = false;\n  }\n  if (isSameTag && !objIsObj) {\n    stack || (stack = new Stack);\n    return (objIsArr || isTypedArray(object))\n      ? equalArrays(object, other, bitmask, customizer, equalFunc, stack)\n      : equalByTag(object, other, objTag, bitmask, customizer, equalFunc, stack);\n  }\n  if (!(bitmask & COMPARE_PARTIAL_FLAG)) {\n    var objIsWrapped = objIsObj && hasOwnProperty.call(object, '__wrapped__'),\n        othIsWrapped = othIsObj && hasOwnProperty.call(other, '__wrapped__');\n\n    if (objIsWrapped || othIsWrapped) {\n      var objUnwrapped = objIsWrapped ? object.value() : object,\n          othUnwrapped = othIsWrapped ? other.value() : other;\n\n      stack || (stack = new Stack);\n      return equalFunc(objUnwrapped, othUnwrapped, bitmask, customizer, stack);\n    }\n  }\n  if (!isSameTag) {\n    return false;\n  }\n  stack || (stack = new Stack);\n  return equalObjects(object, other, bitmask, customizer, equalFunc, stack);\n}\n\n/**\n * The base implementation of `_.isNative` without bad shim checks.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a native function,\n *  else `false`.\n */\nfunction baseIsNative(value) {\n  if (!isObject(value) || isMasked(value)) {\n    return false;\n  }\n  var pattern = isFunction(value) ? reIsNative : reIsHostCtor;\n  return pattern.test(toSource(value));\n}\n\n/**\n * The base implementation of `_.isTypedArray` without Node.js optimizations.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a typed array, else `false`.\n */\nfunction baseIsTypedArray(value) {\n  return isObjectLike(value) &&\n    isLength(value.length) && !!typedArrayTags[baseGetTag(value)];\n}\n\n/**\n * The base implementation of `_.keys` which doesn't treat sparse arrays as dense.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n */\nfunction baseKeys(object) {\n  if (!isPrototype(object)) {\n    return nativeKeys(object);\n  }\n  var result = [];\n  for (var key in Object(object)) {\n    if (hasOwnProperty.call(object, key) && key != 'constructor') {\n      result.push(key);\n    }\n  }\n  return result;\n}\n\n/**\n * A specialized version of `baseIsEqualDeep` for arrays with support for\n * partial deep comparisons.\n *\n * @private\n * @param {Array} array The array to compare.\n * @param {Array} other The other array to compare.\n * @param {number} bitmask The bitmask flags. See `baseIsEqual` for more details.\n * @param {Function} customizer The function to customize comparisons.\n * @param {Function} equalFunc The function to determine equivalents of values.\n * @param {Object} stack Tracks traversed `array` and `other` objects.\n * @returns {boolean} Returns `true` if the arrays are equivalent, else `false`.\n */\nfunction equalArrays(array, other, bitmask, customizer, equalFunc, stack) {\n  var isPartial = bitmask & COMPARE_PARTIAL_FLAG,\n      arrLength = array.length,\n      othLength = other.length;\n\n  if (arrLength != othLength && !(isPartial && othLength > arrLength)) {\n    return false;\n  }\n  // Assume cyclic values are equal.\n  var stacked = stack.get(array);\n  if (stacked && stack.get(other)) {\n    return stacked == other;\n  }\n  var index = -1,\n      result = true,\n      seen = (bitmask & COMPARE_UNORDERED_FLAG) ? new SetCache : undefined;\n\n  stack.set(array, other);\n  stack.set(other, array);\n\n  // Ignore non-index properties.\n  while (++index < arrLength) {\n    var arrValue = array[index],\n        othValue = other[index];\n\n    if (customizer) {\n      var compared = isPartial\n        ? customizer(othValue, arrValue, index, other, array, stack)\n        : customizer(arrValue, othValue, index, array, other, stack);\n    }\n    if (compared !== undefined) {\n      if (compared) {\n        continue;\n      }\n      result = false;\n      break;\n    }\n    // Recursively compare arrays (susceptible to call stack limits).\n    if (seen) {\n      if (!arraySome(other, function(othValue, othIndex) {\n            if (!cacheHas(seen, othIndex) &&\n                (arrValue === othValue || equalFunc(arrValue, othValue, bitmask, customizer, stack))) {\n              return seen.push(othIndex);\n            }\n          })) {\n        result = false;\n        break;\n      }\n    } else if (!(\n          arrValue === othValue ||\n            equalFunc(arrValue, othValue, bitmask, customizer, stack)\n        )) {\n      result = false;\n      break;\n    }\n  }\n  stack['delete'](array);\n  stack['delete'](other);\n  return result;\n}\n\n/**\n * A specialized version of `baseIsEqualDeep` for comparing objects of\n * the same `toStringTag`.\n *\n * **Note:** This function only supports comparing values with tags of\n * `Boolean`, `Date`, `Error`, `Number`, `RegExp`, or `String`.\n *\n * @private\n * @param {Object} object The object to compare.\n * @param {Object} other The other object to compare.\n * @param {string} tag The `toStringTag` of the objects to compare.\n * @param {number} bitmask The bitmask flags. See `baseIsEqual` for more details.\n * @param {Function} customizer The function to customize comparisons.\n * @param {Function} equalFunc The function to determine equivalents of values.\n * @param {Object} stack Tracks traversed `object` and `other` objects.\n * @returns {boolean} Returns `true` if the objects are equivalent, else `false`.\n */\nfunction equalByTag(object, other, tag, bitmask, customizer, equalFunc, stack) {\n  switch (tag) {\n    case dataViewTag:\n      if ((object.byteLength != other.byteLength) ||\n          (object.byteOffset != other.byteOffset)) {\n        return false;\n      }\n      object = object.buffer;\n      other = other.buffer;\n\n    case arrayBufferTag:\n      if ((object.byteLength != other.byteLength) ||\n          !equalFunc(new Uint8Array(object), new Uint8Array(other))) {\n        return false;\n      }\n      return true;\n\n    case boolTag:\n    case dateTag:\n    case numberTag:\n      // Coerce booleans to `1` or `0` and dates to milliseconds.\n      // Invalid dates are coerced to `NaN`.\n      return eq(+object, +other);\n\n    case errorTag:\n      return object.name == other.name && object.message == other.message;\n\n    case regexpTag:\n    case stringTag:\n      // Coerce regexes to strings and treat strings, primitives and objects,\n      // as equal. See http://www.ecma-international.org/ecma-262/7.0/#sec-regexp.prototype.tostring\n      // for more details.\n      return object == (other + '');\n\n    case mapTag:\n      var convert = mapToArray;\n\n    case setTag:\n      var isPartial = bitmask & COMPARE_PARTIAL_FLAG;\n      convert || (convert = setToArray);\n\n      if (object.size != other.size && !isPartial) {\n        return false;\n      }\n      // Assume cyclic values are equal.\n      var stacked = stack.get(object);\n      if (stacked) {\n        return stacked == other;\n      }\n      bitmask |= COMPARE_UNORDERED_FLAG;\n\n      // Recursively compare objects (susceptible to call stack limits).\n      stack.set(object, other);\n      var result = equalArrays(convert(object), convert(other), bitmask, customizer, equalFunc, stack);\n      stack['delete'](object);\n      return result;\n\n    case symbolTag:\n      if (symbolValueOf) {\n        return symbolValueOf.call(object) == symbolValueOf.call(other);\n      }\n  }\n  return false;\n}\n\n/**\n * A specialized version of `baseIsEqualDeep` for objects with support for\n * partial deep comparisons.\n *\n * @private\n * @param {Object} object The object to compare.\n * @param {Object} other The other object to compare.\n * @param {number} bitmask The bitmask flags. See `baseIsEqual` for more details.\n * @param {Function} customizer The function to customize comparisons.\n * @param {Function} equalFunc The function to determine equivalents of values.\n * @param {Object} stack Tracks traversed `object` and `other` objects.\n * @returns {boolean} Returns `true` if the objects are equivalent, else `false`.\n */\nfunction equalObjects(object, other, bitmask, customizer, equalFunc, stack) {\n  var isPartial = bitmask & COMPARE_PARTIAL_FLAG,\n      objProps = getAllKeys(object),\n      objLength = objProps.length,\n      othProps = getAllKeys(other),\n      othLength = othProps.length;\n\n  if (objLength != othLength && !isPartial) {\n    return false;\n  }\n  var index = objLength;\n  while (index--) {\n    var key = objProps[index];\n    if (!(isPartial ? key in other : hasOwnProperty.call(other, key))) {\n      return false;\n    }\n  }\n  // Assume cyclic values are equal.\n  var stacked = stack.get(object);\n  if (stacked && stack.get(other)) {\n    return stacked == other;\n  }\n  var result = true;\n  stack.set(object, other);\n  stack.set(other, object);\n\n  var skipCtor = isPartial;\n  while (++index < objLength) {\n    key = objProps[index];\n    var objValue = object[key],\n        othValue = other[key];\n\n    if (customizer) {\n      var compared = isPartial\n        ? customizer(othValue, objValue, key, other, object, stack)\n        : customizer(objValue, othValue, key, object, other, stack);\n    }\n    // Recursively compare objects (susceptible to call stack limits).\n    if (!(compared === undefined\n          ? (objValue === othValue || equalFunc(objValue, othValue, bitmask, customizer, stack))\n          : compared\n        )) {\n      result = false;\n      break;\n    }\n    skipCtor || (skipCtor = key == 'constructor');\n  }\n  if (result && !skipCtor) {\n    var objCtor = object.constructor,\n        othCtor = other.constructor;\n\n    // Non `Object` object instances with different constructors are not equal.\n    if (objCtor != othCtor &&\n        ('constructor' in object && 'constructor' in other) &&\n        !(typeof objCtor == 'function' && objCtor instanceof objCtor &&\n          typeof othCtor == 'function' && othCtor instanceof othCtor)) {\n      result = false;\n    }\n  }\n  stack['delete'](object);\n  stack['delete'](other);\n  return result;\n}\n\n/**\n * Creates an array of own enumerable property names and symbols of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names and symbols.\n */\nfunction getAllKeys(object) {\n  return baseGetAllKeys(object, keys, getSymbols);\n}\n\n/**\n * Gets the data for `map`.\n *\n * @private\n * @param {Object} map The map to query.\n * @param {string} key The reference key.\n * @returns {*} Returns the map data.\n */\nfunction getMapData(map, key) {\n  var data = map.__data__;\n  return isKeyable(key)\n    ? data[typeof key == 'string' ? 'string' : 'hash']\n    : data.map;\n}\n\n/**\n * Gets the native function at `key` of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @param {string} key The key of the method to get.\n * @returns {*} Returns the function if it's native, else `undefined`.\n */\nfunction getNative(object, key) {\n  var value = getValue(object, key);\n  return baseIsNative(value) ? value : undefined;\n}\n\n/**\n * A specialized version of `baseGetTag` which ignores `Symbol.toStringTag` values.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the raw `toStringTag`.\n */\nfunction getRawTag(value) {\n  var isOwn = hasOwnProperty.call(value, symToStringTag),\n      tag = value[symToStringTag];\n\n  try {\n    value[symToStringTag] = undefined;\n    var unmasked = true;\n  } catch (e) {}\n\n  var result = nativeObjectToString.call(value);\n  if (unmasked) {\n    if (isOwn) {\n      value[symToStringTag] = tag;\n    } else {\n      delete value[symToStringTag];\n    }\n  }\n  return result;\n}\n\n/**\n * Creates an array of the own enumerable symbols of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of symbols.\n */\nvar getSymbols = !nativeGetSymbols ? stubArray : function(object) {\n  if (object == null) {\n    return [];\n  }\n  object = Object(object);\n  return arrayFilter(nativeGetSymbols(object), function(symbol) {\n    return propertyIsEnumerable.call(object, symbol);\n  });\n};\n\n/**\n * Gets the `toStringTag` of `value`.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the `toStringTag`.\n */\nvar getTag = baseGetTag;\n\n// Fallback for data views, maps, sets, and weak maps in IE 11 and promises in Node.js < 6.\nif ((DataView && getTag(new DataView(new ArrayBuffer(1))) != dataViewTag) ||\n    (Map && getTag(new Map) != mapTag) ||\n    (Promise && getTag(Promise.resolve()) != promiseTag) ||\n    (Set && getTag(new Set) != setTag) ||\n    (WeakMap && getTag(new WeakMap) != weakMapTag)) {\n  getTag = function(value) {\n    var result = baseGetTag(value),\n        Ctor = result == objectTag ? value.constructor : undefined,\n        ctorString = Ctor ? toSource(Ctor) : '';\n\n    if (ctorString) {\n      switch (ctorString) {\n        case dataViewCtorString: return dataViewTag;\n        case mapCtorString: return mapTag;\n        case promiseCtorString: return promiseTag;\n        case setCtorString: return setTag;\n        case weakMapCtorString: return weakMapTag;\n      }\n    }\n    return result;\n  };\n}\n\n/**\n * Checks if `value` is a valid array-like index.\n *\n * @private\n * @param {*} value The value to check.\n * @param {number} [length=MAX_SAFE_INTEGER] The upper bounds of a valid index.\n * @returns {boolean} Returns `true` if `value` is a valid index, else `false`.\n */\nfunction isIndex(value, length) {\n  length = length == null ? MAX_SAFE_INTEGER : length;\n  return !!length &&\n    (typeof value == 'number' || reIsUint.test(value)) &&\n    (value > -1 && value % 1 == 0 && value < length);\n}\n\n/**\n * Checks if `value` is suitable for use as unique object key.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is suitable, else `false`.\n */\nfunction isKeyable(value) {\n  var type = typeof value;\n  return (type == 'string' || type == 'number' || type == 'symbol' || type == 'boolean')\n    ? (value !== '__proto__')\n    : (value === null);\n}\n\n/**\n * Checks if `func` has its source masked.\n *\n * @private\n * @param {Function} func The function to check.\n * @returns {boolean} Returns `true` if `func` is masked, else `false`.\n */\nfunction isMasked(func) {\n  return !!maskSrcKey && (maskSrcKey in func);\n}\n\n/**\n * Checks if `value` is likely a prototype object.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a prototype, else `false`.\n */\nfunction isPrototype(value) {\n  var Ctor = value && value.constructor,\n      proto = (typeof Ctor == 'function' && Ctor.prototype) || objectProto;\n\n  return value === proto;\n}\n\n/**\n * Converts `value` to a string using `Object.prototype.toString`.\n *\n * @private\n * @param {*} value The value to convert.\n * @returns {string} Returns the converted string.\n */\nfunction objectToString(value) {\n  return nativeObjectToString.call(value);\n}\n\n/**\n * Converts `func` to its source code.\n *\n * @private\n * @param {Function} func The function to convert.\n * @returns {string} Returns the source code.\n */\nfunction toSource(func) {\n  if (func != null) {\n    try {\n      return funcToString.call(func);\n    } catch (e) {}\n    try {\n      return (func + '');\n    } catch (e) {}\n  }\n  return '';\n}\n\n/**\n * Performs a\n * [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n * comparison between two values to determine if they are equivalent.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to compare.\n * @param {*} other The other value to compare.\n * @returns {boolean} Returns `true` if the values are equivalent, else `false`.\n * @example\n *\n * var object = { 'a': 1 };\n * var other = { 'a': 1 };\n *\n * _.eq(object, object);\n * // => true\n *\n * _.eq(object, other);\n * // => false\n *\n * _.eq('a', 'a');\n * // => true\n *\n * _.eq('a', Object('a'));\n * // => false\n *\n * _.eq(NaN, NaN);\n * // => true\n */\nfunction eq(value, other) {\n  return value === other || (value !== value && other !== other);\n}\n\n/**\n * Checks if `value` is likely an `arguments` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an `arguments` object,\n *  else `false`.\n * @example\n *\n * _.isArguments(function() { return arguments; }());\n * // => true\n *\n * _.isArguments([1, 2, 3]);\n * // => false\n */\nvar isArguments = baseIsArguments(function() { return arguments; }()) ? baseIsArguments : function(value) {\n  return isObjectLike(value) && hasOwnProperty.call(value, 'callee') &&\n    !propertyIsEnumerable.call(value, 'callee');\n};\n\n/**\n * Checks if `value` is classified as an `Array` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an array, else `false`.\n * @example\n *\n * _.isArray([1, 2, 3]);\n * // => true\n *\n * _.isArray(document.body.children);\n * // => false\n *\n * _.isArray('abc');\n * // => false\n *\n * _.isArray(_.noop);\n * // => false\n */\nvar isArray = Array.isArray;\n\n/**\n * Checks if `value` is array-like. A value is considered array-like if it's\n * not a function and has a `value.length` that's an integer greater than or\n * equal to `0` and less than or equal to `Number.MAX_SAFE_INTEGER`.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is array-like, else `false`.\n * @example\n *\n * _.isArrayLike([1, 2, 3]);\n * // => true\n *\n * _.isArrayLike(document.body.children);\n * // => true\n *\n * _.isArrayLike('abc');\n * // => true\n *\n * _.isArrayLike(_.noop);\n * // => false\n */\nfunction isArrayLike(value) {\n  return value != null && isLength(value.length) && !isFunction(value);\n}\n\n/**\n * Checks if `value` is a buffer.\n *\n * @static\n * @memberOf _\n * @since 4.3.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a buffer, else `false`.\n * @example\n *\n * _.isBuffer(new Buffer(2));\n * // => true\n *\n * _.isBuffer(new Uint8Array(2));\n * // => false\n */\nvar isBuffer = nativeIsBuffer || stubFalse;\n\n/**\n * Performs a deep comparison between two values to determine if they are\n * equivalent.\n *\n * **Note:** This method supports comparing arrays, array buffers, booleans,\n * date objects, error objects, maps, numbers, `Object` objects, regexes,\n * sets, strings, symbols, and typed arrays. `Object` objects are compared\n * by their own, not inherited, enumerable properties. Functions and DOM\n * nodes are compared by strict equality, i.e. `===`.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to compare.\n * @param {*} other The other value to compare.\n * @returns {boolean} Returns `true` if the values are equivalent, else `false`.\n * @example\n *\n * var object = { 'a': 1 };\n * var other = { 'a': 1 };\n *\n * _.isEqual(object, other);\n * // => true\n *\n * object === other;\n * // => false\n */\nfunction isEqual(value, other) {\n  return baseIsEqual(value, other);\n}\n\n/**\n * Checks if `value` is classified as a `Function` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a function, else `false`.\n * @example\n *\n * _.isFunction(_);\n * // => true\n *\n * _.isFunction(/abc/);\n * // => false\n */\nfunction isFunction(value) {\n  if (!isObject(value)) {\n    return false;\n  }\n  // The use of `Object#toString` avoids issues with the `typeof` operator\n  // in Safari 9 which returns 'object' for typed arrays and other constructors.\n  var tag = baseGetTag(value);\n  return tag == funcTag || tag == genTag || tag == asyncTag || tag == proxyTag;\n}\n\n/**\n * Checks if `value` is a valid array-like length.\n *\n * **Note:** This method is loosely based on\n * [`ToLength`](http://ecma-international.org/ecma-262/7.0/#sec-tolength).\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a valid length, else `false`.\n * @example\n *\n * _.isLength(3);\n * // => true\n *\n * _.isLength(Number.MIN_VALUE);\n * // => false\n *\n * _.isLength(Infinity);\n * // => false\n *\n * _.isLength('3');\n * // => false\n */\nfunction isLength(value) {\n  return typeof value == 'number' &&\n    value > -1 && value % 1 == 0 && value <= MAX_SAFE_INTEGER;\n}\n\n/**\n * Checks if `value` is the\n * [language type](http://www.ecma-international.org/ecma-262/7.0/#sec-ecmascript-language-types)\n * of `Object`. (e.g. arrays, functions, objects, regexes, `new Number(0)`, and `new String('')`)\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an object, else `false`.\n * @example\n *\n * _.isObject({});\n * // => true\n *\n * _.isObject([1, 2, 3]);\n * // => true\n *\n * _.isObject(_.noop);\n * // => true\n *\n * _.isObject(null);\n * // => false\n */\nfunction isObject(value) {\n  var type = typeof value;\n  return value != null && (type == 'object' || type == 'function');\n}\n\n/**\n * Checks if `value` is object-like. A value is object-like if it's not `null`\n * and has a `typeof` result of \"object\".\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is object-like, else `false`.\n * @example\n *\n * _.isObjectLike({});\n * // => true\n *\n * _.isObjectLike([1, 2, 3]);\n * // => true\n *\n * _.isObjectLike(_.noop);\n * // => false\n *\n * _.isObjectLike(null);\n * // => false\n */\nfunction isObjectLike(value) {\n  return value != null && typeof value == 'object';\n}\n\n/**\n * Checks if `value` is classified as a typed array.\n *\n * @static\n * @memberOf _\n * @since 3.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a typed array, else `false`.\n * @example\n *\n * _.isTypedArray(new Uint8Array);\n * // => true\n *\n * _.isTypedArray([]);\n * // => false\n */\nvar isTypedArray = nodeIsTypedArray ? baseUnary(nodeIsTypedArray) : baseIsTypedArray;\n\n/**\n * Creates an array of the own enumerable property names of `object`.\n *\n * **Note:** Non-object values are coerced to objects. See the\n * [ES spec](http://ecma-international.org/ecma-262/7.0/#sec-object.keys)\n * for more details.\n *\n * @static\n * @since 0.1.0\n * @memberOf _\n * @category Object\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n * @example\n *\n * function Foo() {\n *   this.a = 1;\n *   this.b = 2;\n * }\n *\n * Foo.prototype.c = 3;\n *\n * _.keys(new Foo);\n * // => ['a', 'b'] (iteration order is not guaranteed)\n *\n * _.keys('hi');\n * // => ['0', '1']\n */\nfunction keys(object) {\n  return isArrayLike(object) ? arrayLikeKeys(object) : baseKeys(object);\n}\n\n/**\n * This method returns a new empty array.\n *\n * @static\n * @memberOf _\n * @since 4.13.0\n * @category Util\n * @returns {Array} Returns the new empty array.\n * @example\n *\n * var arrays = _.times(2, _.stubArray);\n *\n * console.log(arrays);\n * // => [[], []]\n *\n * console.log(arrays[0] === arrays[1]);\n * // => false\n */\nfunction stubArray() {\n  return [];\n}\n\n/**\n * This method returns `false`.\n *\n * @static\n * @memberOf _\n * @since 4.13.0\n * @category Util\n * @returns {boolean} Returns `false`.\n * @example\n *\n * _.times(2, _.stubFalse);\n * // => [false, false]\n */\nfunction stubFalse() {\n  return false;\n}\n\nmodule.exports = isEqual;\n\n}).call(this,typeof global !== \"undefined\" ? global : typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {})\n},{}],16:[function(require,module,exports){\n'use strict';\n\nmodule.exports = Point;\n\n/**\n * A standalone point geometry with useful accessor, comparison, and\n * modification methods.\n *\n * @class Point\n * @param {Number} x the x-coordinate. this could be longitude or screen\n * pixels, or any other sort of unit.\n * @param {Number} y the y-coordinate. this could be latitude or screen\n * pixels, or any other sort of unit.\n * @example\n * var point = new Point(-77, 38);\n */\nfunction Point(x, y) {\n    this.x = x;\n    this.y = y;\n}\n\nPoint.prototype = {\n\n    /**\n     * Clone this point, returning a new point that can be modified\n     * without affecting the old one.\n     * @return {Point} the clone\n     */\n    clone: function() { return new Point(this.x, this.y); },\n\n    /**\n     * Add this point's x & y coordinates to another point,\n     * yielding a new point.\n     * @param {Point} p the other point\n     * @return {Point} output point\n     */\n    add:     function(p) { return this.clone()._add(p); },\n\n    /**\n     * Subtract this point's x & y coordinates to from point,\n     * yielding a new point.\n     * @param {Point} p the other point\n     * @return {Point} output point\n     */\n    sub:     function(p) { return this.clone()._sub(p); },\n\n    /**\n     * Multiply this point's x & y coordinates by point,\n     * yielding a new point.\n     * @param {Point} p the other point\n     * @return {Point} output point\n     */\n    multByPoint:    function(p) { return this.clone()._multByPoint(p); },\n\n    /**\n     * Divide this point's x & y coordinates by point,\n     * yielding a new point.\n     * @param {Point} p the other point\n     * @return {Point} output point\n     */\n    divByPoint:     function(p) { return this.clone()._divByPoint(p); },\n\n    /**\n     * Multiply this point's x & y coordinates by a factor,\n     * yielding a new point.\n     * @param {Point} k factor\n     * @return {Point} output point\n     */\n    mult:    function(k) { return this.clone()._mult(k); },\n\n    /**\n     * Divide this point's x & y coordinates by a factor,\n     * yielding a new point.\n     * @param {Point} k factor\n     * @return {Point} output point\n     */\n    div:     function(k) { return this.clone()._div(k); },\n\n    /**\n     * Rotate this point around the 0, 0 origin by an angle a,\n     * given in radians\n     * @param {Number} a angle to rotate around, in radians\n     * @return {Point} output point\n     */\n    rotate:  function(a) { return this.clone()._rotate(a); },\n\n    /**\n     * Rotate this point around p point by an angle a,\n     * given in radians\n     * @param {Number} a angle to rotate around, in radians\n     * @param {Point} p Point to rotate around\n     * @return {Point} output point\n     */\n    rotateAround:  function(a,p) { return this.clone()._rotateAround(a,p); },\n\n    /**\n     * Multiply this point by a 4x1 transformation matrix\n     * @param {Array<Number>} m transformation matrix\n     * @return {Point} output point\n     */\n    matMult: function(m) { return this.clone()._matMult(m); },\n\n    /**\n     * Calculate this point but as a unit vector from 0, 0, meaning\n     * that the distance from the resulting point to the 0, 0\n     * coordinate will be equal to 1 and the angle from the resulting\n     * point to the 0, 0 coordinate will be the same as before.\n     * @return {Point} unit vector point\n     */\n    unit:    function() { return this.clone()._unit(); },\n\n    /**\n     * Compute a perpendicular point, where the new y coordinate\n     * is the old x coordinate and the new x coordinate is the old y\n     * coordinate multiplied by -1\n     * @return {Point} perpendicular point\n     */\n    perp:    function() { return this.clone()._perp(); },\n\n    /**\n     * Return a version of this point with the x & y coordinates\n     * rounded to integers.\n     * @return {Point} rounded point\n     */\n    round:   function() { return this.clone()._round(); },\n\n    /**\n     * Return the magitude of this point: this is the Euclidean\n     * distance from the 0, 0 coordinate to this point's x and y\n     * coordinates.\n     * @return {Number} magnitude\n     */\n    mag: function() {\n        return Math.sqrt(this.x * this.x + this.y * this.y);\n    },\n\n    /**\n     * Judge whether this point is equal to another point, returning\n     * true or false.\n     * @param {Point} other the other point\n     * @return {boolean} whether the points are equal\n     */\n    equals: function(other) {\n        return this.x === other.x &&\n               this.y === other.y;\n    },\n\n    /**\n     * Calculate the distance from this point to another point\n     * @param {Point} p the other point\n     * @return {Number} distance\n     */\n    dist: function(p) {\n        return Math.sqrt(this.distSqr(p));\n    },\n\n    /**\n     * Calculate the distance from this point to another point,\n     * without the square root step. Useful if you're comparing\n     * relative distances.\n     * @param {Point} p the other point\n     * @return {Number} distance\n     */\n    distSqr: function(p) {\n        var dx = p.x - this.x,\n            dy = p.y - this.y;\n        return dx * dx + dy * dy;\n    },\n\n    /**\n     * Get the angle from the 0, 0 coordinate to this point, in radians\n     * coordinates.\n     * @return {Number} angle\n     */\n    angle: function() {\n        return Math.atan2(this.y, this.x);\n    },\n\n    /**\n     * Get the angle from this point to another point, in radians\n     * @param {Point} b the other point\n     * @return {Number} angle\n     */\n    angleTo: function(b) {\n        return Math.atan2(this.y - b.y, this.x - b.x);\n    },\n\n    /**\n     * Get the angle between this point and another point, in radians\n     * @param {Point} b the other point\n     * @return {Number} angle\n     */\n    angleWith: function(b) {\n        return this.angleWithSep(b.x, b.y);\n    },\n\n    /*\n     * Find the angle of the two vectors, solving the formula for\n     * the cross product a x b = |a||b|sin(θ) for θ.\n     * @param {Number} x the x-coordinate\n     * @param {Number} y the y-coordinate\n     * @return {Number} the angle in radians\n     */\n    angleWithSep: function(x, y) {\n        return Math.atan2(\n            this.x * y - this.y * x,\n            this.x * x + this.y * y);\n    },\n\n    _matMult: function(m) {\n        var x = m[0] * this.x + m[1] * this.y,\n            y = m[2] * this.x + m[3] * this.y;\n        this.x = x;\n        this.y = y;\n        return this;\n    },\n\n    _add: function(p) {\n        this.x += p.x;\n        this.y += p.y;\n        return this;\n    },\n\n    _sub: function(p) {\n        this.x -= p.x;\n        this.y -= p.y;\n        return this;\n    },\n\n    _mult: function(k) {\n        this.x *= k;\n        this.y *= k;\n        return this;\n    },\n\n    _div: function(k) {\n        this.x /= k;\n        this.y /= k;\n        return this;\n    },\n\n    _multByPoint: function(p) {\n        this.x *= p.x;\n        this.y *= p.y;\n        return this;\n    },\n\n    _divByPoint: function(p) {\n        this.x /= p.x;\n        this.y /= p.y;\n        return this;\n    },\n\n    _unit: function() {\n        this._div(this.mag());\n        return this;\n    },\n\n    _perp: function() {\n        var y = this.y;\n        this.y = this.x;\n        this.x = -y;\n        return this;\n    },\n\n    _rotate: function(angle) {\n        var cos = Math.cos(angle),\n            sin = Math.sin(angle),\n            x = cos * this.x - sin * this.y,\n            y = sin * this.x + cos * this.y;\n        this.x = x;\n        this.y = y;\n        return this;\n    },\n\n    _rotateAround: function(angle, p) {\n        var cos = Math.cos(angle),\n            sin = Math.sin(angle),\n            x = p.x + cos * (this.x - p.x) - sin * (this.y - p.y),\n            y = p.y + sin * (this.x - p.x) + cos * (this.y - p.y);\n        this.x = x;\n        this.y = y;\n        return this;\n    },\n\n    _round: function() {\n        this.x = Math.round(this.x);\n        this.y = Math.round(this.y);\n        return this;\n    }\n};\n\n/**\n * Construct a point from an array if necessary, otherwise if the input\n * is already a Point, or an unknown type, return it unchanged\n * @param {Array<Number>|Point|*} a any kind of input value\n * @return {Point} constructed point, or passed-through value.\n * @example\n * // this\n * var point = Point.convert([0, 1]);\n * // is equivalent to\n * var point = new Point(0, 1);\n */\nPoint.convert = function (a) {\n    if (a instanceof Point) {\n        return a;\n    }\n    if (Array.isArray(a)) {\n        return new Point(a[0], a[1]);\n    }\n    return a;\n};\n\n},{}],17:[function(require,module,exports){\nvar traverse = module.exports = function (obj) {\n    return new Traverse(obj);\n};\n\nfunction Traverse (obj) {\n    this.value = obj;\n}\n\nTraverse.prototype.get = function (ps) {\n    var node = this.value;\n    for (var i = 0; i < ps.length; i ++) {\n        var key = ps[i];\n        if (!node || !hasOwnProperty.call(node, key)) {\n            node = undefined;\n            break;\n        }\n        node = node[key];\n    }\n    return node;\n};\n\nTraverse.prototype.has = function (ps) {\n    var node = this.value;\n    for (var i = 0; i < ps.length; i ++) {\n        var key = ps[i];\n        if (!node || !hasOwnProperty.call(node, key)) {\n            return false;\n        }\n        node = node[key];\n    }\n    return true;\n};\n\nTraverse.prototype.set = function (ps, value) {\n    var node = this.value;\n    for (var i = 0; i < ps.length - 1; i ++) {\n        var key = ps[i];\n        if (!hasOwnProperty.call(node, key)) node[key] = {};\n        node = node[key];\n    }\n    node[ps[i]] = value;\n    return value;\n};\n\nTraverse.prototype.map = function (cb) {\n    return walk(this.value, cb, true);\n};\n\nTraverse.prototype.forEach = function (cb) {\n    this.value = walk(this.value, cb, false);\n    return this.value;\n};\n\nTraverse.prototype.reduce = function (cb, init) {\n    var skip = arguments.length === 1;\n    var acc = skip ? this.value : init;\n    this.forEach(function (x) {\n        if (!this.isRoot || !skip) {\n            acc = cb.call(this, acc, x);\n        }\n    });\n    return acc;\n};\n\nTraverse.prototype.paths = function () {\n    var acc = [];\n    this.forEach(function (x) {\n        acc.push(this.path); \n    });\n    return acc;\n};\n\nTraverse.prototype.nodes = function () {\n    var acc = [];\n    this.forEach(function (x) {\n        acc.push(this.node);\n    });\n    return acc;\n};\n\nTraverse.prototype.clone = function () {\n    var parents = [], nodes = [];\n    \n    return (function clone (src) {\n        for (var i = 0; i < parents.length; i++) {\n            if (parents[i] === src) {\n                return nodes[i];\n            }\n        }\n        \n        if (typeof src === 'object' && src !== null) {\n            var dst = copy(src);\n            \n            parents.push(src);\n            nodes.push(dst);\n            \n            forEach(objectKeys(src), function (key) {\n                dst[key] = clone(src[key]);\n            });\n            \n            parents.pop();\n            nodes.pop();\n            return dst;\n        }\n        else {\n            return src;\n        }\n    })(this.value);\n};\n\nfunction walk (root, cb, immutable) {\n    var path = [];\n    var parents = [];\n    var alive = true;\n    \n    return (function walker (node_) {\n        var node = immutable ? copy(node_) : node_;\n        var modifiers = {};\n        \n        var keepGoing = true;\n        \n        var state = {\n            node : node,\n            node_ : node_,\n            path : [].concat(path),\n            parent : parents[parents.length - 1],\n            parents : parents,\n            key : path.slice(-1)[0],\n            isRoot : path.length === 0,\n            level : path.length,\n            circular : null,\n            update : function (x, stopHere) {\n                if (!state.isRoot) {\n                    state.parent.node[state.key] = x;\n                }\n                state.node = x;\n                if (stopHere) keepGoing = false;\n            },\n            'delete' : function (stopHere) {\n                delete state.parent.node[state.key];\n                if (stopHere) keepGoing = false;\n            },\n            remove : function (stopHere) {\n                if (isArray(state.parent.node)) {\n                    state.parent.node.splice(state.key, 1);\n                }\n                else {\n                    delete state.parent.node[state.key];\n                }\n                if (stopHere) keepGoing = false;\n            },\n            keys : null,\n            before : function (f) { modifiers.before = f },\n            after : function (f) { modifiers.after = f },\n            pre : function (f) { modifiers.pre = f },\n            post : function (f) { modifiers.post = f },\n            stop : function () { alive = false },\n            block : function () { keepGoing = false }\n        };\n        \n        if (!alive) return state;\n        \n        function updateState() {\n            if (typeof state.node === 'object' && state.node !== null) {\n                if (!state.keys || state.node_ !== state.node) {\n                    state.keys = objectKeys(state.node)\n                }\n                \n                state.isLeaf = state.keys.length == 0;\n                \n                for (var i = 0; i < parents.length; i++) {\n                    if (parents[i].node_ === node_) {\n                        state.circular = parents[i];\n                        break;\n                    }\n                }\n            }\n            else {\n                state.isLeaf = true;\n                state.keys = null;\n            }\n            \n            state.notLeaf = !state.isLeaf;\n            state.notRoot = !state.isRoot;\n        }\n        \n        updateState();\n        \n        // use return values to update if defined\n        var ret = cb.call(state, state.node);\n        if (ret !== undefined && state.update) state.update(ret);\n        \n        if (modifiers.before) modifiers.before.call(state, state.node);\n        \n        if (!keepGoing) return state;\n        \n        if (typeof state.node == 'object'\n        && state.node !== null && !state.circular) {\n            parents.push(state);\n            \n            updateState();\n            \n            forEach(state.keys, function (key, i) {\n                path.push(key);\n                \n                if (modifiers.pre) modifiers.pre.call(state, state.node[key], key);\n                \n                var child = walker(state.node[key]);\n                if (immutable && hasOwnProperty.call(state.node, key)) {\n                    state.node[key] = child.node;\n                }\n                \n                child.isLast = i == state.keys.length - 1;\n                child.isFirst = i == 0;\n                \n                if (modifiers.post) modifiers.post.call(state, child);\n                \n                path.pop();\n            });\n            parents.pop();\n        }\n        \n        if (modifiers.after) modifiers.after.call(state, state.node);\n        \n        return state;\n    })(root).node;\n}\n\nfunction copy (src) {\n    if (typeof src === 'object' && src !== null) {\n        var dst;\n        \n        if (isArray(src)) {\n            dst = [];\n        }\n        else if (isDate(src)) {\n            dst = new Date(src.getTime ? src.getTime() : src);\n        }\n        else if (isRegExp(src)) {\n            dst = new RegExp(src);\n        }\n        else if (isError(src)) {\n            dst = { message: src.message };\n        }\n        else if (isBoolean(src)) {\n            dst = new Boolean(src);\n        }\n        else if (isNumber(src)) {\n            dst = new Number(src);\n        }\n        else if (isString(src)) {\n            dst = new String(src);\n        }\n        else if (Object.create && Object.getPrototypeOf) {\n            dst = Object.create(Object.getPrototypeOf(src));\n        }\n        else if (src.constructor === Object) {\n            dst = {};\n        }\n        else {\n            var proto =\n                (src.constructor && src.constructor.prototype)\n                || src.__proto__\n                || {}\n            ;\n            var T = function () {};\n            T.prototype = proto;\n            dst = new T;\n        }\n        \n        forEach(objectKeys(src), function (key) {\n            dst[key] = src[key];\n        });\n        return dst;\n    }\n    else return src;\n}\n\nvar objectKeys = Object.keys || function keys (obj) {\n    var res = [];\n    for (var key in obj) res.push(key)\n    return res;\n};\n\nfunction toS (obj) { return Object.prototype.toString.call(obj) }\nfunction isDate (obj) { return toS(obj) === '[object Date]' }\nfunction isRegExp (obj) { return toS(obj) === '[object RegExp]' }\nfunction isError (obj) { return toS(obj) === '[object Error]' }\nfunction isBoolean (obj) { return toS(obj) === '[object Boolean]' }\nfunction isNumber (obj) { return toS(obj) === '[object Number]' }\nfunction isString (obj) { return toS(obj) === '[object String]' }\n\nvar isArray = Array.isArray || function isArray (xs) {\n    return Object.prototype.toString.call(xs) === '[object Array]';\n};\n\nvar forEach = function (xs, fn) {\n    if (xs.forEach) return xs.forEach(fn)\n    else for (var i = 0; i < xs.length; i++) {\n        fn(xs[i], i, xs);\n    }\n};\n\nforEach(objectKeys(Traverse.prototype), function (key) {\n    traverse[key] = function (obj) {\n        var args = [].slice.call(arguments, 1);\n        var t = new Traverse(obj);\n        return t[key].apply(t, args);\n    };\n});\n\nvar hasOwnProperty = Object.hasOwnProperty || function (obj, key) {\n    return key in obj;\n};\n\n},{}],18:[function(require,module,exports){\nmodule.exports.RADIUS = 6378137;\nmodule.exports.FLATTENING = 1/298.257223563;\nmodule.exports.POLAR_RADIUS = 6356752.3142;\n\n},{}],19:[function(require,module,exports){\nmodule.exports = extend\n\nvar hasOwnProperty = Object.prototype.hasOwnProperty;\n\nfunction extend() {\n    var target = {}\n\n    for (var i = 0; i < arguments.length; i++) {\n        var source = arguments[i]\n\n        for (var key in source) {\n            if (hasOwnProperty.call(source, key)) {\n                target[key] = source[key]\n            }\n        }\n    }\n\n    return target\n}\n\n},{}],20:[function(require,module,exports){\n'use strict';\n\nvar isEqual = require('lodash.isequal');\nvar normalize = require('@mapbox/geojson-normalize');\nvar hat = require('hat');\nvar featuresAt = require('./lib/features_at');\nvar stringSetsAreEqual = require('./lib/string_sets_are_equal');\nvar geojsonhint = require('@mapbox/geojsonhint');\nvar Constants = require('./constants');\nvar StringSet = require('./lib/string_set');\n\nvar featureTypes = {\n  Polygon: require('./feature_types/polygon'),\n  LineString: require('./feature_types/line_string'),\n  Point: require('./feature_types/point'),\n  MultiPolygon: require('./feature_types/multi_feature'),\n  MultiLineString: require('./feature_types/multi_feature'),\n  MultiPoint: require('./feature_types/multi_feature')\n};\n\nmodule.exports = function (ctx, api) {\n\n  api.modes = Constants.modes;\n\n  api.getFeatureIdsAt = function (point) {\n    var features = featuresAt.click({ point: point }, null, ctx);\n    return features.map(function (feature) {\n      return feature.properties.id;\n    });\n  };\n\n  api.getSelectedIds = function () {\n    return ctx.store.getSelectedIds();\n  };\n\n  api.getSelected = function () {\n    return {\n      type: Constants.geojsonTypes.FEATURE_COLLECTION,\n      features: ctx.store.getSelectedIds().map(function (id) {\n        return ctx.store.get(id);\n      }).map(function (feature) {\n        return feature.toGeoJSON();\n      })\n    };\n  };\n\n  api.getSelectedPoints = function () {\n    return {\n      type: Constants.geojsonTypes.FEATURE_COLLECTION,\n      features: ctx.store.getSelectedCoordinates().map(function (coordinate) {\n        return {\n          type: Constants.geojsonTypes.FEATURE,\n          properties: {},\n          geometry: {\n            type: Constants.geojsonTypes.POINT,\n            coordinates: coordinate.coordinates\n          }\n        };\n      })\n    };\n  };\n\n  api.set = function (featureCollection) {\n    if (featureCollection.type === undefined || featureCollection.type !== Constants.geojsonTypes.FEATURE_COLLECTION || !Array.isArray(featureCollection.features)) {\n      throw new Error('Invalid FeatureCollection');\n    }\n    var renderBatch = ctx.store.createRenderBatch();\n    var toDelete = ctx.store.getAllIds().slice();\n    var newIds = api.add(featureCollection);\n    var newIdsLookup = new StringSet(newIds);\n\n    toDelete = toDelete.filter(function (id) {\n      return !newIdsLookup.has(id);\n    });\n    if (toDelete.length) {\n      api.delete(toDelete);\n    }\n\n    renderBatch();\n    return newIds;\n  };\n\n  api.add = function (geojson) {\n    var errors = geojsonhint.hint(geojson, { precisionWarning: false }).filter(function (e) {\n      return e.level !== 'message';\n    });\n    if (errors.length) {\n      throw new Error(errors[0].message);\n    }\n    var featureCollection = JSON.parse(JSON.stringify(normalize(geojson)));\n\n    var ids = featureCollection.features.map(function (feature) {\n      feature.id = feature.id || hat();\n\n      if (feature.geometry === null) {\n        throw new Error('Invalid geometry: null');\n      }\n\n      if (ctx.store.get(feature.id) === undefined || ctx.store.get(feature.id).type !== feature.geometry.type) {\n        // If the feature has not yet been created ...\n        var Model = featureTypes[feature.geometry.type];\n        if (Model === undefined) {\n          throw new Error('Invalid geometry type: ' + feature.geometry.type + '.');\n        }\n        var internalFeature = new Model(ctx, feature);\n        ctx.store.add(internalFeature);\n      } else {\n        // If a feature of that id has already been created, and we are swapping it out ...\n        var _internalFeature = ctx.store.get(feature.id);\n        _internalFeature.properties = feature.properties;\n        if (!isEqual(_internalFeature.getCoordinates(), feature.geometry.coordinates)) {\n          _internalFeature.incomingCoords(feature.geometry.coordinates);\n        }\n      }\n      return feature.id;\n    });\n\n    ctx.store.render();\n    return ids;\n  };\n\n  api.get = function (id) {\n    var feature = ctx.store.get(id);\n    if (feature) {\n      return feature.toGeoJSON();\n    }\n  };\n\n  api.getAll = function () {\n    return {\n      type: Constants.geojsonTypes.FEATURE_COLLECTION,\n      features: ctx.store.getAll().map(function (feature) {\n        return feature.toGeoJSON();\n      })\n    };\n  };\n\n  api.delete = function (featureIds) {\n    ctx.store.delete(featureIds, { silent: true });\n    // If we were in direct select mode and our selected feature no longer exists\n    // (because it was deleted), we need to get out of that mode.\n    if (api.getMode() === Constants.modes.DIRECT_SELECT && !ctx.store.getSelectedIds().length) {\n      ctx.events.changeMode(Constants.modes.SIMPLE_SELECT, undefined, { silent: true });\n    } else {\n      ctx.store.render();\n    }\n\n    return api;\n  };\n\n  api.deleteAll = function () {\n    ctx.store.delete(ctx.store.getAllIds(), { silent: true });\n    // If we were in direct select mode, now our selected feature no longer exists,\n    // so escape that mode.\n    if (api.getMode() === Constants.modes.DIRECT_SELECT) {\n      ctx.events.changeMode(Constants.modes.SIMPLE_SELECT, undefined, { silent: true });\n    } else {\n      ctx.store.render();\n    }\n\n    return api;\n  };\n\n  api.changeMode = function (mode) {\n    var modeOptions = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n    // Avoid changing modes just to re-select what's already selected\n    if (mode === Constants.modes.SIMPLE_SELECT && api.getMode() === Constants.modes.SIMPLE_SELECT) {\n      if (stringSetsAreEqual(modeOptions.featureIds || [], ctx.store.getSelectedIds())) return api;\n      // And if we are changing the selection within simple_select mode, just change the selection,\n      // instead of stopping and re-starting the mode\n      ctx.store.setSelected(modeOptions.featureIds, { silent: true });\n      ctx.store.render();\n      return api;\n    }\n\n    if (mode === Constants.modes.DIRECT_SELECT && api.getMode() === Constants.modes.DIRECT_SELECT && modeOptions.featureId === ctx.store.getSelectedIds()[0]) {\n      return api;\n    }\n\n    ctx.events.changeMode(mode, modeOptions, { silent: true });\n    return api;\n  };\n\n  api.getMode = function () {\n    return ctx.events.getMode();\n  };\n\n  api.trash = function () {\n    ctx.events.trash({ silent: true });\n    return api;\n  };\n\n  api.combineFeatures = function () {\n    ctx.events.combineFeatures({ silent: true });\n    return api;\n  };\n\n  api.uncombineFeatures = function () {\n    ctx.events.uncombineFeatures({ silent: true });\n    return api;\n  };\n\n  api.setFeatureProperty = function (featureId, property, value) {\n    ctx.store.setFeatureProperty(featureId, property, value);\n    return api;\n  };\n\n  return api;\n};\n\n},{\"./constants\":21,\"./feature_types/line_string\":24,\"./feature_types/multi_feature\":25,\"./feature_types/point\":26,\"./feature_types/polygon\":27,\"./lib/features_at\":35,\"./lib/string_set\":45,\"./lib/string_sets_are_equal\":46,\"@mapbox/geojson-normalize\":3,\"@mapbox/geojsonhint\":4,\"hat\":13,\"lodash.isequal\":15}],21:[function(require,module,exports){\n'use strict';\n\nmodule.exports = {\n  classes: {\n    CONTROL_BASE: 'mapboxgl-ctrl',\n    CONTROL_PREFIX: 'mapboxgl-ctrl-',\n    CONTROL_BUTTON: 'mapbox-gl-draw_ctrl-draw-btn',\n    CONTROL_BUTTON_LINE: 'mapbox-gl-draw_line',\n    CONTROL_BUTTON_POLYGON: 'mapbox-gl-draw_polygon',\n    CONTROL_BUTTON_POINT: 'mapbox-gl-draw_point',\n    CONTROL_BUTTON_TRASH: 'mapbox-gl-draw_trash',\n    CONTROL_BUTTON_COMBINE_FEATURES: 'mapbox-gl-draw_combine',\n    CONTROL_BUTTON_UNCOMBINE_FEATURES: 'mapbox-gl-draw_uncombine',\n    CONTROL_GROUP: 'mapboxgl-ctrl-group',\n    ATTRIBUTION: 'mapboxgl-ctrl-attrib',\n    ACTIVE_BUTTON: 'active',\n    BOX_SELECT: 'mapbox-gl-draw_boxselect'\n  },\n  sources: {\n    HOT: 'mapbox-gl-draw-hot',\n    COLD: 'mapbox-gl-draw-cold'\n  },\n  cursors: {\n    ADD: 'add',\n    MOVE: 'move',\n    DRAG: 'drag',\n    POINTER: 'pointer',\n    NONE: 'none'\n  },\n  types: {\n    POLYGON: 'polygon',\n    LINE: 'line_string',\n    POINT: 'point'\n  },\n  geojsonTypes: {\n    FEATURE: 'Feature',\n    POLYGON: 'Polygon',\n    LINE_STRING: 'LineString',\n    POINT: 'Point',\n    FEATURE_COLLECTION: 'FeatureCollection',\n    MULTI_PREFIX: 'Multi',\n    MULTI_POINT: 'MultiPoint',\n    MULTI_LINE_STRING: 'MultiLineString',\n    MULTI_POLYGON: 'MultiPolygon'\n  },\n  modes: {\n    DRAW_LINE_STRING: 'draw_line_string',\n    DRAW_POLYGON: 'draw_polygon',\n    DRAW_POINT: 'draw_point',\n    SIMPLE_SELECT: 'simple_select',\n    DIRECT_SELECT: 'direct_select',\n    STATIC: 'static'\n  },\n  events: {\n    CREATE: 'draw.create',\n    DELETE: 'draw.delete',\n    UPDATE: 'draw.update',\n    SELECTION_CHANGE: 'draw.selectionchange',\n    MODE_CHANGE: 'draw.modechange',\n    ACTIONABLE: 'draw.actionable',\n    RENDER: 'draw.render',\n    COMBINE_FEATURES: 'draw.combine',\n    UNCOMBINE_FEATURES: 'draw.uncombine'\n  },\n  updateActions: {\n    MOVE: 'move',\n    CHANGE_COORDINATES: 'change_coordinates'\n  },\n  meta: {\n    FEATURE: 'feature',\n    MIDPOINT: 'midpoint',\n    VERTEX: 'vertex'\n  },\n  activeStates: {\n    ACTIVE: 'true',\n    INACTIVE: 'false'\n  },\n  LAT_MIN: -90,\n  LAT_RENDERED_MIN: -85,\n  LAT_MAX: 90,\n  LAT_RENDERED_MAX: 85,\n  LNG_MIN: -270,\n  LNG_MAX: 270\n};\n\n},{}],22:[function(require,module,exports){\n'use strict';\n\nvar setupModeHandler = require('./lib/mode_handler');\nvar getFeaturesAndSetCursor = require('./lib/get_features_and_set_cursor');\nvar featuresAt = require('./lib/features_at');\nvar isClick = require('./lib/is_click');\nvar isTap = require('./lib/is_tap');\nvar Constants = require('./constants');\nvar objectToMode = require('./modes/object_to_mode');\n\nmodule.exports = function (ctx) {\n\n  var modes = Object.keys(ctx.options.modes).reduce(function (m, k) {\n    m[k] = objectToMode(ctx.options.modes[k]);\n    return m;\n  }, {});\n\n  var mouseDownInfo = {};\n  var touchStartInfo = {};\n  var events = {};\n  var _currentModeName = null;\n  var currentMode = null;\n\n  events.drag = function (event, isDrag) {\n    if (isDrag({\n      point: event.point,\n      time: new Date().getTime()\n    })) {\n      ctx.ui.queueMapClasses({ mouse: Constants.cursors.DRAG });\n      currentMode.drag(event);\n    } else {\n      event.originalEvent.stopPropagation();\n    }\n  };\n\n  events.mousedrag = function (event) {\n    events.drag(event, function (endInfo) {\n      return !isClick(mouseDownInfo, endInfo);\n    });\n  };\n\n  events.touchdrag = function (event) {\n    events.drag(event, function (endInfo) {\n      return !isTap(touchStartInfo, endInfo);\n    });\n  };\n\n  events.mousemove = function (event) {\n    var button = event.originalEvent.buttons !== undefined ? event.originalEvent.buttons : event.originalEvent.which;\n    if (button === 1) {\n      return events.mousedrag(event);\n    }\n    var target = getFeaturesAndSetCursor(event, ctx);\n    event.featureTarget = target;\n    currentMode.mousemove(event);\n  };\n\n  events.mousedown = function (event) {\n    mouseDownInfo = {\n      time: new Date().getTime(),\n      point: event.point\n    };\n    var target = getFeaturesAndSetCursor(event, ctx);\n    event.featureTarget = target;\n    currentMode.mousedown(event);\n  };\n\n  events.mouseup = function (event) {\n    var target = getFeaturesAndSetCursor(event, ctx);\n    event.featureTarget = target;\n\n    if (isClick(mouseDownInfo, {\n      point: event.point,\n      time: new Date().getTime()\n    })) {\n      currentMode.click(event);\n    } else {\n      currentMode.mouseup(event);\n    }\n  };\n\n  events.mouseout = function (event) {\n    currentMode.mouseout(event);\n  };\n\n  events.touchstart = function (event) {\n    // Prevent emulated mouse events because we will fully handle the touch here.\n    // This does not stop the touch events from propogating to mapbox though.\n    event.originalEvent.preventDefault();\n    if (!ctx.options.touchEnabled) {\n      return;\n    }\n\n    touchStartInfo = {\n      time: new Date().getTime(),\n      point: event.point\n    };\n    var target = featuresAt.touch(event, null, ctx)[0];\n    event.featureTarget = target;\n    currentMode.touchstart(event);\n  };\n\n  events.touchmove = function (event) {\n    event.originalEvent.preventDefault();\n    if (!ctx.options.touchEnabled) {\n      return;\n    }\n\n    currentMode.touchmove(event);\n    return events.touchdrag(event);\n  };\n\n  events.touchend = function (event) {\n    event.originalEvent.preventDefault();\n    if (!ctx.options.touchEnabled) {\n      return;\n    }\n\n    var target = featuresAt.touch(event, null, ctx)[0];\n    event.featureTarget = target;\n    if (isTap(touchStartInfo, {\n      time: new Date().getTime(),\n      point: event.point\n    })) {\n      currentMode.tap(event);\n    } else {\n      currentMode.touchend(event);\n    }\n  };\n\n  // 8 - Backspace\n  // 46 - Delete\n  var isKeyModeValid = function isKeyModeValid(code) {\n    return !(code === 8 || code === 46 || code >= 48 && code <= 57);\n  };\n\n  events.keydown = function (event) {\n    if (event.srcElement.classList[0] !== 'mapboxgl-canvas') return; // we only handle events on the map\n\n    if ((event.keyCode === 8 || event.keyCode === 46) && ctx.options.controls.trash) {\n      event.preventDefault();\n      currentMode.trash();\n    } else if (isKeyModeValid(event.keyCode)) {\n      currentMode.keydown(event);\n    } else if (event.keyCode === 49 && ctx.options.controls.point) {\n      changeMode(Constants.modes.DRAW_POINT);\n    } else if (event.keyCode === 50 && ctx.options.controls.line_string) {\n      changeMode(Constants.modes.DRAW_LINE_STRING);\n    } else if (event.keyCode === 51 && ctx.options.controls.polygon) {\n      changeMode(Constants.modes.DRAW_POLYGON);\n    }\n  };\n\n  events.keyup = function (event) {\n    if (isKeyModeValid(event.keyCode)) {\n      currentMode.keyup(event);\n    }\n  };\n\n  events.zoomend = function () {\n    ctx.store.changeZoom();\n  };\n\n  events.data = function (event) {\n    if (event.dataType === 'style') {\n      var setup = ctx.setup,\n          map = ctx.map,\n          options = ctx.options,\n          store = ctx.store;\n\n      var hasLayers = options.styles.some(function (style) {\n        return map.getLayer(style.id);\n      });\n      if (!hasLayers) {\n        setup.addLayers();\n        store.setDirty();\n        store.render();\n      }\n    }\n  };\n\n  function changeMode(modename, nextModeOptions) {\n    var eventOptions = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n\n    currentMode.stop();\n\n    var modebuilder = modes[modename];\n    if (modebuilder === undefined) {\n      throw new Error(modename + ' is not valid');\n    }\n    _currentModeName = modename;\n    var mode = modebuilder(ctx, nextModeOptions);\n    currentMode = setupModeHandler(mode, ctx);\n\n    if (!eventOptions.silent) {\n      ctx.map.fire(Constants.events.MODE_CHANGE, { mode: modename });\n    }\n\n    ctx.store.setDirty();\n    ctx.store.render();\n  }\n\n  var actionState = {\n    trash: false,\n    combineFeatures: false,\n    uncombineFeatures: false\n  };\n\n  function actionable(actions) {\n    var changed = false;\n    Object.keys(actions).forEach(function (action) {\n      if (actionState[action] === undefined) throw new Error('Invalid action type');\n      if (actionState[action] !== actions[action]) changed = true;\n      actionState[action] = actions[action];\n    });\n    if (changed) ctx.map.fire(Constants.events.ACTIONABLE, { actions: actionState });\n  }\n\n  var api = {\n    start: function start() {\n      _currentModeName = ctx.options.defaultMode;\n      currentMode = setupModeHandler(modes[_currentModeName](ctx), ctx);\n    },\n    changeMode: changeMode,\n    actionable: actionable,\n    currentModeName: function currentModeName() {\n      return _currentModeName;\n    },\n    currentModeRender: function currentModeRender(geojson, push) {\n      return currentMode.render(geojson, push);\n    },\n    fire: function fire(name, event) {\n      if (events[name]) {\n        events[name](event);\n      }\n    },\n    addEventListeners: function addEventListeners() {\n      ctx.map.on('mousemove', events.mousemove);\n      ctx.map.on('mousedown', events.mousedown);\n      ctx.map.on('mouseup', events.mouseup);\n      ctx.map.on('data', events.data);\n\n      ctx.map.on('touchmove', events.touchmove);\n      ctx.map.on('touchstart', events.touchstart);\n      ctx.map.on('touchend', events.touchend);\n\n      ctx.container.addEventListener('mouseout', events.mouseout);\n\n      if (ctx.options.keybindings) {\n        ctx.container.addEventListener('keydown', events.keydown);\n        ctx.container.addEventListener('keyup', events.keyup);\n      }\n    },\n    removeEventListeners: function removeEventListeners() {\n      ctx.map.off('mousemove', events.mousemove);\n      ctx.map.off('mousedown', events.mousedown);\n      ctx.map.off('mouseup', events.mouseup);\n      ctx.map.off('data', events.data);\n\n      ctx.map.off('touchmove', events.touchmove);\n      ctx.map.off('touchstart', events.touchstart);\n      ctx.map.off('touchend', events.touchend);\n\n      ctx.container.removeEventListener('mouseout', events.mouseout);\n\n      if (ctx.options.keybindings) {\n        ctx.container.removeEventListener('keydown', events.keydown);\n        ctx.container.removeEventListener('keyup', events.keyup);\n      }\n    },\n    trash: function trash(options) {\n      currentMode.trash(options);\n    },\n    combineFeatures: function combineFeatures() {\n      currentMode.combineFeatures();\n    },\n    uncombineFeatures: function uncombineFeatures() {\n      currentMode.uncombineFeatures();\n    },\n    getMode: function getMode() {\n      return _currentModeName;\n    }\n  };\n\n  return api;\n};\n\n},{\"./constants\":21,\"./lib/features_at\":35,\"./lib/get_features_and_set_cursor\":36,\"./lib/is_click\":37,\"./lib/is_tap\":39,\"./lib/mode_handler\":41,\"./modes/object_to_mode\":57}],23:[function(require,module,exports){\n'use strict';\n\nvar hat = require('hat');\nvar Constants = require('../constants');\n\nvar Feature = function Feature(ctx, geojson) {\n  this.ctx = ctx;\n  this.properties = geojson.properties || {};\n  this.coordinates = geojson.geometry.coordinates;\n  this.id = geojson.id || hat();\n  this.type = geojson.geometry.type;\n};\n\nFeature.prototype.changed = function () {\n  this.ctx.store.featureChanged(this.id);\n};\n\nFeature.prototype.incomingCoords = function (coords) {\n  this.setCoordinates(coords);\n};\n\nFeature.prototype.setCoordinates = function (coords) {\n  this.coordinates = coords;\n  this.changed();\n};\n\nFeature.prototype.getCoordinates = function () {\n  return JSON.parse(JSON.stringify(this.coordinates));\n};\n\nFeature.prototype.setProperty = function (property, value) {\n  this.properties[property] = value;\n};\n\nFeature.prototype.toGeoJSON = function () {\n  return JSON.parse(JSON.stringify({\n    id: this.id,\n    type: Constants.geojsonTypes.FEATURE,\n    properties: this.properties,\n    geometry: {\n      coordinates: this.getCoordinates(),\n      type: this.type\n    }\n  }));\n};\n\nFeature.prototype.internal = function (mode) {\n  var properties = {\n    id: this.id,\n    meta: Constants.meta.FEATURE,\n    'meta:type': this.type,\n    active: Constants.activeStates.INACTIVE,\n    mode: mode\n  };\n\n  if (this.ctx.options.userProperties) {\n    for (var name in this.properties) {\n      properties['user_' + name] = this.properties[name];\n    }\n  }\n\n  return {\n    type: Constants.geojsonTypes.FEATURE,\n    properties: properties,\n    geometry: {\n      coordinates: this.getCoordinates(),\n      type: this.type\n    }\n  };\n};\n\nmodule.exports = Feature;\n\n},{\"../constants\":21,\"hat\":13}],24:[function(require,module,exports){\n'use strict';\n\nvar Feature = require('./feature');\n\nvar LineString = function LineString(ctx, geojson) {\n  Feature.call(this, ctx, geojson);\n};\n\nLineString.prototype = Object.create(Feature.prototype);\n\nLineString.prototype.isValid = function () {\n  return this.coordinates.length > 1;\n};\n\nLineString.prototype.addCoordinate = function (path, lng, lat) {\n  this.changed();\n  var id = parseInt(path, 10);\n  this.coordinates.splice(id, 0, [lng, lat]);\n};\n\nLineString.prototype.getCoordinate = function (path) {\n  var id = parseInt(path, 10);\n  return JSON.parse(JSON.stringify(this.coordinates[id]));\n};\n\nLineString.prototype.removeCoordinate = function (path) {\n  this.changed();\n  this.coordinates.splice(parseInt(path, 10), 1);\n};\n\nLineString.prototype.updateCoordinate = function (path, lng, lat) {\n  var id = parseInt(path, 10);\n  this.coordinates[id] = [lng, lat];\n  this.changed();\n};\n\nmodule.exports = LineString;\n\n},{\"./feature\":23}],25:[function(require,module,exports){\n'use strict';\n\nvar Feature = require('./feature');\nvar Constants = require('../constants');\nvar hat = require('hat');\n\nvar models = {\n  MultiPoint: require('./point'),\n  MultiLineString: require('./line_string'),\n  MultiPolygon: require('./polygon')\n};\n\nvar takeAction = function takeAction(features, action, path, lng, lat) {\n  var parts = path.split('.');\n  var idx = parseInt(parts[0], 10);\n  var tail = !parts[1] ? null : parts.slice(1).join('.');\n  return features[idx][action](tail, lng, lat);\n};\n\nvar MultiFeature = function MultiFeature(ctx, geojson) {\n  Feature.call(this, ctx, geojson);\n\n  delete this.coordinates;\n  this.model = models[geojson.geometry.type];\n  if (this.model === undefined) throw new TypeError(geojson.geometry.type + ' is not a valid type');\n  this.features = this._coordinatesToFeatures(geojson.geometry.coordinates);\n};\n\nMultiFeature.prototype = Object.create(Feature.prototype);\n\nMultiFeature.prototype._coordinatesToFeatures = function (coordinates) {\n  var _this = this;\n\n  var Model = this.model.bind(this);\n  return coordinates.map(function (coords) {\n    return new Model(_this.ctx, {\n      id: hat(),\n      type: Constants.geojsonTypes.FEATURE,\n      properties: {},\n      geometry: {\n        coordinates: coords,\n        type: _this.type.replace('Multi', '')\n      }\n    });\n  });\n};\n\nMultiFeature.prototype.isValid = function () {\n  return this.features.every(function (f) {\n    return f.isValid();\n  });\n};\n\nMultiFeature.prototype.setCoordinates = function (coords) {\n  this.features = this._coordinatesToFeatures(coords);\n  this.changed();\n};\n\nMultiFeature.prototype.getCoordinate = function (path) {\n  return takeAction(this.features, 'getCoordinate', path);\n};\n\nMultiFeature.prototype.getCoordinates = function () {\n  return JSON.parse(JSON.stringify(this.features.map(function (f) {\n    if (f.type === Constants.geojsonTypes.POLYGON) return f.getCoordinates();\n    return f.coordinates;\n  })));\n};\n\nMultiFeature.prototype.updateCoordinate = function (path, lng, lat) {\n  takeAction(this.features, 'updateCoordinate', path, lng, lat);\n  this.changed();\n};\n\nMultiFeature.prototype.addCoordinate = function (path, lng, lat) {\n  takeAction(this.features, 'addCoordinate', path, lng, lat);\n  this.changed();\n};\n\nMultiFeature.prototype.removeCoordinate = function (path) {\n  takeAction(this.features, 'removeCoordinate', path);\n  this.changed();\n};\n\nMultiFeature.prototype.getFeatures = function () {\n  return this.features;\n};\n\nmodule.exports = MultiFeature;\n\n},{\"../constants\":21,\"./feature\":23,\"./line_string\":24,\"./point\":26,\"./polygon\":27,\"hat\":13}],26:[function(require,module,exports){\n'use strict';\n\nvar Feature = require('./feature');\n\nvar Point = function Point(ctx, geojson) {\n  Feature.call(this, ctx, geojson);\n};\n\nPoint.prototype = Object.create(Feature.prototype);\n\nPoint.prototype.isValid = function () {\n  return typeof this.coordinates[0] === 'number' && typeof this.coordinates[1] === 'number';\n};\n\nPoint.prototype.updateCoordinate = function (pathOrLng, lngOrLat, lat) {\n  if (arguments.length === 3) {\n    this.coordinates = [lngOrLat, lat];\n  } else {\n    this.coordinates = [pathOrLng, lngOrLat];\n  }\n  this.changed();\n};\n\nPoint.prototype.getCoordinate = function () {\n  return this.getCoordinates();\n};\n\nmodule.exports = Point;\n\n},{\"./feature\":23}],27:[function(require,module,exports){\n'use strict';\n\nvar Feature = require('./feature');\n\nvar Polygon = function Polygon(ctx, geojson) {\n  Feature.call(this, ctx, geojson);\n  this.coordinates = this.coordinates.map(function (ring) {\n    return ring.slice(0, -1);\n  });\n};\n\nPolygon.prototype = Object.create(Feature.prototype);\n\nPolygon.prototype.isValid = function () {\n  if (this.coordinates.length === 0) return false;\n  return this.coordinates.every(function (ring) {\n    return ring.length > 2;\n  });\n};\n\n// Expects valid geoJSON polygon geometry: first and last positions must be equivalent.\nPolygon.prototype.incomingCoords = function (coords) {\n  this.coordinates = coords.map(function (ring) {\n    return ring.slice(0, -1);\n  });\n  this.changed();\n};\n\n// Does NOT expect valid geoJSON polygon geometry: first and last positions should not be equivalent.\nPolygon.prototype.setCoordinates = function (coords) {\n  this.coordinates = coords;\n  this.changed();\n};\n\nPolygon.prototype.addCoordinate = function (path, lng, lat) {\n  this.changed();\n  var ids = path.split('.').map(function (x) {\n    return parseInt(x, 10);\n  });\n\n  var ring = this.coordinates[ids[0]];\n\n  ring.splice(ids[1], 0, [lng, lat]);\n};\n\nPolygon.prototype.removeCoordinate = function (path) {\n  this.changed();\n  var ids = path.split('.').map(function (x) {\n    return parseInt(x, 10);\n  });\n  var ring = this.coordinates[ids[0]];\n  if (ring) {\n    ring.splice(ids[1], 1);\n    if (ring.length < 3) {\n      this.coordinates.splice(ids[0], 1);\n    }\n  }\n};\n\nPolygon.prototype.getCoordinate = function (path) {\n  var ids = path.split('.').map(function (x) {\n    return parseInt(x, 10);\n  });\n  var ring = this.coordinates[ids[0]];\n  return JSON.parse(JSON.stringify(ring[ids[1]]));\n};\n\nPolygon.prototype.getCoordinates = function () {\n  return this.coordinates.map(function (coords) {\n    return coords.concat([coords[0]]);\n  });\n};\n\nPolygon.prototype.updateCoordinate = function (path, lng, lat) {\n  this.changed();\n  var parts = path.split('.');\n  var ringId = parseInt(parts[0], 10);\n  var coordId = parseInt(parts[1], 10);\n\n  if (this.coordinates[ringId] === undefined) {\n    this.coordinates[ringId] = [];\n  }\n\n  this.coordinates[ringId][coordId] = [lng, lat];\n};\n\nmodule.exports = Polygon;\n\n},{\"./feature\":23}],28:[function(require,module,exports){\n'use strict';\n\nvar Constants = require('../constants');\n\nmodule.exports = {\n  isOfMetaType: function isOfMetaType(type) {\n    return function (e) {\n      var featureTarget = e.featureTarget;\n      if (!featureTarget) return false;\n      if (!featureTarget.properties) return false;\n      return featureTarget.properties.meta === type;\n    };\n  },\n  isShiftMousedown: function isShiftMousedown(e) {\n    if (!e.originalEvent) return false;\n    if (!e.originalEvent.shiftKey) return false;\n    return e.originalEvent.button === 0;\n  },\n  isActiveFeature: function isActiveFeature(e) {\n    if (!e.featureTarget) return false;\n    if (!e.featureTarget.properties) return false;\n    return e.featureTarget.properties.active === Constants.activeStates.ACTIVE && e.featureTarget.properties.meta === Constants.meta.FEATURE;\n  },\n  isInactiveFeature: function isInactiveFeature(e) {\n    if (!e.featureTarget) return false;\n    if (!e.featureTarget.properties) return false;\n    return e.featureTarget.properties.active === Constants.activeStates.INACTIVE && e.featureTarget.properties.meta === Constants.meta.FEATURE;\n  },\n  noTarget: function noTarget(e) {\n    return e.featureTarget === undefined;\n  },\n  isFeature: function isFeature(e) {\n    if (!e.featureTarget) return false;\n    if (!e.featureTarget.properties) return false;\n    return e.featureTarget.properties.meta === Constants.meta.FEATURE;\n  },\n  isVertex: function isVertex(e) {\n    var featureTarget = e.featureTarget;\n    if (!featureTarget) return false;\n    if (!featureTarget.properties) return false;\n    return featureTarget.properties.meta === Constants.meta.VERTEX;\n  },\n  isShiftDown: function isShiftDown(e) {\n    if (!e.originalEvent) return false;\n    return e.originalEvent.shiftKey === true;\n  },\n  isEscapeKey: function isEscapeKey(e) {\n    return e.keyCode === 27;\n  },\n  isEnterKey: function isEnterKey(e) {\n    return e.keyCode === 13;\n  },\n  true: function _true() {\n    return true;\n  }\n};\n\n},{\"../constants\":21}],29:[function(require,module,exports){\n'use strict';\n\nvar extent = require('geojson-extent');\nvar Constants = require('../constants');\n\nvar LAT_MIN = Constants.LAT_MIN,\n    LAT_MAX = Constants.LAT_MAX,\n    LAT_RENDERED_MIN = Constants.LAT_RENDERED_MIN,\n    LAT_RENDERED_MAX = Constants.LAT_RENDERED_MAX,\n    LNG_MIN = Constants.LNG_MIN,\n    LNG_MAX = Constants.LNG_MAX;\n\n// Ensure that we do not drag north-south far enough for\n// - any part of any feature to exceed the poles\n// - any feature to be completely lost in the space between the projection's\n//   edge and the poles, such that it couldn't be re-selected and moved back\n\nmodule.exports = function (geojsonFeatures, delta) {\n  // \"inner edge\" = a feature's latitude closest to the equator\n  var northInnerEdge = LAT_MIN;\n  var southInnerEdge = LAT_MAX;\n  // \"outer edge\" = a feature's latitude furthest from the equator\n  var northOuterEdge = LAT_MIN;\n  var southOuterEdge = LAT_MAX;\n\n  var westEdge = LNG_MAX;\n  var eastEdge = LNG_MIN;\n\n  geojsonFeatures.forEach(function (feature) {\n    var bounds = extent(feature);\n    var featureSouthEdge = bounds[1];\n    var featureNorthEdge = bounds[3];\n    var featureWestEdge = bounds[0];\n    var featureEastEdge = bounds[2];\n    if (featureSouthEdge > northInnerEdge) northInnerEdge = featureSouthEdge;\n    if (featureNorthEdge < southInnerEdge) southInnerEdge = featureNorthEdge;\n    if (featureNorthEdge > northOuterEdge) northOuterEdge = featureNorthEdge;\n    if (featureSouthEdge < southOuterEdge) southOuterEdge = featureSouthEdge;\n    if (featureWestEdge < westEdge) westEdge = featureWestEdge;\n    if (featureEastEdge > eastEdge) eastEdge = featureEastEdge;\n  });\n\n  // These changes are not mutually exclusive: we might hit the inner\n  // edge but also have hit the outer edge and therefore need\n  // another readjustment\n  var constrainedDelta = delta;\n  if (northInnerEdge + constrainedDelta.lat > LAT_RENDERED_MAX) {\n    constrainedDelta.lat = LAT_RENDERED_MAX - northInnerEdge;\n  }\n  if (northOuterEdge + constrainedDelta.lat > LAT_MAX) {\n    constrainedDelta.lat = LAT_MAX - northOuterEdge;\n  }\n  if (southInnerEdge + constrainedDelta.lat < LAT_RENDERED_MIN) {\n    constrainedDelta.lat = LAT_RENDERED_MIN - southInnerEdge;\n  }\n  if (southOuterEdge + constrainedDelta.lat < LAT_MIN) {\n    constrainedDelta.lat = LAT_MIN - southOuterEdge;\n  }\n  if (westEdge + constrainedDelta.lng <= LNG_MIN) {\n    constrainedDelta.lng += Math.ceil(Math.abs(constrainedDelta.lng) / 360) * 360;\n  }\n  if (eastEdge + constrainedDelta.lng >= LNG_MAX) {\n    constrainedDelta.lng -= Math.ceil(Math.abs(constrainedDelta.lng) / 360) * 360;\n  }\n\n  return constrainedDelta;\n};\n\n},{\"../constants\":21,\"geojson-extent\":10}],30:[function(require,module,exports){\n'use strict';\n\nvar Constants = require('../constants');\n\nmodule.exports = function (parent, startVertex, endVertex, map) {\n  var startCoord = startVertex.geometry.coordinates;\n  var endCoord = endVertex.geometry.coordinates;\n\n  // If a coordinate exceeds the projection, we can't calculate a midpoint,\n  // so run away\n  if (startCoord[1] > Constants.LAT_RENDERED_MAX || startCoord[1] < Constants.LAT_RENDERED_MIN || endCoord[1] > Constants.LAT_RENDERED_MAX || endCoord[1] < Constants.LAT_RENDERED_MIN) {\n    return null;\n  }\n\n  var ptA = map.project([startCoord[0], startCoord[1]]);\n  var ptB = map.project([endCoord[0], endCoord[1]]);\n  var mid = map.unproject([(ptA.x + ptB.x) / 2, (ptA.y + ptB.y) / 2]);\n\n  return {\n    type: Constants.geojsonTypes.FEATURE,\n    properties: {\n      meta: Constants.meta.MIDPOINT,\n      parent: parent,\n      lng: mid.lng,\n      lat: mid.lat,\n      coord_path: endVertex.properties.coord_path\n    },\n    geometry: {\n      type: Constants.geojsonTypes.POINT,\n      coordinates: [mid.lng, mid.lat]\n    }\n  };\n};\n\n},{\"../constants\":21}],31:[function(require,module,exports){\n'use strict';\n\nvar createVertex = require('./create_vertex');\nvar createMidpoint = require('./create_midpoint');\nvar Constants = require('../constants');\n\nfunction createSupplementaryPoints(geojson) {\n  var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  var basePath = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : null;\n  var _geojson$geometry = geojson.geometry,\n      type = _geojson$geometry.type,\n      coordinates = _geojson$geometry.coordinates;\n\n  var featureId = geojson.properties && geojson.properties.id;\n\n  var supplementaryPoints = [];\n\n  if (type === Constants.geojsonTypes.POINT) {\n    // For points, just create a vertex\n    supplementaryPoints.push(createVertex(featureId, coordinates, basePath, isSelectedPath(basePath)));\n  } else if (type === Constants.geojsonTypes.POLYGON) {\n    // Cycle through a Polygon's rings and\n    // process each line\n    coordinates.forEach(function (line, lineIndex) {\n      processLine(line, basePath !== null ? basePath + '.' + lineIndex : String(lineIndex));\n    });\n  } else if (type === Constants.geojsonTypes.LINE_STRING) {\n    processLine(coordinates, basePath);\n  } else if (type.indexOf(Constants.geojsonTypes.MULTI_PREFIX) === 0) {\n    processMultiGeometry();\n  }\n\n  function processLine(line, lineBasePath) {\n    var firstPointString = '';\n    var lastVertex = null;\n    line.forEach(function (point, pointIndex) {\n      var pointPath = lineBasePath !== undefined && lineBasePath !== null ? lineBasePath + '.' + pointIndex : String(pointIndex);\n      var vertex = createVertex(featureId, point, pointPath, isSelectedPath(pointPath));\n\n      // If we're creating midpoints, check if there was a\n      // vertex before this one. If so, add a midpoint\n      // between that vertex and this one.\n      if (options.midpoints && lastVertex) {\n        var midpoint = createMidpoint(featureId, lastVertex, vertex, options.map);\n        if (midpoint) {\n          supplementaryPoints.push(midpoint);\n        }\n      }\n      lastVertex = vertex;\n\n      // A Polygon line's last point is the same as the first point. If we're on the last\n      // point, we want to draw a midpoint before it but not another vertex on it\n      // (since we already a vertex there, from the first point).\n      var stringifiedPoint = JSON.stringify(point);\n      if (firstPointString !== stringifiedPoint) {\n        supplementaryPoints.push(vertex);\n      }\n      if (pointIndex === 0) {\n        firstPointString = stringifiedPoint;\n      }\n    });\n  }\n\n  function isSelectedPath(path) {\n    if (!options.selectedPaths) return false;\n    return options.selectedPaths.indexOf(path) !== -1;\n  }\n\n  // Split a multi-geometry into constituent\n  // geometries, and accumulate the supplementary points\n  // for each of those constituents\n  function processMultiGeometry() {\n    var subType = type.replace(Constants.geojsonTypes.MULTI_PREFIX, '');\n    coordinates.forEach(function (subCoordinates, index) {\n      var subFeature = {\n        type: Constants.geojsonTypes.FEATURE,\n        properties: geojson.properties,\n        geometry: {\n          type: subType,\n          coordinates: subCoordinates\n        }\n      };\n      supplementaryPoints = supplementaryPoints.concat(createSupplementaryPoints(subFeature, options, index));\n    });\n  }\n\n  return supplementaryPoints;\n}\n\nmodule.exports = createSupplementaryPoints;\n\n},{\"../constants\":21,\"./create_midpoint\":30,\"./create_vertex\":32}],32:[function(require,module,exports){\n'use strict';\n\nvar Constants = require('../constants');\n\n/**\n * Returns GeoJSON for a Point representing the\n * vertex of another feature.\n *\n * @param {string} parentId\n * @param {Array<number>} coordinates\n * @param {string} path - Dot-separated numbers indicating exactly\n *   where the point exists within its parent feature's coordinates.\n * @param {boolean} selected\n * @return {GeoJSON} Point\n */\nmodule.exports = function (parentId, coordinates, path, selected) {\n  return {\n    type: Constants.geojsonTypes.FEATURE,\n    properties: {\n      meta: Constants.meta.VERTEX,\n      parent: parentId,\n      coord_path: path,\n      active: selected ? Constants.activeStates.ACTIVE : Constants.activeStates.INACTIVE\n    },\n    geometry: {\n      type: Constants.geojsonTypes.POINT,\n      coordinates: coordinates\n    }\n  };\n};\n\n},{\"../constants\":21}],33:[function(require,module,exports){\n\"use strict\";\n\nmodule.exports = {\n  enable: function enable(ctx) {\n    setTimeout(function () {\n      if (!ctx.map || !ctx.map.doubleClickZoom) return;\n      ctx.map.doubleClickZoom.enable();\n    }, 0);\n  },\n  disable: function disable(ctx) {\n    setTimeout(function () {\n      if (!ctx.map || !ctx.map.doubleClickZoom) return;\n      ctx.map.doubleClickZoom.disable();\n    }, 0);\n  }\n};\n\n},{}],34:[function(require,module,exports){\n\"use strict\";\n\nmodule.exports = function (a, b) {\n  var x = a.x - b.x;\n  var y = a.y - b.y;\n  return Math.sqrt(x * x + y * y);\n};\n\n},{}],35:[function(require,module,exports){\n'use strict';\n\nvar sortFeatures = require('./sort_features');\nvar mapEventToBoundingBox = require('./map_event_to_bounding_box');\nvar Constants = require('../constants');\nvar StringSet = require('./string_set');\n\nvar META_TYPES = [Constants.meta.FEATURE, Constants.meta.MIDPOINT, Constants.meta.VERTEX];\n\n// Requires either event or bbox\nmodule.exports = {\n  click: featuresAtClick,\n  touch: featuresAtTouch\n};\n\nfunction featuresAtClick(event, bbox, ctx) {\n  return featuresAt(event, bbox, ctx, ctx.options.clickBuffer);\n}\n\nfunction featuresAtTouch(event, bbox, ctx) {\n  return featuresAt(event, bbox, ctx, ctx.options.touchBuffer);\n}\n\nfunction featuresAt(event, bbox, ctx, buffer) {\n  if (ctx.map === null) return [];\n\n  var box = event ? mapEventToBoundingBox(event, buffer) : bbox;\n\n  var queryParams = {};\n  if (ctx.options.styles) queryParams.layers = ctx.options.styles.map(function (s) {\n    return s.id;\n  });\n\n  var features = ctx.map.queryRenderedFeatures(box, queryParams).filter(function (feature) {\n    return META_TYPES.indexOf(feature.properties.meta) !== -1;\n  });\n\n  var featureIds = new StringSet();\n  var uniqueFeatures = [];\n  features.forEach(function (feature) {\n    var featureId = feature.properties.id;\n    if (featureIds.has(featureId)) return;\n    featureIds.add(featureId);\n    uniqueFeatures.push(feature);\n  });\n\n  return sortFeatures(uniqueFeatures);\n}\n\n},{\"../constants\":21,\"./map_event_to_bounding_box\":40,\"./sort_features\":44,\"./string_set\":45}],36:[function(require,module,exports){\n'use strict';\n\nvar featuresAt = require('./features_at');\nvar Constants = require('../constants');\n\nmodule.exports = function getFeatureAtAndSetCursors(event, ctx) {\n  var features = featuresAt.click(event, null, ctx);\n  var classes = { mouse: Constants.cursors.NONE };\n\n  if (features[0]) {\n    classes.mouse = features[0].properties.active === Constants.activeStates.ACTIVE ? Constants.cursors.MOVE : Constants.cursors.POINTER;\n    classes.feature = features[0].properties.meta;\n  }\n\n  if (ctx.events.currentModeName().indexOf('draw') !== -1) {\n    classes.mouse = Constants.cursors.ADD;\n  }\n\n  ctx.ui.queueMapClasses(classes);\n  ctx.ui.updateMapClasses();\n\n  return features[0];\n};\n\n},{\"../constants\":21,\"./features_at\":35}],37:[function(require,module,exports){\n'use strict';\n\nvar euclideanDistance = require('./euclidean_distance');\n\nvar FINE_TOLERANCE = 4;\nvar GROSS_TOLERANCE = 12;\nvar INTERVAL = 500;\n\nmodule.exports = function isClick(start, end) {\n  var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n\n  var fineTolerance = options.fineTolerance != null ? options.fineTolerance : FINE_TOLERANCE;\n  var grossTolerance = options.grossTolerance != null ? options.grossTolerance : GROSS_TOLERANCE;\n  var interval = options.interval != null ? options.interval : INTERVAL;\n\n  start.point = start.point || end.point;\n  start.time = start.time || end.time;\n  var moveDistance = euclideanDistance(start.point, end.point);\n\n  return moveDistance < fineTolerance || moveDistance < grossTolerance && end.time - start.time < interval;\n};\n\n},{\"./euclidean_distance\":34}],38:[function(require,module,exports){\n\"use strict\";\n\nfunction isEventAtCoordinates(event, coordinates) {\n  if (!event.lngLat) return false;\n  return event.lngLat.lng === coordinates[0] && event.lngLat.lat === coordinates[1];\n}\n\nmodule.exports = isEventAtCoordinates;\n\n},{}],39:[function(require,module,exports){\n'use strict';\n\nvar euclideanDistance = require('./euclidean_distance');\n\nvar TOLERANCE = 25;\nvar INTERVAL = 250;\n\nmodule.exports = function isTap(start, end) {\n  var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n\n  var tolerance = options.tolerance != null ? options.tolerance : TOLERANCE;\n  var interval = options.interval != null ? options.interval : INTERVAL;\n\n  start.point = start.point || end.point;\n  start.time = start.time || end.time;\n  var moveDistance = euclideanDistance(start.point, end.point);\n\n  return moveDistance < tolerance && end.time - start.time < interval;\n};\n\n},{\"./euclidean_distance\":34}],40:[function(require,module,exports){\n\"use strict\";\n\n/**\n * Returns a bounding box representing the event's location.\n *\n * @param {Event} mapEvent - Mapbox GL JS map event, with a point properties.\n * @return {Array<Array<number>>} Bounding box.\n */\nfunction mapEventToBoundingBox(mapEvent) {\n  var buffer = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n\n  return [[mapEvent.point.x - buffer, mapEvent.point.y - buffer], [mapEvent.point.x + buffer, mapEvent.point.y + buffer]];\n}\n\nmodule.exports = mapEventToBoundingBox;\n\n},{}],41:[function(require,module,exports){\n'use strict';\n\nvar ModeHandler = function ModeHandler(mode, DrawContext) {\n\n  var handlers = {\n    drag: [],\n    click: [],\n    mousemove: [],\n    mousedown: [],\n    mouseup: [],\n    mouseout: [],\n    keydown: [],\n    keyup: [],\n    touchstart: [],\n    touchmove: [],\n    touchend: [],\n    tap: []\n  };\n\n  var ctx = {\n    on: function on(event, selector, fn) {\n      if (handlers[event] === undefined) {\n        throw new Error('Invalid event type: ' + event);\n      }\n      handlers[event].push({\n        selector: selector,\n        fn: fn\n      });\n    },\n    render: function render(id) {\n      DrawContext.store.featureChanged(id);\n    }\n  };\n\n  var delegate = function delegate(eventName, event) {\n    var handles = handlers[eventName];\n    var iHandle = handles.length;\n    while (iHandle--) {\n      var handle = handles[iHandle];\n      if (handle.selector(event)) {\n        handle.fn.call(ctx, event);\n        DrawContext.store.render();\n        DrawContext.ui.updateMapClasses();\n\n        // ensure an event is only handled once\n        // we do this to let modes have multiple overlapping selectors\n        // and relay on order of oppertations to filter\n        break;\n      }\n    }\n  };\n\n  mode.start.call(ctx);\n\n  return {\n    render: mode.render,\n    stop: function stop() {\n      if (mode.stop) mode.stop();\n    },\n    trash: function trash() {\n      if (mode.trash) {\n        mode.trash();\n        DrawContext.store.render();\n      }\n    },\n    combineFeatures: function combineFeatures() {\n      if (mode.combineFeatures) {\n        mode.combineFeatures();\n      }\n    },\n    uncombineFeatures: function uncombineFeatures() {\n      if (mode.uncombineFeatures) {\n        mode.uncombineFeatures();\n      }\n    },\n    drag: function drag(event) {\n      delegate('drag', event);\n    },\n    click: function click(event) {\n      delegate('click', event);\n    },\n    mousemove: function mousemove(event) {\n      delegate('mousemove', event);\n    },\n    mousedown: function mousedown(event) {\n      delegate('mousedown', event);\n    },\n    mouseup: function mouseup(event) {\n      delegate('mouseup', event);\n    },\n    mouseout: function mouseout(event) {\n      delegate('mouseout', event);\n    },\n    keydown: function keydown(event) {\n      delegate('keydown', event);\n    },\n    keyup: function keyup(event) {\n      delegate('keyup', event);\n    },\n    touchstart: function touchstart(event) {\n      delegate('touchstart', event);\n    },\n    touchmove: function touchmove(event) {\n      delegate('touchmove', event);\n    },\n    touchend: function touchend(event) {\n      delegate('touchend', event);\n    },\n    tap: function tap(event) {\n      delegate('tap', event);\n    }\n  };\n};\n\nmodule.exports = ModeHandler;\n\n},{}],42:[function(require,module,exports){\n'use strict';\n\nvar Point = require('point-geometry');\n\n/**\n * Returns a Point representing a mouse event's position\n * relative to a containing element.\n *\n * @param {MouseEvent} mouseEvent\n * @param {Node} container\n * @returns {Point}\n */\nfunction mouseEventPoint(mouseEvent, container) {\n  var rect = container.getBoundingClientRect();\n  return new Point(mouseEvent.clientX - rect.left - (container.clientLeft || 0), mouseEvent.clientY - rect.top - (container.clientTop || 0));\n}\n\nmodule.exports = mouseEventPoint;\n\n},{\"point-geometry\":16}],43:[function(require,module,exports){\n'use strict';\n\nvar constrainFeatureMovement = require('./constrain_feature_movement');\nvar Constants = require('../constants');\n\nmodule.exports = function (features, delta) {\n  var constrainedDelta = constrainFeatureMovement(features.map(function (feature) {\n    return feature.toGeoJSON();\n  }), delta);\n\n  features.forEach(function (feature) {\n    var currentCoordinates = feature.getCoordinates();\n\n    var moveCoordinate = function moveCoordinate(coord) {\n      var point = {\n        lng: coord[0] + constrainedDelta.lng,\n        lat: coord[1] + constrainedDelta.lat\n      };\n      return [point.lng, point.lat];\n    };\n    var moveRing = function moveRing(ring) {\n      return ring.map(function (coord) {\n        return moveCoordinate(coord);\n      });\n    };\n    var moveMultiPolygon = function moveMultiPolygon(multi) {\n      return multi.map(function (ring) {\n        return moveRing(ring);\n      });\n    };\n\n    var nextCoordinates = void 0;\n    if (feature.type === Constants.geojsonTypes.POINT) {\n      nextCoordinates = moveCoordinate(currentCoordinates);\n    } else if (feature.type === Constants.geojsonTypes.LINE_STRING || feature.type === Constants.geojsonTypes.MULTI_POINT) {\n      nextCoordinates = currentCoordinates.map(moveCoordinate);\n    } else if (feature.type === Constants.geojsonTypes.POLYGON || feature.type === Constants.geojsonTypes.MULTI_LINE_STRING) {\n      nextCoordinates = currentCoordinates.map(moveRing);\n    } else if (feature.type === Constants.geojsonTypes.MULTI_POLYGON) {\n      nextCoordinates = currentCoordinates.map(moveMultiPolygon);\n    }\n\n    feature.incomingCoords(nextCoordinates);\n  });\n};\n\n},{\"../constants\":21,\"./constrain_feature_movement\":29}],44:[function(require,module,exports){\n'use strict';\n\nvar area = require('@mapbox/geojson-area');\nvar Constants = require('../constants');\n\nvar FEATURE_SORT_RANKS = {\n  Point: 0,\n  LineString: 1,\n  Polygon: 2\n};\n\nfunction comparator(a, b) {\n  var score = FEATURE_SORT_RANKS[a.geometry.type] - FEATURE_SORT_RANKS[b.geometry.type];\n\n  if (score === 0 && a.geometry.type === Constants.geojsonTypes.POLYGON) {\n    return a.area - b.area;\n  }\n\n  return score;\n}\n\n// Sort in the order above, then sort polygons by area ascending.\nfunction sortFeatures(features) {\n  return features.map(function (feature) {\n    if (feature.geometry.type === Constants.geojsonTypes.POLYGON) {\n      feature.area = area.geometry({\n        type: Constants.geojsonTypes.FEATURE,\n        property: {},\n        geometry: feature.geometry\n      });\n    }\n    return feature;\n  }).sort(comparator).map(function (feature) {\n    delete feature.area;\n    return feature;\n  });\n}\n\nmodule.exports = sortFeatures;\n\n},{\"../constants\":21,\"@mapbox/geojson-area\":2}],45:[function(require,module,exports){\n\"use strict\";\n\nfunction StringSet(items) {\n  this._items = {};\n  this._length = items ? items.length : 0;\n  if (!items) return;\n  for (var i = 0, l = items.length; i < l; i++) {\n    if (items[i] === undefined) continue;\n    this._items[items[i]] = i;\n  }\n}\n\nStringSet.prototype.add = function (x) {\n  this._length = this._items[x] ? this._length : this._length + 1;\n  this._items[x] = this._items[x] ? this._items[x] : this._length;\n  return this;\n};\n\nStringSet.prototype.delete = function (x) {\n  this._length = this._items[x] ? this._length - 1 : this._length;\n  delete this._items[x];\n  return this;\n};\n\nStringSet.prototype.has = function (x) {\n  return this._items[x] !== undefined;\n};\n\nStringSet.prototype.values = function () {\n  var _this = this;\n\n  var orderedKeys = Object.keys(this._items).sort(function (a, b) {\n    return _this._items[a] - _this._items[b];\n  });\n  return orderedKeys;\n};\n\nStringSet.prototype.clear = function () {\n  this._length = 0;\n  this._items = {};\n  return this;\n};\n\nmodule.exports = StringSet;\n\n},{}],46:[function(require,module,exports){\n\"use strict\";\n\nmodule.exports = function (a, b) {\n  if (a.length !== b.length) return false;\n  return JSON.stringify(a.map(function (id) {\n    return id;\n  }).sort()) === JSON.stringify(b.map(function (id) {\n    return id;\n  }).sort());\n};\n\n},{}],47:[function(require,module,exports){\n'use strict';\n\nmodule.exports = [{\n  'id': 'gl-draw-polygon-fill-inactive',\n  'type': 'fill',\n  'filter': ['all', ['==', 'active', 'false'], ['==', '$type', 'Polygon'], ['!=', 'mode', 'static']],\n  'paint': {\n    'fill-color': '#3bb2d0',\n    'fill-outline-color': '#3bb2d0',\n    'fill-opacity': 0.1\n  }\n}, {\n  'id': 'gl-draw-polygon-fill-active',\n  'type': 'fill',\n  'filter': ['all', ['==', 'active', 'true'], ['==', '$type', 'Polygon']],\n  'paint': {\n    'fill-color': '#fbb03b',\n    'fill-outline-color': '#fbb03b',\n    'fill-opacity': 0.1\n  }\n}, {\n  'id': 'gl-draw-polygon-midpoint',\n  'type': 'circle',\n  'filter': ['all', ['==', '$type', 'Point'], ['==', 'meta', 'midpoint']],\n  'paint': {\n    'circle-radius': 3,\n    'circle-color': '#fbb03b'\n  }\n}, {\n  'id': 'gl-draw-polygon-stroke-inactive',\n  'type': 'line',\n  'filter': ['all', ['==', 'active', 'false'], ['==', '$type', 'Polygon'], ['!=', 'mode', 'static']],\n  'layout': {\n    'line-cap': 'round',\n    'line-join': 'round'\n  },\n  'paint': {\n    'line-color': '#3bb2d0',\n    'line-width': 2\n  }\n}, {\n  'id': 'gl-draw-polygon-stroke-active',\n  'type': 'line',\n  'filter': ['all', ['==', 'active', 'true'], ['==', '$type', 'Polygon']],\n  'layout': {\n    'line-cap': 'round',\n    'line-join': 'round'\n  },\n  'paint': {\n    'line-color': '#fbb03b',\n    'line-dasharray': [0.2, 2],\n    'line-width': 2\n  }\n}, {\n  'id': 'gl-draw-line-inactive',\n  'type': 'line',\n  'filter': ['all', ['==', 'active', 'false'], ['==', '$type', 'LineString'], ['!=', 'mode', 'static']],\n  'layout': {\n    'line-cap': 'round',\n    'line-join': 'round'\n  },\n  'paint': {\n    'line-color': '#3bb2d0',\n    'line-width': 2\n  }\n}, {\n  'id': 'gl-draw-line-active',\n  'type': 'line',\n  'filter': ['all', ['==', '$type', 'LineString'], ['==', 'active', 'true']],\n  'layout': {\n    'line-cap': 'round',\n    'line-join': 'round'\n  },\n  'paint': {\n    'line-color': '#fbb03b',\n    'line-dasharray': [0.2, 2],\n    'line-width': 2\n  }\n}, {\n  'id': 'gl-draw-polygon-and-line-vertex-stroke-inactive',\n  'type': 'circle',\n  'filter': ['all', ['==', 'meta', 'vertex'], ['==', '$type', 'Point'], ['!=', 'mode', 'static']],\n  'paint': {\n    'circle-radius': 5,\n    'circle-color': '#fff'\n  }\n}, {\n  'id': 'gl-draw-polygon-and-line-vertex-inactive',\n  'type': 'circle',\n  'filter': ['all', ['==', 'meta', 'vertex'], ['==', '$type', 'Point'], ['!=', 'mode', 'static']],\n  'paint': {\n    'circle-radius': 3,\n    'circle-color': '#fbb03b'\n  }\n}, {\n  'id': 'gl-draw-point-point-stroke-inactive',\n  'type': 'circle',\n  'filter': ['all', ['==', 'active', 'false'], ['==', '$type', 'Point'], ['==', 'meta', 'feature'], ['!=', 'mode', 'static']],\n  'paint': {\n    'circle-radius': 5,\n    'circle-opacity': 1,\n    'circle-color': '#fff'\n  }\n}, {\n  'id': 'gl-draw-point-inactive',\n  'type': 'circle',\n  'filter': ['all', ['==', 'active', 'false'], ['==', '$type', 'Point'], ['==', 'meta', 'feature'], ['!=', 'mode', 'static']],\n  'paint': {\n    'circle-radius': 3,\n    'circle-color': '#3bb2d0'\n  }\n}, {\n  'id': 'gl-draw-point-stroke-active',\n  'type': 'circle',\n  'filter': ['all', ['==', '$type', 'Point'], ['==', 'active', 'true'], ['!=', 'meta', 'midpoint']],\n  'paint': {\n    'circle-radius': 7,\n    'circle-color': '#fff'\n  }\n}, {\n  'id': 'gl-draw-point-active',\n  'type': 'circle',\n  'filter': ['all', ['==', '$type', 'Point'], ['!=', 'meta', 'midpoint'], ['==', 'active', 'true']],\n  'paint': {\n    'circle-radius': 5,\n    'circle-color': '#fbb03b'\n  }\n}, {\n  'id': 'gl-draw-polygon-fill-static',\n  'type': 'fill',\n  'filter': ['all', ['==', 'mode', 'static'], ['==', '$type', 'Polygon']],\n  'paint': {\n    'fill-color': '#404040',\n    'fill-outline-color': '#404040',\n    'fill-opacity': 0.1\n  }\n}, {\n  'id': 'gl-draw-polygon-stroke-static',\n  'type': 'line',\n  'filter': ['all', ['==', 'mode', 'static'], ['==', '$type', 'Polygon']],\n  'layout': {\n    'line-cap': 'round',\n    'line-join': 'round'\n  },\n  'paint': {\n    'line-color': '#404040',\n    'line-width': 2\n  }\n}, {\n  'id': 'gl-draw-line-static',\n  'type': 'line',\n  'filter': ['all', ['==', 'mode', 'static'], ['==', '$type', 'LineString']],\n  'layout': {\n    'line-cap': 'round',\n    'line-join': 'round'\n  },\n  'paint': {\n    'line-color': '#404040',\n    'line-width': 2\n  }\n}, {\n  'id': 'gl-draw-point-static',\n  'type': 'circle',\n  'filter': ['all', ['==', 'mode', 'static'], ['==', '$type', 'Point']],\n  'paint': {\n    'circle-radius': 5,\n    'circle-color': '#404040'\n  }\n}];\n\n},{}],48:[function(require,module,exports){\n\"use strict\";\n\nfunction throttle(fn, time, context) {\n  var lock = void 0,\n      args = void 0;\n\n  function later() {\n    // reset lock and call if queued\n    lock = false;\n    if (args) {\n      wrapperFn.apply(context, args);\n      args = false;\n    }\n  }\n\n  function wrapperFn() {\n    if (lock) {\n      // called too soon, queue to call later\n      args = arguments;\n    } else {\n      // lock until later then call\n      lock = true;\n      fn.apply(context, arguments);\n      setTimeout(later, time);\n    }\n  }\n\n  return wrapperFn;\n}\n\nmodule.exports = throttle;\n\n},{}],49:[function(require,module,exports){\n\"use strict\";\n\n/**\n * Derive a dense array (no `undefined`s) from a single value or array.\n *\n * @param {any} x\n * @return {Array<any>}\n */\nfunction toDenseArray(x) {\n  return [].concat(x).filter(function (y) {\n    return y !== undefined;\n  });\n}\n\nmodule.exports = toDenseArray;\n\n},{}],50:[function(require,module,exports){\n'use strict';\n\nvar _require = require('../lib/common_selectors'),\n    noTarget = _require.noTarget,\n    isOfMetaType = _require.isOfMetaType,\n    isInactiveFeature = _require.isInactiveFeature,\n    isShiftDown = _require.isShiftDown;\n\nvar createSupplementaryPoints = require('../lib/create_supplementary_points');\nvar constrainFeatureMovement = require('../lib/constrain_feature_movement');\nvar doubleClickZoom = require('../lib/double_click_zoom');\nvar Constants = require('../constants');\nvar CommonSelectors = require('../lib/common_selectors');\nvar moveFeatures = require('../lib/move_features');\n\nvar isVertex = isOfMetaType(Constants.meta.VERTEX);\nvar isMidpoint = isOfMetaType(Constants.meta.MIDPOINT);\n\nvar DirectSelect = {};\n\n// INTERNAL FUCNTIONS\n\nDirectSelect.fireUpdate = function () {\n  this.map.fire(Constants.events.UPDATE, {\n    action: Constants.updateActions.CHANGE_COORDINATES,\n    features: this.getSelected().map(function (f) {\n      return f.toGeoJSON();\n    })\n  });\n};\n\nDirectSelect.fireActionable = function (state) {\n  this.setActionableState({\n    combineFeatures: false,\n    uncombineFeatures: false,\n    trash: state.selectedCoordPaths.length > 0\n  });\n};\n\nDirectSelect.startDragging = function (state, e) {\n  this.map.dragPan.disable();\n  state.canDragMove = true;\n  state.dragMoveLocation = e.lngLat;\n};\n\nDirectSelect.stopDragging = function (state) {\n  this.map.dragPan.enable();\n  state.dragMoving = false;\n  state.canDragMove = false;\n  state.dragMoveLocation = null;\n};\n\nDirectSelect.onVertex = function (state, e) {\n  this.startDragging(state, e);\n  var about = e.featureTarget.properties;\n  var selectedIndex = state.selectedCoordPaths.indexOf(about.coord_path);\n  if (!isShiftDown(e) && selectedIndex === -1) {\n    state.selectedCoordPaths = [about.coord_path];\n  } else if (isShiftDown(e) && selectedIndex === -1) {\n    state.selectedCoordPaths.push(about.coord_path);\n  }\n\n  var selectedCoordinates = this.pathsToCoordinates(state.featureId, state.selectedCoordPaths);\n  this.setSelectedCoordinates(selectedCoordinates);\n};\n\nDirectSelect.onMidpoint = function (state, e) {\n  this.startDragging(state, e);\n  var about = e.featureTarget.properties;\n  state.feature.addCoordinate(about.coord_path, about.lng, about.lat);\n  this.fireUpdate();\n  state.selectedCoordPaths = [about.coord_path];\n};\n\nDirectSelect.pathsToCoordinates = function (featureId, paths) {\n  return paths.map(function (coord_path) {\n    return { feature_id: featureId, coord_path: coord_path };\n  });\n};\n\nDirectSelect.onFeature = function (state, e) {\n  if (state.selectedCoordPaths.length === 0) this.startDragging(state, e);else this.stopDragging(state);\n};\n\nDirectSelect.dragFeature = function (state, e, delta) {\n  moveFeatures(this.getSelected(), delta);\n  state.dragMoveLocation = e.lngLat;\n};\n\nDirectSelect.dragVertex = function (state, e, delta) {\n  var selectedCoords = state.selectedCoordPaths.map(function (coord_path) {\n    return state.feature.getCoordinate(coord_path);\n  });\n  var selectedCoordPoints = selectedCoords.map(function (coords) {\n    return {\n      type: Constants.geojsonTypes.FEATURE,\n      properties: {},\n      geometry: {\n        type: Constants.geojsonTypes.POINT,\n        coordinates: coords\n      }\n    };\n  });\n\n  var constrainedDelta = constrainFeatureMovement(selectedCoordPoints, delta);\n  for (var i = 0; i < selectedCoords.length; i++) {\n    var coord = selectedCoords[i];\n    state.feature.updateCoordinate(state.selectedCoordPaths[i], coord[0] + constrainedDelta.lng, coord[1] + constrainedDelta.lat);\n  }\n};\n\nDirectSelect.clickNoTarget = function () {\n  this.changeMode(Constants.modes.SIMPLE_SELECT);\n};\n\nDirectSelect.clickInactive = function () {\n  this.changeMode(Constants.modes.SIMPLE_SELECT);\n};\n\nDirectSelect.clickActiveFeature = function (state) {\n  state.selectedCoordPaths = [];\n  this.clearSelectedCoordinates();\n  state.feature.changed();\n};\n\n// EXTERNAL FUNCTIONS\n\nDirectSelect.onSetup = function (opts) {\n  var featureId = opts.featureId;\n  var feature = this.getFeature(featureId);\n\n  if (!feature) {\n    throw new Error('You must provide a featureId to enter direct_select mode');\n  }\n\n  if (feature.type === Constants.geojsonTypes.POINT) {\n    throw new TypeError('direct_select mode doesn\\'t handle point features');\n  }\n\n  var state = {\n    featureId: featureId,\n    feature: feature,\n    dragMoveLocation: opts.startPos || null,\n    dragMoving: false,\n    canDragMove: false,\n    selectedCoordPaths: opts.coordPath ? [opts.coordPath] : []\n  };\n\n  this.setSelectedCoordinates(this.pathsToCoordinates(featureId, state.selectedCoordPaths));\n  this.setSelected(featureId);\n  doubleClickZoom.disable(this);\n\n  this.setActionableState({\n    trash: true\n  });\n\n  return state;\n};\n\nDirectSelect.onStop = function () {\n  doubleClickZoom.enable(this);\n  this.clearSelectedCoordinates();\n};\n\nDirectSelect.toDisplayFeatures = function (state, geojson, push) {\n  if (state.featureId === geojson.properties.id) {\n    geojson.properties.active = Constants.activeStates.ACTIVE;\n    push(geojson);\n    createSupplementaryPoints(geojson, {\n      map: this.map,\n      midpoints: true,\n      selectedPaths: state.selectedCoordPaths\n    }).forEach(push);\n  } else {\n    geojson.properties.active = Constants.activeStates.INACTIVE;\n    push(geojson);\n  }\n  this.fireActionable(state);\n};\n\nDirectSelect.onTrash = function (state) {\n  state.selectedCoordPaths.sort().reverse().forEach(function (id) {\n    return state.feature.removeCoordinate(id);\n  });\n  this.map.fire(Constants.events.UPDATE, {\n    action: Constants.updateActions.CHANGE_COORDINATES,\n    features: this.getSelected().map(function (f) {\n      return f.toGeoJSON();\n    })\n  });\n  state.selectedCoordPaths = [];\n  this.clearSelectedCoordinates();\n  this.fireActionable(state);\n  if (state.feature.isValid() === false) {\n    this.deleteFeature([state.featureId]);\n    this.changeMode(Constants.modes.SIMPLE_SELECT, {});\n  }\n};\n\nDirectSelect.onMouseMove = function (state, e) {\n  // On mousemove that is not a drag, stop vertex movement.\n  var isFeature = CommonSelectors.isActiveFeature(e);\n  var onVertex = isVertex(e);\n  var noCoords = state.selectedCoordPaths.length === 0;\n  if (isFeature && noCoords) this.updateUIClasses({ mouse: Constants.cursors.MOVE });else if (onVertex && !noCoords) this.updateUIClasses({ mouse: Constants.cursors.MOVE });else this.updateUIClasses({ mouse: Constants.cursors.NONE });\n  this.stopDragging(state);\n};\n\nDirectSelect.onMouseOut = function (state) {\n  // As soon as you mouse leaves the canvas, update the feature\n  if (state.dragMoving) this.fireUpdate();\n};\n\nDirectSelect.onTouchStart = DirectSelect.onMouseDown = function (state, e) {\n  if (isVertex(e)) return this.onVertex(state, e);\n  if (CommonSelectors.isActiveFeature(e)) return this.onFeature(state, e);\n  if (isMidpoint(e)) return this.onMidpoint(state, e);\n};\n\nDirectSelect.onDrag = function (state, e) {\n  if (state.canDragMove !== true) return;\n  state.dragMoving = true;\n  e.originalEvent.stopPropagation();\n\n  var delta = {\n    lng: e.lngLat.lng - state.dragMoveLocation.lng,\n    lat: e.lngLat.lat - state.dragMoveLocation.lat\n  };\n  if (state.selectedCoordPaths.length > 0) this.dragVertex(state, e, delta);else this.dragFeature(state, e, delta);\n\n  state.dragMoveLocation = e.lngLat;\n};\n\nDirectSelect.onClick = function (state, e) {\n  if (noTarget(e)) return this.clickNoTarget(state, e);\n  if (CommonSelectors.isActiveFeature(e)) return this.clickActiveFeature(state, e);\n  if (isInactiveFeature(e)) return this.clickInactive(state, e);\n  this.stopDragging(state);\n};\n\nDirectSelect.onTap = function (state, e) {\n  if (noTarget(e)) return this.clickNoTarget(state, e);\n  if (CommonSelectors.isActiveFeature(e)) return this.clickActiveFeature(state, e);\n  if (isInactiveFeature(e)) return this.clickInactive(state, e);\n};\n\nDirectSelect.onTouchEnd = DirectSelect.onMouseUp = function (state) {\n  if (state.dragMoving) {\n    this.fireUpdate();\n  }\n  this.stopDragging(state);\n};\n\nmodule.exports = DirectSelect;\n\n},{\"../constants\":21,\"../lib/common_selectors\":28,\"../lib/constrain_feature_movement\":29,\"../lib/create_supplementary_points\":31,\"../lib/double_click_zoom\":33,\"../lib/move_features\":43}],51:[function(require,module,exports){\n'use strict';\n\nfunction _toConsumableArray(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } else { return Array.from(arr); } }\n\nvar CommonSelectors = require('../lib/common_selectors');\nvar isEventAtCoordinates = require('../lib/is_event_at_coordinates');\nvar doubleClickZoom = require('../lib/double_click_zoom');\nvar Constants = require('../constants');\nvar createVertex = require('../lib/create_vertex');\n\nvar DrawLineString = {};\n\nDrawLineString.onSetup = function (opts) {\n  opts = opts || {};\n  var featureId = opts.featureId;\n\n  var line = void 0,\n      currentVertexPosition = void 0;\n  var direction = 'forward';\n  if (featureId) {\n    line = this.getFeature(featureId);\n    if (!line) {\n      throw new Error('Could not find a feature with the provided featureId');\n    }\n    var from = opts.from;\n    if (from && from.type === 'Feature' && from.geometry && from.geometry.type === 'Point') {\n      from = from.geometry;\n    }\n    if (from && from.type === 'Point' && from.coordinates && from.coordinates.length === 2) {\n      from = from.coordinates;\n    }\n    if (!from || !Array.isArray(from)) {\n      throw new Error('Please use the `from` property to indicate which point to continue the line from');\n    }\n    var lastCoord = line.coordinates.length - 1;\n    if (line.coordinates[lastCoord][0] === from[0] && line.coordinates[lastCoord][1] === from[1]) {\n      var _line;\n\n      currentVertexPosition = lastCoord + 1;\n      // add one new coordinate to continue from\n      (_line = line).addCoordinate.apply(_line, [currentVertexPosition].concat(_toConsumableArray(line.coordinates[lastCoord])));\n    } else if (line.coordinates[0][0] === from[0] && line.coordinates[0][1] === from[1]) {\n      var _line2;\n\n      direction = 'backwards';\n      currentVertexPosition = 0;\n      // add one new coordinate to continue from\n      (_line2 = line).addCoordinate.apply(_line2, [currentVertexPosition].concat(_toConsumableArray(line.coordinates[0])));\n    } else {\n      throw new Error('`from` should match the point at either the start or the end of the provided LineString');\n    }\n  } else {\n    line = this.newFeature({\n      type: Constants.geojsonTypes.FEATURE,\n      properties: {},\n      geometry: {\n        type: Constants.geojsonTypes.LINE_STRING,\n        coordinates: []\n      }\n    });\n    currentVertexPosition = 0;\n    this.addFeature(line);\n  }\n\n  this.clearSelectedFeatures();\n  doubleClickZoom.disable(this);\n  this.updateUIClasses({ mouse: Constants.cursors.ADD });\n  this.activateUIButton(Constants.types.LINE);\n  this.setActionableState({\n    trash: true\n  });\n\n  return {\n    line: line,\n    currentVertexPosition: currentVertexPosition,\n    direction: direction\n  };\n};\n\nDrawLineString.clickAnywhere = function (state, e) {\n  if (state.currentVertexPosition > 0 && isEventAtCoordinates(e, state.line.coordinates[state.currentVertexPosition - 1]) || state.direction === 'backwards' && isEventAtCoordinates(e, state.line.coordinates[state.currentVertexPosition + 1])) {\n    return this.changeMode(Constants.modes.SIMPLE_SELECT, { featureIds: [state.line.id] });\n  }\n  this.updateUIClasses({ mouse: Constants.cursors.ADD });\n  state.line.updateCoordinate(state.currentVertexPosition, e.lngLat.lng, e.lngLat.lat);\n  if (state.direction === 'forward') {\n    state.currentVertexPosition++;\n    state.line.updateCoordinate(state.currentVertexPosition, e.lngLat.lng, e.lngLat.lat);\n  } else {\n    state.line.addCoordinate(0, e.lngLat.lng, e.lngLat.lat);\n  }\n};\n\nDrawLineString.clickOnVertex = function (state) {\n  return this.changeMode(Constants.modes.SIMPLE_SELECT, { featureIds: [state.line.id] });\n};\n\nDrawLineString.onMouseMove = function (state, e) {\n  state.line.updateCoordinate(state.currentVertexPosition, e.lngLat.lng, e.lngLat.lat);\n  if (CommonSelectors.isVertex(e)) {\n    this.updateUIClasses({ mouse: Constants.cursors.POINTER });\n  }\n};\n\nDrawLineString.onTap = DrawLineString.onClick = function (state, e) {\n  if (CommonSelectors.isVertex(e)) return this.clickOnVertex(state, e);\n  this.clickAnywhere(state, e);\n};\n\nDrawLineString.onKeyUp = function (state, e) {\n  if (CommonSelectors.isEnterKey(e)) {\n    this.changeMode(Constants.modes.SIMPLE_SELECT, { featureIds: [state.line.id] });\n  } else if (CommonSelectors.isEscapeKey(e)) {\n    this.deleteFeature([state.line.id], { silent: true });\n    this.changeMode(Constants.modes.SIMPLE_SELECT);\n  }\n};\n\nDrawLineString.onStop = function (state) {\n  doubleClickZoom.enable(this);\n  this.activateUIButton();\n\n  // check to see if we've deleted this feature\n  if (this.getFeature(state.line.id) === undefined) return;\n\n  //remove last added coordinate\n  state.line.removeCoordinate('' + state.currentVertexPosition);\n  if (state.line.isValid()) {\n    this.map.fire(Constants.events.CREATE, {\n      features: [state.line.toGeoJSON()]\n    });\n  } else {\n    this.deleteFeature([state.line.id], { silent: true });\n    this.changeMode(Constants.modes.SIMPLE_SELECT, {}, { silent: true });\n  }\n};\n\nDrawLineString.onTrash = function (state) {\n  this.deleteFeature([state.line.id], { silent: true });\n  this.changeMode(Constants.modes.SIMPLE_SELECT);\n};\n\nDrawLineString.toDisplayFeatures = function (state, geojson, display) {\n  var isActiveLine = geojson.properties.id === state.line.id;\n  geojson.properties.active = isActiveLine ? Constants.activeStates.ACTIVE : Constants.activeStates.INACTIVE;\n  if (!isActiveLine) return display(geojson);\n  // Only render the line if it has at least one real coordinate\n  if (geojson.geometry.coordinates.length < 2) return;\n  geojson.properties.meta = Constants.meta.FEATURE;\n  display(createVertex(state.line.id, geojson.geometry.coordinates[state.direction === 'forward' ? geojson.geometry.coordinates.length - 2 : 1], '' + (state.direction === 'forward' ? geojson.geometry.coordinates.length - 2 : 1), false));\n\n  display(geojson);\n};\n\nmodule.exports = DrawLineString;\n\n},{\"../constants\":21,\"../lib/common_selectors\":28,\"../lib/create_vertex\":32,\"../lib/double_click_zoom\":33,\"../lib/is_event_at_coordinates\":38}],52:[function(require,module,exports){\n'use strict';\n\nvar CommonSelectors = require('../lib/common_selectors');\nvar Constants = require('../constants');\n\nvar DrawPoint = {};\n\nDrawPoint.onSetup = function () {\n  var point = this.newFeature({\n    type: Constants.geojsonTypes.FEATURE,\n    properties: {},\n    geometry: {\n      type: Constants.geojsonTypes.POINT,\n      coordinates: []\n    }\n  });\n\n  this.addFeature(point);\n\n  this.clearSelectedFeatures();\n  this.updateUIClasses({ mouse: Constants.cursors.ADD });\n  this.activateUIButton(Constants.types.POINT);\n\n  this.setActionableState({\n    trash: true\n  });\n\n  return { point: point };\n};\n\nDrawPoint.stopDrawingAndRemove = function (state) {\n  this.deleteFeature([state.point.id], { silent: true });\n  this.changeMode(Constants.modes.SIMPLE_SELECT);\n};\n\nDrawPoint.onTap = DrawPoint.onClick = function (state, e) {\n  this.updateUIClasses({ mouse: Constants.cursors.MOVE });\n  state.point.updateCoordinate('', e.lngLat.lng, e.lngLat.lat);\n  this.map.fire(Constants.events.CREATE, {\n    features: [state.point.toGeoJSON()]\n  });\n  this.changeMode(Constants.modes.SIMPLE_SELECT, { featureIds: [state.point.id] });\n};\n\nDrawPoint.onStop = function (state) {\n  this.activateUIButton();\n  if (!state.point.getCoordinate().length) {\n    this.deleteFeature([state.point.id], { silent: true });\n  }\n};\n\nDrawPoint.toDisplayFeatures = function (state, geojson, display) {\n  // Never render the point we're drawing\n  var isActivePoint = geojson.properties.id === state.point.id;\n  geojson.properties.active = isActivePoint ? Constants.activeStates.ACTIVE : Constants.activeStates.INACTIVE;\n  if (!isActivePoint) return display(geojson);\n};\n\nDrawPoint.onTrash = DrawPoint.stopDrawingAndRemove;\n\nDrawPoint.onKeyUp = function (state, e) {\n  if (CommonSelectors.isEscapeKey(e) || CommonSelectors.isEnterKey(e)) {\n    return this.stopDrawingAndRemove(state, e);\n  }\n};\n\nmodule.exports = DrawPoint;\n\n},{\"../constants\":21,\"../lib/common_selectors\":28}],53:[function(require,module,exports){\n'use strict';\n\nvar CommonSelectors = require('../lib/common_selectors');\nvar doubleClickZoom = require('../lib/double_click_zoom');\nvar Constants = require('../constants');\nvar isEventAtCoordinates = require('../lib/is_event_at_coordinates');\nvar createVertex = require('../lib/create_vertex');\n\nvar DrawPolygon = {};\n\nDrawPolygon.onSetup = function () {\n  var polygon = this.newFeature({\n    type: Constants.geojsonTypes.FEATURE,\n    properties: {},\n    geometry: {\n      type: Constants.geojsonTypes.POLYGON,\n      coordinates: [[]]\n    }\n  });\n\n  this.addFeature(polygon);\n\n  this.clearSelectedFeatures();\n  doubleClickZoom.disable(this);\n  this.updateUIClasses({ mouse: Constants.cursors.ADD });\n  this.activateUIButton(Constants.types.POLYGON);\n  this.setActionableState({\n    trash: true\n  });\n\n  return {\n    polygon: polygon,\n    currentVertexPosition: 0\n  };\n};\n\nDrawPolygon.clickAnywhere = function (state, e) {\n  if (state.currentVertexPosition > 0 && isEventAtCoordinates(e, state.polygon.coordinates[0][state.currentVertexPosition - 1])) {\n    return this.changeMode(Constants.modes.SIMPLE_SELECT, { featureIds: [state.polygon.id] });\n  }\n  this.updateUIClasses({ mouse: Constants.cursors.ADD });\n  state.polygon.updateCoordinate('0.' + state.currentVertexPosition, e.lngLat.lng, e.lngLat.lat);\n  state.currentVertexPosition++;\n  state.polygon.updateCoordinate('0.' + state.currentVertexPosition, e.lngLat.lng, e.lngLat.lat);\n};\n\nDrawPolygon.clickOnVertex = function (state) {\n  return this.changeMode(Constants.modes.SIMPLE_SELECT, { featureIds: [state.polygon.id] });\n};\n\nDrawPolygon.onMouseMove = function (state, e) {\n  state.polygon.updateCoordinate('0.' + state.currentVertexPosition, e.lngLat.lng, e.lngLat.lat);\n  if (CommonSelectors.isVertex(e)) {\n    this.updateUIClasses({ mouse: Constants.cursors.POINTER });\n  }\n};\n\nDrawPolygon.onTap = DrawPolygon.onClick = function (state, e) {\n  if (CommonSelectors.isVertex(e)) return this.clickOnVertex(state, e);\n  return this.clickAnywhere(state, e);\n};\n\nDrawPolygon.onKeyUp = function (state, e) {\n  if (CommonSelectors.isEscapeKey(e)) {\n    this.deleteFeature([state.polygon.id], { silent: true });\n    this.changeMode(Constants.modes.SIMPLE_SELECT);\n  } else if (CommonSelectors.isEnterKey(e)) {\n    this.changeMode(Constants.modes.SIMPLE_SELECT, { featureIds: [state.polygon.id] });\n  }\n};\n\nDrawPolygon.onStop = function (state) {\n  this.updateUIClasses({ mouse: Constants.cursors.NONE });\n  doubleClickZoom.enable(this);\n  this.activateUIButton();\n\n  // check to see if we've deleted this feature\n  if (this.getFeature(state.polygon.id) === undefined) return;\n\n  //remove last added coordinate\n  state.polygon.removeCoordinate('0.' + state.currentVertexPosition);\n  if (state.polygon.isValid()) {\n    this.map.fire(Constants.events.CREATE, {\n      features: [state.polygon.toGeoJSON()]\n    });\n  } else {\n    this.deleteFeature([state.polygon.id], { silent: true });\n    this.changeMode(Constants.modes.SIMPLE_SELECT, {}, { silent: true });\n  }\n};\n\nDrawPolygon.toDisplayFeatures = function (state, geojson, display) {\n  var isActivePolygon = geojson.properties.id === state.polygon.id;\n  geojson.properties.active = isActivePolygon ? Constants.activeStates.ACTIVE : Constants.activeStates.INACTIVE;\n  if (!isActivePolygon) return display(geojson);\n\n  // Don't render a polygon until it has two positions\n  // (and a 3rd which is just the first repeated)\n  if (geojson.geometry.coordinates.length === 0) return;\n\n  var coordinateCount = geojson.geometry.coordinates[0].length;\n  // 2 coordinates after selecting a draw type\n  // 3 after creating the first point\n  if (coordinateCount < 3) {\n    return;\n  }\n  geojson.properties.meta = Constants.meta.FEATURE;\n  display(createVertex(state.polygon.id, geojson.geometry.coordinates[0][0], '0.0', false));\n  if (coordinateCount > 3) {\n    // Add a start position marker to the map, clicking on this will finish the feature\n    // This should only be shown when we're in a valid spot\n    var endPos = geojson.geometry.coordinates[0].length - 3;\n    display(createVertex(state.polygon.id, geojson.geometry.coordinates[0][endPos], '0.' + endPos, false));\n  }\n  if (coordinateCount <= 4) {\n    // If we've only drawn two positions (plus the closer),\n    // make a LineString instead of a Polygon\n    var lineCoordinates = [[geojson.geometry.coordinates[0][0][0], geojson.geometry.coordinates[0][0][1]], [geojson.geometry.coordinates[0][1][0], geojson.geometry.coordinates[0][1][1]]];\n    // create an initial vertex so that we can track the first point on mobile devices\n    display({\n      type: Constants.geojsonTypes.FEATURE,\n      properties: geojson.properties,\n      geometry: {\n        coordinates: lineCoordinates,\n        type: Constants.geojsonTypes.LINE_STRING\n      }\n    });\n    if (coordinateCount === 3) {\n      return;\n    }\n  }\n  // render the Polygon\n  return display(geojson);\n};\n\nDrawPolygon.onTrash = function (state) {\n  this.deleteFeature([state.polygon.id], { silent: true });\n  this.changeMode(Constants.modes.SIMPLE_SELECT);\n};\n\nmodule.exports = DrawPolygon;\n\n},{\"../constants\":21,\"../lib/common_selectors\":28,\"../lib/create_vertex\":32,\"../lib/double_click_zoom\":33,\"../lib/is_event_at_coordinates\":38}],54:[function(require,module,exports){\n'use strict';\n\nvar modes = ['simple_select', 'direct_select', 'draw_point', 'draw_polygon', 'draw_line_string'];\n\nmodule.exports = modes.reduce(function (m, k) {\n  m[k] = require('./' + k);\n  return m;\n}, {});\n\nmodule.exports = {\n  simple_select: require('./simple_select'),\n  direct_select: require('./direct_select'),\n  draw_point: require('./draw_point'),\n  draw_polygon: require('./draw_polygon'),\n  draw_line_string: require('./draw_line_string')\n};\n\n},{\"./direct_select\":50,\"./draw_line_string\":51,\"./draw_point\":52,\"./draw_polygon\":53,\"./simple_select\":58}],55:[function(require,module,exports){\n'use strict';\n\nvar ModeInterface = module.exports = require('./mode_interface_accessors');\n\n/**\n * Triggered while a mode is being transitioned into.\n * @param opts {Object} - this is the object passed via `draw.changeMode('mode', opts)`;\n * @name MODE.onSetup\n * @returns {Object} - this object will be passed to all other life cycle functions\n */\nModeInterface.prototype.onSetup = function () {};\n\n/**\n * Triggered when a drag event is detected on the map\n * @name MODE.onDrag\n * @param state {Object} - a mutible state object created by onSetup\n * @param e {Object} - the captured event that is triggering this life cycle event\n */\nModeInterface.prototype.onDrag = function () {};\n\n/**\n * Triggered when the mouse is clicked\n * @name MODE.onClick\n * @param state {Object} - a mutible state object created by onSetup\n * @param e {Object} - the captured event that is triggering this life cycle event\n */\nModeInterface.prototype.onClick = function () {};\n\n/**\n * Triggered with the mouse is moved\n * @name MODE.onMouseMove\n * @param state {Object} - a mutible state object created by onSetup\n * @param e {Object} - the captured event that is triggering this life cycle event\n */\nModeInterface.prototype.onMouseMove = function () {};\n\n/**\n * Triggered when the mouse button is pressed down\n * @name MODE.onMouseDown\n * @param state {Object} - a mutible state object created by onSetup\n * @param e {Object} - the captured event that is triggering this life cycle event\n */\nModeInterface.prototype.onMouseDown = function () {};\n\n/**\n * Triggered when the mouse button is released\n * @name MODE.onMouseUp\n * @param state {Object} - a mutible state object created by onSetup\n * @param e {Object} - the captured event that is triggering this life cycle event\n */\nModeInterface.prototype.onMouseUp = function () {};\n\n/**\n * Triggered when the mouse leaves the map's container\n * @name MODE.onMouseOut\n * @param state {Object} - a mutible state object created by onSetup\n * @param e {Object} - the captured event that is triggering this life cycle event\n */\nModeInterface.prototype.onMouseOut = function () {};\n\n/**\n * Triggered when a key up event is detected\n * @name MODE.onKeyUp\n * @param state {Object} - a mutible state object created by onSetup\n * @param e {Object} - the captured event that is triggering this life cycle event\n */\nModeInterface.prototype.onKeyUp = function () {};\n\n/**\n * Triggered when a key down event is detected\n * @name MODE.onKeyDown\n * @param state {Object} - a mutible state object created by onSetup\n * @param e {Object} - the captured event that is triggering this life cycle event\n */\nModeInterface.prototype.onKeyDown = function () {};\n\n/**\n * Triggered when a touch event is started\n * @name MODE.onTouchStart\n * @param state {Object} - a mutible state object created by onSetup\n * @param e {Object} - the captured event that is triggering this life cycle event\n */\nModeInterface.prototype.onTouchStart = function () {};\n\n/**\n * Triggered when one drags thier finger on a mobile device\n * @name MODE.onTouchMove\n * @param state {Object} - a mutible state object created by onSetup\n * @param e {Object} - the captured event that is triggering this life cycle event\n */\nModeInterface.prototype.onTouchMove = function () {};\n\n/**\n * Triggered when one removes their finger from the map\n * @name MODE.onTouchEnd\n * @param state {Object} - a mutible state object created by onSetup\n * @param e {Object} - the captured event that is triggering this life cycle event\n */\nModeInterface.prototype.onTouchEnd = function () {};\n\n/**\n * Triggered when one quicly taps the map\n * @name MODE.onTap\n * @param state {Object} - a mutible state object created by onSetup\n * @param e {Object} - the captured event that is triggering this life cycle event\n */\nModeInterface.prototype.onTap = function () {};\n\n/**\n * Triggered when the mode is being exited, to be used for cleaning up artifacts such as invalid features\n * @name MODE.onStop\n * @param state {Object} - a mutible state object created by onSetup\n */\nModeInterface.prototype.onStop = function () {};\n\n/**\n * Triggered when [draw.trash()](https://github.com/mapbox/mapbox-gl-draw/blob/master/API.md#trash-draw) is called.\n * @name MODE.onTrash\n * @param state {Object} - a mutible state object created by onSetup\n */\nModeInterface.prototype.onTrash = function () {};\n\n/**\n * Triggered when [draw.combineFeatures()](https://github.com/mapbox/mapbox-gl-draw/blob/master/API.md#combinefeatures-draw) is called.\n * @name MODE.onCombineFeature\n * @param state {Object} - a mutible state object created by onSetup\n */\nModeInterface.prototype.onCombineFeature = function () {};\n\n/**\n * Triggered when [draw.uncombineFeatures()](https://github.com/mapbox/mapbox-gl-draw/blob/master/API.md#uncombinefeatures-draw) is called.\n * @name MODE.onUncombineFeature\n * @param state {Object} - a mutible state object created by onSetup\n */\nModeInterface.prototype.onUncombineFeature = function () {};\n\n/**\n * Triggered per feature on render to convert raw features into set of features for display on the map\n * See [styling draw](https://github.com/mapbox/mapbox-gl-draw/blob/master/API.md#styling-draw) for information about what geojson properties Draw uses as part of rendering.\n * @name MODE.toDisplayFeatures\n * @param state {Object} - a mutible state object created by onSetup\n * @param geojson {Object} - a geojson being evaulated. To render, pass to `display`.\n * @param display {Function} - all geojson objects passed to this be rendered onto the map\n */\nModeInterface.prototype.toDisplayFeatures = function () {\n  throw new Error('You must overwrite toDisplayFeatures');\n};\n\n},{\"./mode_interface_accessors\":56}],56:[function(require,module,exports){\n'use strict';\n\nvar Constants = require('../constants');\nvar featuresAt = require('../lib/features_at');\nvar Point = require('../feature_types/point');\nvar LineString = require('../feature_types/line_string');\nvar Polygon = require('../feature_types/polygon');\nvar MultiFeature = require('../feature_types/multi_feature');\n\nvar ModeInterface = module.exports = function (ctx) {\n  this.map = ctx.map;\n  this.drawConfig = JSON.parse(JSON.stringify(ctx.options || {}));\n  this._ctx = ctx;\n};\n\n/**\n * Sets Draw's interal selected state\n * @name this.setSelected\n * @param {DrawFeature[]} - whats selected as a [DrawFeature](https://github.com/mapbox/mapbox-gl-draw/blob/master/src/feature_types/feature.js)\n */\nModeInterface.prototype.setSelected = function (features) {\n  return this._ctx.store.setSelected(features);\n};\n\n/**\n * Sets Draw's internal selected coordinate state\n * @name this.setSelectedCoordinates\n * @param {Object[]} coords - a array of {coord_path: 'string', featureId: 'string'}\n */\nModeInterface.prototype.setSelectedCoordinates = function (coords) {\n  var _this = this;\n\n  this._ctx.store.setSelectedCoordinates(coords);\n  coords.reduce(function (m, c) {\n    if (m[c.feature_id] === undefined) {\n      m[c.feature_id] = true;\n      _this._ctx.store.get(c.feature_id).changed();\n    }\n    return m;\n  }, {});\n};\n\n/**\n * Get all selected features as a [DrawFeature](https://github.com/mapbox/mapbox-gl-draw/blob/master/src/feature_types/feature.js)\n * @name this.getSelected\n * @returns {DrawFeature[]}\n */\nModeInterface.prototype.getSelected = function () {\n  return this._ctx.store.getSelected();\n};\n\n/**\n * Get the ids of all currently selected features\n * @name this.getSelectedIds\n * @returns {String[]}\n */\nModeInterface.prototype.getSelectedIds = function () {\n  return this._ctx.store.getSelectedIds();\n};\n\n/**\n * Check if a feature is selected\n * @name this.isSelected\n * @param {String} id - a feature id\n * @returns {Boolean}\n */\nModeInterface.prototype.isSelected = function (id) {\n  return this._ctx.store.isSelected(id);\n};\n\n/**\n * Get a [DrawFeature](https://github.com/mapbox/mapbox-gl-draw/blob/master/src/feature_types/feature.js) by its id\n * @name this.getFeature\n * @param {String} id - a feature id\n * @returns {DrawFeature}\n */\nModeInterface.prototype.getFeature = function (id) {\n  return this._ctx.store.get(id);\n};\n\n/**\n * Add a feature to draw's internal selected state\n * @name this.select\n * @param {String} id\n */\nModeInterface.prototype.select = function (id) {\n  return this._ctx.store.select(id);\n};\n\n/**\n * Remove a feature from draw's internal selected state\n * @name this.delete\n * @param {String} id\n */\nModeInterface.prototype.deselect = function (id) {\n  return this._ctx.store.deselect(id);\n};\n\n/**\n * Delete a feature from draw\n * @name this.deleteFeature\n * @param {String} id - a feature id\n */\nModeInterface.prototype.deleteFeature = function (id) {\n  var opts = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n  return this._ctx.store.delete(id, opts);\n};\n\n/**\n * Add a [DrawFeature](https://github.com/mapbox/mapbox-gl-draw/blob/master/src/feature_types/feature.js) to draw.\n * See `this.newFeature` for converting geojson into a DrawFeature\n * @name this.addFeature\n * @param {DrawFeature} feature - the feature to add\n */\nModeInterface.prototype.addFeature = function (feature) {\n  return this._ctx.store.add(feature);\n};\n\n/**\n * Clear all selected features\n */\nModeInterface.prototype.clearSelectedFeatures = function () {\n  return this._ctx.store.clearSelected();\n};\n\n/**\n * Clear all selected coordinates\n */\nModeInterface.prototype.clearSelectedCoordinates = function () {\n  return this._ctx.store.clearSelectedCoordinates();\n};\n\n/**\n * Indicate if the different action are currently possible with your mode\n * See [draw.actionalbe](https://github.com/mapbox/mapbox-gl-draw/blob/master/API.md#drawactionable) for a list of possible actions. All undefined actions are set to **false** by default\n * @name this.setActionableState\n * @param {Object} actions\n */\nModeInterface.prototype.setActionableState = function () {\n  var actions = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n  var newSet = {\n    trash: actions.trash || false,\n    combineFeatures: actions.combineFeatures || false,\n    uncombineFeatures: actions.uncombineFeatures || false\n  };\n  return this._ctx.events.actionable(newSet);\n};\n\n/**\n * Trigger a mode change\n * @name this.changeMode\n * @param {String} mode - the mode to transition into\n * @param {Object} opts - the options object to pass to the new mode\n * @param {Object} eventOpts - used to control what kind of events are emitted.\n */\nModeInterface.prototype.changeMode = function (mode) {\n  var opts = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  var eventOpts = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n\n  return this._ctx.events.changeMode(mode, opts, eventOpts);\n};\n\n/**\n * Update the state of draw map classes\n * @name this.updateUIClasses\n * @param {Object} opts\n */\nModeInterface.prototype.updateUIClasses = function (opts) {\n  return this._ctx.ui.queueMapClasses(opts);\n};\n\n/**\n * If a name is provided it makes that button active, else if makes all buttons inactive\n * @name this.activateUIButton\n * @param {String?} name - name of the button to make active, leave as undefined to set buttons to be inactive\n */\nModeInterface.prototype.activateUIButton = function (name) {\n  return this._ctx.ui.setActiveButton(name);\n};\n\n/**\n * Get the features at the location of an event object or in a bbox\n * @name this.featuresAt\n * @param {Event||NULL} event - a mapbox-gl event object\n * @param {BBOX||NULL} bbox - the area to get features from\n * @param {String} bufferType - is this `click` or `tap` event, defaults to click\n */\nModeInterface.prototype.featuresAt = function (event, bbox) {\n  var bufferType = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 'click';\n\n  if (bufferType !== 'click' && bufferType !== 'touch') throw new Error('invalid buffer type');\n  return featuresAt[bufferType](event, bbox, this._ctx);\n};\n\n/**\n * Create a new [DrawFeature](https://github.com/mapbox/mapbox-gl-draw/blob/master/src/feature_types/feature.js) from geojson\n * @name this.newFeature\n * @param {GeoJSONFeature} geojson\n * @returns {DrawFeature}\n */\nModeInterface.prototype.newFeature = function (geojson) {\n  var type = geojson.geometry.type;\n  if (type === Constants.geojsonTypes.POINT) return new Point(this._ctx, geojson);\n  if (type === Constants.geojsonTypes.LINE_STRING) return new LineString(this._ctx, geojson);\n  if (type === Constants.geojsonTypes.POLYGON) return new Polygon(this._ctx, geojson);\n  return new MultiFeature(this._ctx, geojson);\n};\n\n/**\n * Check is an object is an instance of a [DrawFeature](https://github.com/mapbox/mapbox-gl-draw/blob/master/src/feature_types/feature.js)\n * @name this.isInstanceOf\n * @param {String} type - `Point`, `LineString`, `Polygon`, `MultiFeature`\n * @param {Object} feature - the object that needs to be checked\n * @returns {Boolean}\n */\nModeInterface.prototype.isInstanceOf = function (type, feature) {\n  if (type === Constants.geojsonTypes.POINT) return feature instanceof Point;\n  if (type === Constants.geojsonTypes.LINE_STRING) return feature instanceof LineString;\n  if (type === Constants.geojsonTypes.POLYGON) return feature instanceof Polygon;\n  if (type === 'MultiFeature') return feature instanceof MultiFeature;\n  throw new Error('Unknown feature class: ' + type);\n};\n\n/**\n * Force draw to rerender the feature of the provided id\n * @name this.doRender\n * @param {String} id - a feature id\n */\nModeInterface.prototype.doRender = function (id) {\n  return this._ctx.store.featureChanged(id);\n};\n\n},{\"../constants\":21,\"../feature_types/line_string\":24,\"../feature_types/multi_feature\":25,\"../feature_types/point\":26,\"../feature_types/polygon\":27,\"../lib/features_at\":35}],57:[function(require,module,exports){\n'use strict';\n\nvar ModeInterface = require('./mode_interface');\n\nmodule.exports = function (modeObject) {\n  var modeObjectKeys = Object.keys(modeObject);\n\n  return function (ctx) {\n    var startOpts = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n    var state = {};\n\n    var mode = modeObjectKeys.reduce(function (m, k) {\n      m[k] = modeObject[k];\n      return m;\n    }, new ModeInterface(ctx));\n\n    function wrapper(eh) {\n      return function (e) {\n        mode[eh](state, e);\n      };\n    }\n\n    return {\n      start: function start() {\n        state = mode.onSetup(startOpts); // this should set ui buttons\n        this.on('drag', function () {\n          return true;\n        }, wrapper('onDrag'));\n        this.on('click', function () {\n          return true;\n        }, wrapper('onClick'));\n        this.on('mousemove', function () {\n          return true;\n        }, wrapper('onMouseMove'));\n        this.on('mousedown', function () {\n          return true;\n        }, wrapper('onMouseDown'));\n        this.on('mouseup', function () {\n          return true;\n        }, wrapper('onMouseUp'));\n        this.on('mouseout', function () {\n          return true;\n        }, wrapper('onMouseOut'));\n        this.on('keyup', function () {\n          return true;\n        }, wrapper('onKeyUp'));\n        this.on('keydown', function () {\n          return true;\n        }, wrapper('onKeyDown'));\n        this.on('touchstart', function () {\n          return true;\n        }, wrapper('onTouchStart'));\n        this.on('touchmove', function () {\n          return true;\n        }, wrapper('onTouchMove'));\n        this.on('touchend', function () {\n          return true;\n        }, wrapper('onTouchEnd'));\n        this.on('tap', function () {\n          return true;\n        }, wrapper('onTap'));\n      },\n      stop: function stop() {\n        mode.onStop(state);\n      },\n      trash: function trash() {\n        mode.onTrash(state);\n      },\n      combineFeatures: function combineFeatures() {\n        mode.onCombineFeatures(state);\n      },\n      uncombineFeatures: function uncombineFeatures() {\n        mode.onUncombineFeatures(state);\n      },\n      render: function render(geojson, push) {\n        mode.toDisplayFeatures(state, geojson, push);\n      }\n    };\n  };\n};\n\n},{\"./mode_interface\":55}],58:[function(require,module,exports){\n'use strict';\n\nvar CommonSelectors = require('../lib/common_selectors');\nvar mouseEventPoint = require('../lib/mouse_event_point');\nvar createSupplementaryPoints = require('../lib/create_supplementary_points');\nvar StringSet = require('../lib/string_set');\nvar doubleClickZoom = require('../lib/double_click_zoom');\nvar moveFeatures = require('../lib/move_features');\nvar Constants = require('../constants');\n\nvar SimpleSelect = {};\n\nSimpleSelect.onSetup = function (opts) {\n  var _this = this;\n\n  // turn the opts into state.\n  var state = {\n    dragMoveLocation: null,\n    boxSelectStartLocation: null,\n    boxSelectElement: undefined,\n    boxSelecting: false,\n    canBoxSelect: false,\n    dragMoveing: false,\n    canDragMove: false,\n    initiallySelectedFeatureIds: opts.featureIds || []\n  };\n\n  this.setSelected(state.initiallySelectedFeatureIds.filter(function (id) {\n    return _this.getFeature(id) !== undefined;\n  }));\n  this.fireActionable();\n\n  this.setActionableState({\n    combineFeatures: true,\n    uncombineFeatures: true,\n    trash: true\n  });\n\n  return state;\n};\n\nSimpleSelect.fireUpdate = function () {\n  this.map.fire(Constants.events.UPDATE, {\n    action: Constants.updateActions.MOVE,\n    features: this.getSelected().map(function (f) {\n      return f.toGeoJSON();\n    })\n  });\n};\n\nSimpleSelect.fireActionable = function () {\n  var _this2 = this;\n\n  var selectedFeatures = this.getSelected();\n\n  var multiFeatures = selectedFeatures.filter(function (feature) {\n    return _this2.isInstanceOf('MultiFeature', feature);\n  });\n\n  var combineFeatures = false;\n\n  if (selectedFeatures.length > 1) {\n    combineFeatures = true;\n    var featureType = selectedFeatures[0].type.replace('Multi', '');\n    selectedFeatures.forEach(function (feature) {\n      if (feature.type.replace('Multi', '') !== featureType) {\n        combineFeatures = false;\n      }\n    });\n  }\n\n  var uncombineFeatures = multiFeatures.length > 0;\n  var trash = selectedFeatures.length > 0;\n\n  this.setActionableState({\n    combineFeatures: combineFeatures, uncombineFeatures: uncombineFeatures, trash: trash\n  });\n};\n\nSimpleSelect.getUniqueIds = function (allFeatures) {\n  if (!allFeatures.length) return [];\n  var ids = allFeatures.map(function (s) {\n    return s.properties.id;\n  }).filter(function (id) {\n    return id !== undefined;\n  }).reduce(function (memo, id) {\n    memo.add(id);\n    return memo;\n  }, new StringSet());\n\n  return ids.values();\n};\n\nSimpleSelect.stopExtendedInteractions = function (state) {\n  if (state.boxSelectElement) {\n    if (state.boxSelectElement.parentNode) state.boxSelectElement.parentNode.removeChild(state.boxSelectElement);\n    state.boxSelectElement = null;\n  }\n\n  this.map.dragPan.enable();\n\n  state.boxSelecting = false;\n  state.canBoxSelect = false;\n  state.dragMoving = false;\n  state.canDragMove = false;\n};\n\nSimpleSelect.onStop = function () {\n  doubleClickZoom.enable(this);\n};\n\nSimpleSelect.onMouseUp = function (state, e) {\n  // Any mouseup should stop box selecting and dragMoving\n  if (CommonSelectors.true(e)) return this.stopExtendedInteractions(state);\n};\n\nSimpleSelect.onMouseMove = function (state) {\n  // On mousemove that is not a drag, stop extended interactions.\n  // This is useful if you drag off the canvas, release the button,\n  // then move the mouse back over the canvas --- we don't allow the\n  // interaction to continue then, but we do let it continue if you held\n  // the mouse button that whole time\n  return this.stopExtendedInteractions(state);\n};\n\nSimpleSelect.onMouseOut = function (state) {\n  // As soon as you mouse leaves the canvas, update the feature\n  if (state.dragMoving) return this.fireUpdate();\n};\n\nSimpleSelect.onTap = SimpleSelect.onClick = function (state, e) {\n  // Click (with or without shift) on no feature\n  if (CommonSelectors.noTarget(e)) return this.clickAnywhere(state, e); // also tap\n  if (CommonSelectors.isOfMetaType(Constants.meta.VERTEX)(e)) return this.clickOnVertex(state, e); //tap\n  if (CommonSelectors.isFeature(e)) return this.clickOnFeature(state, e);\n};\n\nSimpleSelect.clickAnywhere = function (state) {\n  var _this3 = this;\n\n  // Clear the re-render selection\n  var wasSelected = this.getSelectedIds();\n  if (wasSelected.length) {\n    this.clearSelectedFeatures();\n    wasSelected.forEach(function (id) {\n      return _this3.doRender(id);\n    });\n  }\n  doubleClickZoom.enable(this);\n  this.stopExtendedInteractions(state);\n};\n\nSimpleSelect.clickOnVertex = function (state, e) {\n  // Enter direct select mode\n  this.changeMode(Constants.modes.DIRECT_SELECT, {\n    featureId: e.featureTarget.properties.parent,\n    coordPath: e.featureTarget.properties.coord_path,\n    startPos: e.lngLat\n  });\n  this.updateUIClasses({ mouse: Constants.cursors.MOVE });\n};\n\nSimpleSelect.startOnActiveFeature = function (state, e) {\n  // Stop any already-underway extended interactions\n  this.stopExtendedInteractions(state);\n\n  // Disable map.dragPan immediately so it can't start\n  this.map.dragPan.disable();\n\n  // Re-render it and enable drag move\n  this.doRender(e.featureTarget.properties.id);\n\n  // Set up the state for drag moving\n  state.canDragMove = true;\n  state.dragMoveLocation = e.lngLat;\n};\n\nSimpleSelect.clickOnFeature = function (state, e) {\n  var _this4 = this;\n\n  // Stop everything\n  doubleClickZoom.disable(this);\n  this.stopExtendedInteractions(state);\n\n  var isShiftClick = CommonSelectors.isShiftDown(e);\n  var selectedFeatureIds = this.getSelectedIds();\n  var featureId = e.featureTarget.properties.id;\n  var isFeatureSelected = this.isSelected(featureId);\n\n  // Click (without shift) on any selected feature but a point\n  if (!isShiftClick && isFeatureSelected && this.getFeature(featureId).type !== Constants.geojsonTypes.POINT) {\n    // Enter direct select mode\n    return this.changeMode(Constants.modes.DIRECT_SELECT, {\n      featureId: featureId\n    });\n  }\n\n  // Shift-click on a selected feature\n  if (isFeatureSelected && isShiftClick) {\n    // Deselect it\n    this.deselect(featureId);\n    this.updateUIClasses({ mouse: Constants.cursors.POINTER });\n    if (selectedFeatureIds.length === 1) {\n      doubleClickZoom.enable(this);\n    }\n    // Shift-click on an unselected feature\n  } else if (!isFeatureSelected && isShiftClick) {\n    // Add it to the selection\n    this.select(featureId);\n    this.updateUIClasses({ mouse: Constants.cursors.MOVE });\n    // Click (without shift) on an unselected feature\n  } else if (!isFeatureSelected && !isShiftClick) {\n    // Make it the only selected feature\n    selectedFeatureIds.forEach(function (id) {\n      return _this4.doRender(id);\n    });\n    this.setSelected(featureId);\n    this.updateUIClasses({ mouse: Constants.cursors.MOVE });\n  }\n\n  // No matter what, re-render the clicked feature\n  this.doRender(featureId);\n};\n\nSimpleSelect.onMouseDown = function (state, e) {\n  if (CommonSelectors.isActiveFeature(e)) return this.startOnActiveFeature(state, e);\n  if (this.drawConfig.boxSelect && CommonSelectors.isShiftMousedown(e)) return this.startBoxSelect(state, e);\n};\n\nSimpleSelect.startBoxSelect = function (state, e) {\n  this.stopExtendedInteractions(state);\n  this.map.dragPan.disable();\n  // Enable box select\n  state.boxSelectStartLocation = mouseEventPoint(e.originalEvent, this.map.getContainer());\n  state.canBoxSelect = true;\n};\n\nSimpleSelect.onTouchStart = function (state, e) {\n  if (CommonSelectors.isActiveFeature(e)) return this.startOnActiveFeature(state, e);\n};\n\nSimpleSelect.onDrag = function (state, e) {\n  if (state.canDragMove) return this.dragMove(state, e);\n  if (this.drawConfig.boxSelect && state.canBoxSelect) return this.whileBoxSelect(state, e);\n};\n\nSimpleSelect.whileBoxSelect = function (state, e) {\n  state.boxSelecting = true;\n  this.updateUIClasses({ mouse: Constants.cursors.ADD });\n\n  // Create the box node if it doesn't exist\n  if (!state.boxSelectElement) {\n    state.boxSelectElement = document.createElement('div');\n    state.boxSelectElement.classList.add(Constants.classes.BOX_SELECT);\n    this.map.getContainer().appendChild(state.boxSelectElement);\n  }\n\n  // Adjust the box node's width and xy position\n  var current = mouseEventPoint(e.originalEvent, this.map.getContainer());\n  var minX = Math.min(state.boxSelectStartLocation.x, current.x);\n  var maxX = Math.max(state.boxSelectStartLocation.x, current.x);\n  var minY = Math.min(state.boxSelectStartLocation.y, current.y);\n  var maxY = Math.max(state.boxSelectStartLocation.y, current.y);\n  var translateValue = 'translate(' + minX + 'px, ' + minY + 'px)';\n  state.boxSelectElement.style.transform = translateValue;\n  state.boxSelectElement.style.WebkitTransform = translateValue;\n  state.boxSelectElement.style.width = maxX - minX + 'px';\n  state.boxSelectElement.style.height = maxY - minY + 'px';\n};\n\nSimpleSelect.dragMove = function (state, e) {\n  // Dragging when drag move is enabled\n  state.dragMoving = true;\n  e.originalEvent.stopPropagation();\n\n  var delta = {\n    lng: e.lngLat.lng - state.dragMoveLocation.lng,\n    lat: e.lngLat.lat - state.dragMoveLocation.lat\n  };\n\n  moveFeatures(this.getSelected(), delta);\n\n  state.dragMoveLocation = e.lngLat;\n};\n\nSimpleSelect.onMouseUp = function (state, e) {\n  var _this5 = this;\n\n  // End any extended interactions\n  if (state.dragMoving) {\n    this.fireUpdate();\n  } else if (state.boxSelecting) {\n    var bbox = [state.boxSelectStartLocation, mouseEventPoint(e.originalEvent, this.map.getContainer())];\n    var featuresInBox = this.featuresAt(null, bbox, 'click');\n    var idsToSelect = this.getUniqueIds(featuresInBox).filter(function (id) {\n      return !_this5.isSelected(id);\n    });\n\n    if (idsToSelect.length) {\n      this.select(idsToSelect);\n      idsToSelect.forEach(function (id) {\n        return _this5.doRender(id);\n      });\n      this.updateUIClasses({ mouse: Constants.cursors.MOVE });\n    }\n  }\n  this.stopExtendedInteractions(state);\n};\n\nSimpleSelect.toDisplayFeatures = function (state, geojson, display) {\n  geojson.properties.active = this.isSelected(geojson.properties.id) ? Constants.activeStates.ACTIVE : Constants.activeStates.INACTIVE;\n  display(geojson);\n  this.fireActionable();\n  if (geojson.properties.active !== Constants.activeStates.ACTIVE || geojson.geometry.type === Constants.geojsonTypes.POINT) return;\n  createSupplementaryPoints(geojson).forEach(display);\n};\n\nSimpleSelect.onTrash = function () {\n  this.deleteFeature(this.getSelectedIds());\n  this.fireActionable();\n};\n\nSimpleSelect.onCombineFeatures = function () {\n  var selectedFeatures = this.getSelected();\n\n  if (selectedFeatures.length === 0 || selectedFeatures.length < 2) return;\n\n  var coordinates = [],\n      featuresCombined = [];\n  var featureType = selectedFeatures[0].type.replace('Multi', '');\n\n  for (var i = 0; i < selectedFeatures.length; i++) {\n    var feature = selectedFeatures[i];\n\n    if (feature.type.replace('Multi', '') !== featureType) {\n      return;\n    }\n    if (feature.type.includes('Multi')) {\n      feature.getCoordinates().forEach(function (subcoords) {\n        coordinates.push(subcoords);\n      });\n    } else {\n      coordinates.push(feature.getCoordinates());\n    }\n\n    featuresCombined.push(feature.toGeoJSON());\n  }\n\n  if (featuresCombined.length > 1) {\n    var multiFeature = this.newFeature({\n      type: Constants.geojsonTypes.FEATURE,\n      properties: featuresCombined[0].properties,\n      geometry: {\n        type: 'Multi' + featureType,\n        coordinates: coordinates\n      }\n    });\n\n    this.addFeature(multiFeature);\n    this.deleteFeature(this.getSelectedIds(), { silent: true });\n    this.setSelected([multiFeature.id]);\n\n    this.map.fire(Constants.events.COMBINE_FEATURES, {\n      createdFeatures: [multiFeature.toGeoJSON()],\n      deletedFeatures: featuresCombined\n    });\n  }\n  this.fireActionable();\n};\n\nSimpleSelect.onUncombineFeatures = function () {\n  var _this6 = this;\n\n  var selectedFeatures = this.getSelected();\n  if (selectedFeatures.length === 0) return;\n\n  var createdFeatures = [];\n  var featuresUncombined = [];\n\n  var _loop = function _loop(i) {\n    var feature = selectedFeatures[i];\n\n    if (_this6.isInstanceOf('MultiFeature', feature)) {\n      feature.getFeatures().forEach(function (subFeature) {\n        _this6.addFeature(subFeature);\n        subFeature.properties = feature.properties;\n        createdFeatures.push(subFeature.toGeoJSON());\n        _this6.select([subFeature.id]);\n      });\n      _this6.deleteFeature(feature.id, { silent: true });\n      featuresUncombined.push(feature.toGeoJSON());\n    }\n  };\n\n  for (var i = 0; i < selectedFeatures.length; i++) {\n    _loop(i);\n  }\n\n  if (createdFeatures.length > 1) {\n    this.map.fire(Constants.events.UNCOMBINE_FEATURES, {\n      createdFeatures: createdFeatures,\n      deletedFeatures: featuresUncombined\n    });\n  }\n  this.fireActionable();\n};\n\nmodule.exports = SimpleSelect;\n\n},{\"../constants\":21,\"../lib/common_selectors\":28,\"../lib/create_supplementary_points\":31,\"../lib/double_click_zoom\":33,\"../lib/mouse_event_point\":42,\"../lib/move_features\":43,\"../lib/string_set\":45}],59:[function(require,module,exports){\n'use strict';\n\nvar xtend = require('xtend');\nvar Constants = require('./constants');\n\nvar defaultOptions = {\n  defaultMode: Constants.modes.SIMPLE_SELECT,\n  keybindings: true,\n  touchEnabled: true,\n  clickBuffer: 2,\n  touchBuffer: 25,\n  boxSelect: true,\n  displayControlsDefault: true,\n  styles: require('./lib/theme'),\n  modes: require('./modes'),\n  controls: {},\n  userProperties: false\n};\n\nvar showControls = {\n  point: true,\n  line_string: true,\n  polygon: true,\n  trash: true,\n  combine_features: true,\n  uncombine_features: true\n};\n\nvar hideControls = {\n  point: false,\n  line_string: false,\n  polygon: false,\n  trash: false,\n  combine_features: false,\n  uncombine_features: false\n};\n\nfunction addSources(styles, sourceBucket) {\n  return styles.map(function (style) {\n    if (style.source) return style;\n    return xtend(style, {\n      id: style.id + '.' + sourceBucket,\n      source: sourceBucket === 'hot' ? Constants.sources.HOT : Constants.sources.COLD\n    });\n  });\n}\n\nmodule.exports = function () {\n  var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n  var withDefaults = xtend(options);\n\n  if (!options.controls) {\n    withDefaults.controls = {};\n  }\n\n  if (options.displayControlsDefault === false) {\n    withDefaults.controls = xtend(hideControls, options.controls);\n  } else {\n    withDefaults.controls = xtend(showControls, options.controls);\n  }\n\n  withDefaults = xtend(defaultOptions, withDefaults);\n\n  // Layers with a shared source should be adjacent for performance reasons\n  withDefaults.styles = addSources(withDefaults.styles, 'cold').concat(addSources(withDefaults.styles, 'hot'));\n\n  return withDefaults;\n};\n\n},{\"./constants\":21,\"./lib/theme\":47,\"./modes\":54,\"xtend\":19}],60:[function(require,module,exports){\n'use strict';\n\nvar Constants = require('./constants');\n\nmodule.exports = function render() {\n  var store = this;\n  var mapExists = store.ctx.map && store.ctx.map.getSource(Constants.sources.HOT) !== undefined;\n  if (!mapExists) return cleanup();\n\n  var mode = store.ctx.events.currentModeName();\n\n  store.ctx.ui.queueMapClasses({ mode: mode });\n\n  var newHotIds = [];\n  var newColdIds = [];\n\n  if (store.isDirty) {\n    newColdIds = store.getAllIds();\n  } else {\n    newHotIds = store.getChangedIds().filter(function (id) {\n      return store.get(id) !== undefined;\n    });\n    newColdIds = store.sources.hot.filter(function (geojson) {\n      return geojson.properties.id && newHotIds.indexOf(geojson.properties.id) === -1 && store.get(geojson.properties.id) !== undefined;\n    }).map(function (geojson) {\n      return geojson.properties.id;\n    });\n  }\n\n  store.sources.hot = [];\n  var lastColdCount = store.sources.cold.length;\n  store.sources.cold = store.isDirty ? [] : store.sources.cold.filter(function (geojson) {\n    var id = geojson.properties.id || geojson.properties.parent;\n    return newHotIds.indexOf(id) === -1;\n  });\n\n  var coldChanged = lastColdCount !== store.sources.cold.length || newColdIds.length > 0;\n  newHotIds.forEach(function (id) {\n    return renderFeature(id, 'hot');\n  });\n  newColdIds.forEach(function (id) {\n    return renderFeature(id, 'cold');\n  });\n\n  function renderFeature(id, source) {\n    var feature = store.get(id);\n    var featureInternal = feature.internal(mode);\n    store.ctx.events.currentModeRender(featureInternal, function (geojson) {\n      store.sources[source].push(geojson);\n    });\n  }\n\n  if (coldChanged) {\n    store.ctx.map.getSource(Constants.sources.COLD).setData({\n      type: Constants.geojsonTypes.FEATURE_COLLECTION,\n      features: store.sources.cold\n    });\n  }\n\n  store.ctx.map.getSource(Constants.sources.HOT).setData({\n    type: Constants.geojsonTypes.FEATURE_COLLECTION,\n    features: store.sources.hot\n  });\n\n  if (store._emitSelectionChange) {\n    store.ctx.map.fire(Constants.events.SELECTION_CHANGE, {\n      features: store.getSelected().map(function (feature) {\n        return feature.toGeoJSON();\n      }),\n      points: store.getSelectedCoordinates().map(function (coordinate) {\n        return {\n          type: Constants.geojsonTypes.FEATURE,\n          properties: {},\n          geometry: {\n            type: Constants.geojsonTypes.POINT,\n            coordinates: coordinate.coordinates\n          }\n        };\n      })\n    });\n    store._emitSelectionChange = false;\n  }\n\n  if (store._deletedFeaturesToEmit.length) {\n    var geojsonToEmit = store._deletedFeaturesToEmit.map(function (feature) {\n      return feature.toGeoJSON();\n    });\n\n    store._deletedFeaturesToEmit = [];\n\n    store.ctx.map.fire(Constants.events.DELETE, {\n      features: geojsonToEmit\n    });\n  }\n\n  store.ctx.map.fire(Constants.events.RENDER, {});\n  cleanup();\n\n  function cleanup() {\n    store.isDirty = false;\n    store.clearChangedIds();\n  }\n};\n\n},{\"./constants\":21}],61:[function(require,module,exports){\n'use strict';\n\nvar events = require('./events');\nvar Store = require('./store');\nvar ui = require('./ui');\nvar Constants = require('./constants');\n\nmodule.exports = function (ctx) {\n\n  var controlContainer = null;\n  var mapLoadedInterval = null;\n\n  var setup = {\n    onRemove: function onRemove() {\n      // Stop connect attempt in the event that control is removed before map is loaded\n      ctx.map.off('load', setup.connect);\n      clearInterval(mapLoadedInterval);\n\n      setup.removeLayers();\n      ctx.ui.removeButtons();\n      ctx.events.removeEventListeners();\n      ctx.map = null;\n      ctx.container = null;\n      ctx.store = null;\n\n      if (controlContainer && controlContainer.parentNode) controlContainer.parentNode.removeChild(controlContainer);\n      controlContainer = null;\n\n      return this;\n    },\n    connect: function connect() {\n      ctx.map.off('load', setup.connect);\n      clearInterval(mapLoadedInterval);\n      setup.addLayers();\n      ctx.events.addEventListeners();\n    },\n    onAdd: function onAdd(map) {\n      ctx.map = map;\n      ctx.events = events(ctx);\n      ctx.ui = ui(ctx);\n      ctx.container = map.getContainer();\n      ctx.store = new Store(ctx);\n\n      controlContainer = ctx.ui.addButtons();\n\n      if (ctx.options.boxSelect) {\n        map.boxZoom.disable();\n        // Need to toggle dragPan on and off or else first\n        // dragPan disable attempt in simple_select doesn't work\n        map.dragPan.disable();\n        map.dragPan.enable();\n      }\n\n      if (map.loaded()) {\n        setup.connect();\n      } else {\n        map.on('load', setup.connect);\n        mapLoadedInterval = setInterval(function () {\n          if (map.loaded()) setup.connect();\n        }, 16);\n      }\n\n      ctx.events.start();\n      return controlContainer;\n    },\n    addLayers: function addLayers() {\n      // drawn features style\n      ctx.map.addSource(Constants.sources.COLD, {\n        data: {\n          type: Constants.geojsonTypes.FEATURE_COLLECTION,\n          features: []\n        },\n        type: 'geojson'\n      });\n\n      // hot features style\n      ctx.map.addSource(Constants.sources.HOT, {\n        data: {\n          type: Constants.geojsonTypes.FEATURE_COLLECTION,\n          features: []\n        },\n        type: 'geojson'\n      });\n\n      ctx.options.styles.forEach(function (style) {\n        ctx.map.addLayer(style);\n      });\n\n      ctx.store.render();\n    },\n    // Check for layers and sources before attempting to remove\n    // If user adds draw control and removes it before the map is loaded, layers and sources will be missing\n    removeLayers: function removeLayers() {\n      ctx.options.styles.forEach(function (style) {\n        if (ctx.map.getLayer(style.id)) {\n          ctx.map.removeLayer(style.id);\n        }\n      });\n\n      if (ctx.map.getSource(Constants.sources.COLD)) {\n        ctx.map.removeSource(Constants.sources.COLD);\n      }\n\n      if (ctx.map.getSource(Constants.sources.HOT)) {\n        ctx.map.removeSource(Constants.sources.HOT);\n      }\n    }\n  };\n\n  ctx.setup = setup;\n\n  return setup;\n};\n\n},{\"./constants\":21,\"./events\":22,\"./store\":62,\"./ui\":63}],62:[function(require,module,exports){\n'use strict';\n\nvar throttle = require('./lib/throttle');\nvar toDenseArray = require('./lib/to_dense_array');\nvar StringSet = require('./lib/string_set');\nvar render = require('./render');\n\nvar Store = module.exports = function (ctx) {\n  this._features = {};\n  this._featureIds = new StringSet();\n  this._selectedFeatureIds = new StringSet();\n  this._selectedCoordinates = [];\n  this._changedFeatureIds = new StringSet();\n  this._deletedFeaturesToEmit = [];\n  this._emitSelectionChange = false;\n  this.ctx = ctx;\n  this.sources = {\n    hot: [],\n    cold: []\n  };\n  this.render = throttle(render, 16, this);\n  this.isDirty = false;\n};\n\n/**\n * Delays all rendering until the returned function is invoked\n * @return {Function} renderBatch\n */\nStore.prototype.createRenderBatch = function () {\n  var _this = this;\n\n  var holdRender = this.render;\n  var numRenders = 0;\n  this.render = function () {\n    numRenders++;\n  };\n\n  return function () {\n    _this.render = holdRender;\n    if (numRenders > 0) {\n      _this.render();\n    }\n  };\n};\n\n/**\n * Sets the store's state to dirty.\n * @return {Store} this\n */\nStore.prototype.setDirty = function () {\n  this.isDirty = true;\n  return this;\n};\n\n/**\n * Sets a feature's state to changed.\n * @param {string} featureId\n * @return {Store} this\n */\nStore.prototype.featureChanged = function (featureId) {\n  this._changedFeatureIds.add(featureId);\n  return this;\n};\n\n/**\n * Gets the ids of all features currently in changed state.\n * @return {Store} this\n */\nStore.prototype.getChangedIds = function () {\n  return this._changedFeatureIds.values();\n};\n\n/**\n * Sets all features to unchanged state.\n * @return {Store} this\n */\nStore.prototype.clearChangedIds = function () {\n  this._changedFeatureIds.clear();\n  return this;\n};\n\n/**\n * Gets the ids of all features in the store.\n * @return {Store} this\n */\nStore.prototype.getAllIds = function () {\n  return this._featureIds.values();\n};\n\n/**\n * Adds a feature to the store.\n * @param {Object} feature\n *\n * @return {Store} this\n */\nStore.prototype.add = function (feature) {\n  this.featureChanged(feature.id);\n  this._features[feature.id] = feature;\n  this._featureIds.add(feature.id);\n  return this;\n};\n\n/**\n * Deletes a feature or array of features from the store.\n * Cleans up after the deletion by deselecting the features.\n * If changes were made, sets the state to the dirty\n * and fires an event.\n * @param {string | Array<string>} featureIds\n * @param {Object} [options]\n * @param {Object} [options.silent] - If `true`, this invocation will not fire an event.\n * @return {Store} this\n */\nStore.prototype.delete = function (featureIds) {\n  var _this2 = this;\n\n  var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n  toDenseArray(featureIds).forEach(function (id) {\n    if (!_this2._featureIds.has(id)) return;\n    _this2._featureIds.delete(id);\n    _this2._selectedFeatureIds.delete(id);\n    if (!options.silent) {\n      if (_this2._deletedFeaturesToEmit.indexOf(_this2._features[id]) === -1) {\n        _this2._deletedFeaturesToEmit.push(_this2._features[id]);\n      }\n    }\n    delete _this2._features[id];\n    _this2.isDirty = true;\n  });\n  refreshSelectedCoordinates.call(this, options);\n  return this;\n};\n\n/**\n * Returns a feature in the store matching the specified value.\n * @return {Object | undefined} feature\n */\nStore.prototype.get = function (id) {\n  return this._features[id];\n};\n\n/**\n * Returns all features in the store.\n * @return {Array<Object>}\n */\nStore.prototype.getAll = function () {\n  var _this3 = this;\n\n  return Object.keys(this._features).map(function (id) {\n    return _this3._features[id];\n  });\n};\n\n/**\n * Adds features to the current selection.\n * @param {string | Array<string>} featureIds\n * @param {Object} [options]\n * @param {Object} [options.silent] - If `true`, this invocation will not fire an event.\n * @return {Store} this\n */\nStore.prototype.select = function (featureIds) {\n  var _this4 = this;\n\n  var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n  toDenseArray(featureIds).forEach(function (id) {\n    if (_this4._selectedFeatureIds.has(id)) return;\n    _this4._selectedFeatureIds.add(id);\n    _this4._changedFeatureIds.add(id);\n    if (!options.silent) {\n      _this4._emitSelectionChange = true;\n    }\n  });\n  return this;\n};\n\n/**\n * Deletes features from the current selection.\n * @param {string | Array<string>} featureIds\n * @param {Object} [options]\n * @param {Object} [options.silent] - If `true`, this invocation will not fire an event.\n * @return {Store} this\n */\nStore.prototype.deselect = function (featureIds) {\n  var _this5 = this;\n\n  var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n  toDenseArray(featureIds).forEach(function (id) {\n    if (!_this5._selectedFeatureIds.has(id)) return;\n    _this5._selectedFeatureIds.delete(id);\n    _this5._changedFeatureIds.add(id);\n    if (!options.silent) {\n      _this5._emitSelectionChange = true;\n    }\n  });\n  refreshSelectedCoordinates.call(this, options);\n  return this;\n};\n\n/**\n * Clears the current selection.\n * @param {Object} [options]\n * @param {Object} [options.silent] - If `true`, this invocation will not fire an event.\n * @return {Store} this\n */\nStore.prototype.clearSelected = function () {\n  var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n  this.deselect(this._selectedFeatureIds.values(), { silent: options.silent });\n  return this;\n};\n\n/**\n * Sets the store's selection, clearing any prior values.\n * If no feature ids are passed, the store is just cleared.\n * @param {string | Array<string> | undefined} featureIds\n * @param {Object} [options]\n * @param {Object} [options.silent] - If `true`, this invocation will not fire an event.\n * @return {Store} this\n */\nStore.prototype.setSelected = function (featureIds) {\n  var _this6 = this;\n\n  var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n  featureIds = toDenseArray(featureIds);\n\n  // Deselect any features not in the new selection\n  this.deselect(this._selectedFeatureIds.values().filter(function (id) {\n    return featureIds.indexOf(id) === -1;\n  }), { silent: options.silent });\n\n  // Select any features in the new selection that were not already selected\n  this.select(featureIds.filter(function (id) {\n    return !_this6._selectedFeatureIds.has(id);\n  }), { silent: options.silent });\n\n  return this;\n};\n\n/**\n * Sets the store's coordinates selection, clearing any prior values.\n * @param {Array<Array<string>>} coordinates\n * @return {Store} this\n */\nStore.prototype.setSelectedCoordinates = function (coordinates) {\n  this._selectedCoordinates = coordinates;\n  this._emitSelectionChange = true;\n  return this;\n};\n\n/**\n * Clears the current coordinates selection.\n * @param {Object} [options]\n * @return {Store} this\n */\nStore.prototype.clearSelectedCoordinates = function () {\n  this._selectedCoordinates = [];\n  this._emitSelectionChange = true;\n  return this;\n};\n\n/**\n * Returns the ids of features in the current selection.\n * @return {Array<string>} Selected feature ids.\n */\nStore.prototype.getSelectedIds = function () {\n  return this._selectedFeatureIds.values();\n};\n\n/**\n * Returns features in the current selection.\n * @return {Array<Object>} Selected features.\n */\nStore.prototype.getSelected = function () {\n  var _this7 = this;\n\n  return this._selectedFeatureIds.values().map(function (id) {\n    return _this7.get(id);\n  });\n};\n\n/**\n * Returns selected coordinates in the currently selected feature.\n * @return {Array<Object>} Selected coordinates.\n */\nStore.prototype.getSelectedCoordinates = function () {\n  var _this8 = this;\n\n  var selected = this._selectedCoordinates.map(function (coordinate) {\n    var feature = _this8.get(coordinate.feature_id);\n    return {\n      coordinates: feature.getCoordinate(coordinate.coord_path)\n    };\n  });\n  return selected;\n};\n\n/**\n * Indicates whether a feature is selected.\n * @param {string} featureId\n * @return {boolean} `true` if the feature is selected, `false` if not.\n */\nStore.prototype.isSelected = function (featureId) {\n  return this._selectedFeatureIds.has(featureId);\n};\n\n/**\n * Sets a property on the given feature\n * @param {string} featureId\n * @param {string} property property\n * @param {string} property value\n*/\nStore.prototype.setFeatureProperty = function (featureId, property, value) {\n  this.get(featureId).setProperty(property, value);\n  this.featureChanged(featureId);\n};\n\nfunction refreshSelectedCoordinates(options) {\n  var _this9 = this;\n\n  var newSelectedCoordinates = this._selectedCoordinates.filter(function (point) {\n    return _this9._selectedFeatureIds.has(point.feature_id);\n  });\n  if (this._selectedCoordinates.length !== newSelectedCoordinates.length && !options.silent) {\n    this._emitSelectionChange = true;\n  }\n  this._selectedCoordinates = newSelectedCoordinates;\n}\n\n},{\"./lib/string_set\":45,\"./lib/throttle\":48,\"./lib/to_dense_array\":49,\"./render\":60}],63:[function(require,module,exports){\n'use strict';\n\nvar xtend = require('xtend');\nvar Constants = require('./constants');\n\nvar classTypes = ['mode', 'feature', 'mouse'];\n\nmodule.exports = function (ctx) {\n\n  var buttonElements = {};\n  var activeButton = null;\n\n  var currentMapClasses = {\n    mode: null, // e.g. mode-direct_select\n    feature: null, // e.g. feature-vertex\n    mouse: null // e.g. mouse-move\n  };\n\n  var nextMapClasses = {\n    mode: null,\n    feature: null,\n    mouse: null\n  };\n\n  function queueMapClasses(options) {\n    nextMapClasses = xtend(nextMapClasses, options);\n  }\n\n  function updateMapClasses() {\n    if (!ctx.container) return;\n\n    var classesToRemove = [];\n    var classesToAdd = [];\n\n    classTypes.forEach(function (type) {\n      if (nextMapClasses[type] === currentMapClasses[type]) return;\n\n      classesToRemove.push(type + '-' + currentMapClasses[type]);\n      if (nextMapClasses[type] !== null) {\n        classesToAdd.push(type + '-' + nextMapClasses[type]);\n      }\n    });\n\n    if (classesToRemove.length > 0) {\n      ctx.container.classList.remove.apply(ctx.container.classList, classesToRemove);\n    }\n\n    if (classesToAdd.length > 0) {\n      ctx.container.classList.add.apply(ctx.container.classList, classesToAdd);\n    }\n\n    currentMapClasses = xtend(currentMapClasses, nextMapClasses);\n  }\n\n  function createControlButton(id) {\n    var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n    var button = document.createElement('button');\n    button.className = Constants.classes.CONTROL_BUTTON + ' ' + options.className;\n    button.setAttribute('title', options.title);\n    options.container.appendChild(button);\n\n    button.addEventListener('click', function (e) {\n      e.preventDefault();\n      e.stopPropagation();\n\n      var clickedButton = e.target;\n      if (clickedButton === activeButton) {\n        deactivateButtons();\n        return;\n      }\n\n      setActiveButton(id);\n      options.onActivate();\n    }, true);\n\n    return button;\n  }\n\n  function deactivateButtons() {\n    if (!activeButton) return;\n    activeButton.classList.remove(Constants.classes.ACTIVE_BUTTON);\n    activeButton = null;\n  }\n\n  function setActiveButton(id) {\n    deactivateButtons();\n\n    var button = buttonElements[id];\n    if (!button) return;\n\n    if (button && id !== 'trash') {\n      button.classList.add(Constants.classes.ACTIVE_BUTTON);\n      activeButton = button;\n    }\n  }\n\n  function addButtons() {\n    var controls = ctx.options.controls;\n    var controlGroup = document.createElement('div');\n    controlGroup.className = Constants.classes.CONTROL_GROUP + ' ' + Constants.classes.CONTROL_BASE;\n\n    if (!controls) return controlGroup;\n\n    if (controls[Constants.types.LINE]) {\n      buttonElements[Constants.types.LINE] = createControlButton(Constants.types.LINE, {\n        container: controlGroup,\n        className: Constants.classes.CONTROL_BUTTON_LINE,\n        title: 'LineString tool ' + (ctx.options.keybindings ? '(l)' : ''),\n        onActivate: function onActivate() {\n          return ctx.events.changeMode(Constants.modes.DRAW_LINE_STRING);\n        }\n      });\n    }\n\n    if (controls[Constants.types.POLYGON]) {\n      buttonElements[Constants.types.POLYGON] = createControlButton(Constants.types.POLYGON, {\n        container: controlGroup,\n        className: Constants.classes.CONTROL_BUTTON_POLYGON,\n        title: 'Polygon tool ' + (ctx.options.keybindings ? '(p)' : ''),\n        onActivate: function onActivate() {\n          return ctx.events.changeMode(Constants.modes.DRAW_POLYGON);\n        }\n      });\n    }\n\n    if (controls[Constants.types.POINT]) {\n      buttonElements[Constants.types.POINT] = createControlButton(Constants.types.POINT, {\n        container: controlGroup,\n        className: Constants.classes.CONTROL_BUTTON_POINT,\n        title: 'Marker tool ' + (ctx.options.keybindings ? '(m)' : ''),\n        onActivate: function onActivate() {\n          return ctx.events.changeMode(Constants.modes.DRAW_POINT);\n        }\n      });\n    }\n\n    if (controls.trash) {\n      buttonElements.trash = createControlButton('trash', {\n        container: controlGroup,\n        className: Constants.classes.CONTROL_BUTTON_TRASH,\n        title: 'Delete',\n        onActivate: function onActivate() {\n          ctx.events.trash();\n        }\n      });\n    }\n\n    if (controls.combine_features) {\n      buttonElements.combine_features = createControlButton('combineFeatures', {\n        container: controlGroup,\n        className: Constants.classes.CONTROL_BUTTON_COMBINE_FEATURES,\n        title: 'Combine',\n        onActivate: function onActivate() {\n          ctx.events.combineFeatures();\n        }\n      });\n    }\n\n    if (controls.uncombine_features) {\n      buttonElements.uncombine_features = createControlButton('uncombineFeatures', {\n        container: controlGroup,\n        className: Constants.classes.CONTROL_BUTTON_UNCOMBINE_FEATURES,\n        title: 'Uncombine',\n        onActivate: function onActivate() {\n          ctx.events.uncombineFeatures();\n        }\n      });\n    }\n\n    return controlGroup;\n  }\n\n  function removeButtons() {\n    Object.keys(buttonElements).forEach(function (buttonId) {\n      var button = buttonElements[buttonId];\n      if (button.parentNode) {\n        button.parentNode.removeChild(button);\n      }\n      delete buttonElements[buttonId];\n    });\n  }\n\n  return {\n    setActiveButton: setActiveButton,\n    queueMapClasses: queueMapClasses,\n    updateMapClasses: updateMapClasses,\n    addButtons: addButtons,\n    removeButtons: removeButtons\n  };\n};\n\n},{\"./constants\":21,\"xtend\":19}],64:[function(require,module,exports){\n\n},{}],65:[function(require,module,exports){\n(function (process){\n// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n// resolves . and .. elements in a path array with directory names there\n// must be no slashes, empty elements, or device names (c:\\) in the array\n// (so also no leading and trailing slashes - it does not distinguish\n// relative and absolute paths)\nfunction normalizeArray(parts, allowAboveRoot) {\n  // if the path tries to go above the root, `up` ends up > 0\n  var up = 0;\n  for (var i = parts.length - 1; i >= 0; i--) {\n    var last = parts[i];\n    if (last === '.') {\n      parts.splice(i, 1);\n    } else if (last === '..') {\n      parts.splice(i, 1);\n      up++;\n    } else if (up) {\n      parts.splice(i, 1);\n      up--;\n    }\n  }\n\n  // if the path is allowed to go above the root, restore leading ..s\n  if (allowAboveRoot) {\n    for (; up--; up) {\n      parts.unshift('..');\n    }\n  }\n\n  return parts;\n}\n\n// Split a filename into [root, dir, basename, ext], unix version\n// 'root' is just a slash, or nothing.\nvar splitPathRe =\n    /^(\\/?|)([\\s\\S]*?)((?:\\.{1,2}|[^\\/]+?|)(\\.[^.\\/]*|))(?:[\\/]*)$/;\nvar splitPath = function(filename) {\n  return splitPathRe.exec(filename).slice(1);\n};\n\n// path.resolve([from ...], to)\n// posix version\nexports.resolve = function() {\n  var resolvedPath = '',\n      resolvedAbsolute = false;\n\n  for (var i = arguments.length - 1; i >= -1 && !resolvedAbsolute; i--) {\n    var path = (i >= 0) ? arguments[i] : process.cwd();\n\n    // Skip empty and invalid entries\n    if (typeof path !== 'string') {\n      throw new TypeError('Arguments to path.resolve must be strings');\n    } else if (!path) {\n      continue;\n    }\n\n    resolvedPath = path + '/' + resolvedPath;\n    resolvedAbsolute = path.charAt(0) === '/';\n  }\n\n  // At this point the path should be resolved to a full absolute path, but\n  // handle relative paths to be safe (might happen when process.cwd() fails)\n\n  // Normalize the path\n  resolvedPath = normalizeArray(filter(resolvedPath.split('/'), function(p) {\n    return !!p;\n  }), !resolvedAbsolute).join('/');\n\n  return ((resolvedAbsolute ? '/' : '') + resolvedPath) || '.';\n};\n\n// path.normalize(path)\n// posix version\nexports.normalize = function(path) {\n  var isAbsolute = exports.isAbsolute(path),\n      trailingSlash = substr(path, -1) === '/';\n\n  // Normalize the path\n  path = normalizeArray(filter(path.split('/'), function(p) {\n    return !!p;\n  }), !isAbsolute).join('/');\n\n  if (!path && !isAbsolute) {\n    path = '.';\n  }\n  if (path && trailingSlash) {\n    path += '/';\n  }\n\n  return (isAbsolute ? '/' : '') + path;\n};\n\n// posix version\nexports.isAbsolute = function(path) {\n  return path.charAt(0) === '/';\n};\n\n// posix version\nexports.join = function() {\n  var paths = Array.prototype.slice.call(arguments, 0);\n  return exports.normalize(filter(paths, function(p, index) {\n    if (typeof p !== 'string') {\n      throw new TypeError('Arguments to path.join must be strings');\n    }\n    return p;\n  }).join('/'));\n};\n\n\n// path.relative(from, to)\n// posix version\nexports.relative = function(from, to) {\n  from = exports.resolve(from).substr(1);\n  to = exports.resolve(to).substr(1);\n\n  function trim(arr) {\n    var start = 0;\n    for (; start < arr.length; start++) {\n      if (arr[start] !== '') break;\n    }\n\n    var end = arr.length - 1;\n    for (; end >= 0; end--) {\n      if (arr[end] !== '') break;\n    }\n\n    if (start > end) return [];\n    return arr.slice(start, end - start + 1);\n  }\n\n  var fromParts = trim(from.split('/'));\n  var toParts = trim(to.split('/'));\n\n  var length = Math.min(fromParts.length, toParts.length);\n  var samePartsLength = length;\n  for (var i = 0; i < length; i++) {\n    if (fromParts[i] !== toParts[i]) {\n      samePartsLength = i;\n      break;\n    }\n  }\n\n  var outputParts = [];\n  for (var i = samePartsLength; i < fromParts.length; i++) {\n    outputParts.push('..');\n  }\n\n  outputParts = outputParts.concat(toParts.slice(samePartsLength));\n\n  return outputParts.join('/');\n};\n\nexports.sep = '/';\nexports.delimiter = ':';\n\nexports.dirname = function(path) {\n  var result = splitPath(path),\n      root = result[0],\n      dir = result[1];\n\n  if (!root && !dir) {\n    // No dirname whatsoever\n    return '.';\n  }\n\n  if (dir) {\n    // It has a dirname, strip trailing slash\n    dir = dir.substr(0, dir.length - 1);\n  }\n\n  return root + dir;\n};\n\n\nexports.basename = function(path, ext) {\n  var f = splitPath(path)[2];\n  // TODO: make this comparison case-insensitive on windows?\n  if (ext && f.substr(-1 * ext.length) === ext) {\n    f = f.substr(0, f.length - ext.length);\n  }\n  return f;\n};\n\n\nexports.extname = function(path) {\n  return splitPath(path)[3];\n};\n\nfunction filter (xs, f) {\n    if (xs.filter) return xs.filter(f);\n    var res = [];\n    for (var i = 0; i < xs.length; i++) {\n        if (f(xs[i], i, xs)) res.push(xs[i]);\n    }\n    return res;\n}\n\n// String.prototype.substr - negative index don't work in IE8\nvar substr = 'ab'.substr(-1) === 'b'\n    ? function (str, start, len) { return str.substr(start, len) }\n    : function (str, start, len) {\n        if (start < 0) start = str.length + start;\n        return str.substr(start, len);\n    }\n;\n\n}).call(this,require('_process'))\n},{\"_process\":66}],66:[function(require,module,exports){\n// shim for using process in browser\nvar process = module.exports = {};\n\n// cached from whatever global is present so that test runners that stub it\n// don't break things.  But we need to wrap it in a try catch in case it is\n// wrapped in strict mode code which doesn't define any globals.  It's inside a\n// function because try/catches deoptimize in certain engines.\n\nvar cachedSetTimeout;\nvar cachedClearTimeout;\n\nfunction defaultSetTimout() {\n    throw new Error('setTimeout has not been defined');\n}\nfunction defaultClearTimeout () {\n    throw new Error('clearTimeout has not been defined');\n}\n(function () {\n    try {\n        if (typeof setTimeout === 'function') {\n            cachedSetTimeout = setTimeout;\n        } else {\n            cachedSetTimeout = defaultSetTimout;\n        }\n    } catch (e) {\n        cachedSetTimeout = defaultSetTimout;\n    }\n    try {\n        if (typeof clearTimeout === 'function') {\n            cachedClearTimeout = clearTimeout;\n        } else {\n            cachedClearTimeout = defaultClearTimeout;\n        }\n    } catch (e) {\n        cachedClearTimeout = defaultClearTimeout;\n    }\n} ())\nfunction runTimeout(fun) {\n    if (cachedSetTimeout === setTimeout) {\n        //normal enviroments in sane situations\n        return setTimeout(fun, 0);\n    }\n    // if setTimeout wasn't available but was latter defined\n    if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {\n        cachedSetTimeout = setTimeout;\n        return setTimeout(fun, 0);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedSetTimeout(fun, 0);\n    } catch(e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't trust the global object when called normally\n            return cachedSetTimeout.call(null, fun, 0);\n        } catch(e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error\n            return cachedSetTimeout.call(this, fun, 0);\n        }\n    }\n\n\n}\nfunction runClearTimeout(marker) {\n    if (cachedClearTimeout === clearTimeout) {\n        //normal enviroments in sane situations\n        return clearTimeout(marker);\n    }\n    // if clearTimeout wasn't available but was latter defined\n    if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {\n        cachedClearTimeout = clearTimeout;\n        return clearTimeout(marker);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedClearTimeout(marker);\n    } catch (e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't  trust the global object when called normally\n            return cachedClearTimeout.call(null, marker);\n        } catch (e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error.\n            // Some versions of I.E. have different rules for clearTimeout vs setTimeout\n            return cachedClearTimeout.call(this, marker);\n        }\n    }\n\n\n\n}\nvar queue = [];\nvar draining = false;\nvar currentQueue;\nvar queueIndex = -1;\n\nfunction cleanUpNextTick() {\n    if (!draining || !currentQueue) {\n        return;\n    }\n    draining = false;\n    if (currentQueue.length) {\n        queue = currentQueue.concat(queue);\n    } else {\n        queueIndex = -1;\n    }\n    if (queue.length) {\n        drainQueue();\n    }\n}\n\nfunction drainQueue() {\n    if (draining) {\n        return;\n    }\n    var timeout = runTimeout(cleanUpNextTick);\n    draining = true;\n\n    var len = queue.length;\n    while(len) {\n        currentQueue = queue;\n        queue = [];\n        while (++queueIndex < len) {\n            if (currentQueue) {\n                currentQueue[queueIndex].run();\n            }\n        }\n        queueIndex = -1;\n        len = queue.length;\n    }\n    currentQueue = null;\n    draining = false;\n    runClearTimeout(timeout);\n}\n\nprocess.nextTick = function (fun) {\n    var args = new Array(arguments.length - 1);\n    if (arguments.length > 1) {\n        for (var i = 1; i < arguments.length; i++) {\n            args[i - 1] = arguments[i];\n        }\n    }\n    queue.push(new Item(fun, args));\n    if (queue.length === 1 && !draining) {\n        runTimeout(drainQueue);\n    }\n};\n\n// v8 likes predictible objects\nfunction Item(fun, array) {\n    this.fun = fun;\n    this.array = array;\n}\nItem.prototype.run = function () {\n    this.fun.apply(null, this.array);\n};\nprocess.title = 'browser';\nprocess.browser = true;\nprocess.env = {};\nprocess.argv = [];\nprocess.version = ''; // empty string to avoid regexp issues\nprocess.versions = {};\n\nfunction noop() {}\n\nprocess.on = noop;\nprocess.addListener = noop;\nprocess.once = noop;\nprocess.off = noop;\nprocess.removeListener = noop;\nprocess.removeAllListeners = noop;\nprocess.emit = noop;\nprocess.prependListener = noop;\nprocess.prependOnceListener = noop;\n\nprocess.listeners = function (name) { return [] }\n\nprocess.binding = function (name) {\n    throw new Error('process.binding is not supported');\n};\n\nprocess.cwd = function () { return '/' };\nprocess.chdir = function (dir) {\n    throw new Error('process.chdir is not supported');\n};\nprocess.umask = function() { return 0; };\n\n},{}]},{},[1])(1)\n});"]}